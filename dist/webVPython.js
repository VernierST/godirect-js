/**
 * Copyright (c) 2023 Vernier Software. All rights reserved.
 * This code may only be used under the BSD 3-Clause license found at
 * https://raw.githubusercontent.com/VernierST/godirect-js/main/LICENSE
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).gdx=t()}(this,(function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e,t,n,r,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function c(e){n(a,i,o,c,s,"next",e)}function s(e){n(a,i,o,c,s,"throw",e)}c(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e,t,n){return p=f()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&l(i,n.prototype),i},p.apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return d=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return p(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)},d(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function y(e){var t=f();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function m(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function x(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w={exports:{}},S={exports:{}},_={exports:{}},k=function(e){return e&&e.Math==Math&&e},E=k("object"==typeof globalThis&&globalThis)||k("object"==typeof window&&window)||k("object"==typeof self&&self)||k("object"==typeof b&&b)||function(){return this}()||Function("return this")(),O=function(e){try{return!!e()}catch(e){return!0}},A=!O((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),j=A,C=Function.prototype,P=C.apply,M=C.call,T="object"==typeof Reflect&&Reflect.apply||(j?M.bind(P):function(){return M.apply(P,arguments)}),L=A,D=Function.prototype,I=D.bind,R=D.call,U=L&&I.bind(R,R),N=L?function(e){return e&&U(e)}:function(e){return e&&function(){return R.apply(e,arguments)}},F=function(e){return"function"==typeof e},B={},G=!O((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),V=A,z=Function.prototype.call,W=V?z.bind(z):function(){return z.apply(z,arguments)},q={},H={}.propertyIsEnumerable,Q=Object.getOwnPropertyDescriptor,K=Q&&!H.call({1:2},1);q.f=K?function(e){var t=Q(this,e);return!!t&&t.enumerable}:H;var Y,J,X=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},$=N,Z=$({}.toString),ee=$("".slice),te=function(e){return ee(Z(e),8,-1)},ne=N,re=O,ie=te,oe=E.Object,ae=ne("".split),ce=re((function(){return!oe("z").propertyIsEnumerable(0)}))?function(e){return"String"==ie(e)?ae(e,""):oe(e)}:oe,se=E.TypeError,ue=function(e){if(null==e)throw se("Can't call method on "+e);return e},le=ce,fe=ue,pe=function(e){return le(fe(e))},de=F,ve=function(e){return"object"==typeof e?null!==e:de(e)},he={},ye=he,me=E,ge=F,be=function(e){return ge(e)?e:void 0},xe=function(e,t){return arguments.length<2?be(ye[e])||be(me[e]):ye[e]&&ye[e][t]||me[e]&&me[e][t]},we=N({}.isPrototypeOf),Se=xe("navigator","userAgent")||"",_e=E,ke=Se,Ee=_e.process,Oe=_e.Deno,Ae=Ee&&Ee.versions||Oe&&Oe.version,je=Ae&&Ae.v8;je&&(J=(Y=je.split("."))[0]>0&&Y[0]<4?1:+(Y[0]+Y[1])),!J&&ke&&(!(Y=ke.match(/Edge\/(\d+)/))||Y[1]>=74)&&(Y=ke.match(/Chrome\/(\d+)/))&&(J=+Y[1]);var Ce=J,Pe=Ce,Me=O,Te=!!Object.getOwnPropertySymbols&&!Me((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Pe&&Pe<41})),Le=Te&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,De=xe,Ie=F,Re=we,Ue=Le,Ne=E.Object,Fe=Ue?function(e){return"symbol"==typeof e}:function(e){var t=De("Symbol");return Ie(t)&&Re(t.prototype,Ne(e))},Be=E.String,Ge=function(e){try{return Be(e)}catch(e){return"Object"}},Ve=F,ze=Ge,We=E.TypeError,qe=function(e){if(Ve(e))return e;throw We(ze(e)+" is not a function")},He=qe,Qe=function(e,t){var n=e[t];return null==n?void 0:He(n)},Ke=W,Ye=F,Je=ve,Xe=E.TypeError,$e={exports:{}},Ze=E,et=Object.defineProperty,tt=function(e,t){try{et(Ze,e,{value:t,configurable:!0,writable:!0})}catch(n){Ze[e]=t}return t},nt="__core-js_shared__",rt=E[nt]||tt(nt,{}),it=rt;($e.exports=function(e,t){return it[e]||(it[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.0",mode:"pure",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.0/LICENSE",source:"https://github.com/zloirock/core-js"});var ot=ue,at=E.Object,ct=function(e){return at(ot(e))},st=ct,ut=N({}.hasOwnProperty),lt=Object.hasOwn||function(e,t){return ut(st(e),t)},ft=N,pt=0,dt=Math.random(),vt=ft(1..toString),ht=function(e){return"Symbol("+(void 0===e?"":e)+")_"+vt(++pt+dt,36)},yt=E,mt=$e.exports,gt=lt,bt=ht,xt=Te,wt=Le,St=mt("wks"),_t=yt.Symbol,kt=_t&&_t.for,Et=wt?_t:_t&&_t.withoutSetter||bt,Ot=function(e){if(!gt(St,e)||!xt&&"string"!=typeof St[e]){var t="Symbol."+e;xt&&gt(_t,e)?St[e]=_t[e]:St[e]=wt&&kt?kt(t):Et(t)}return St[e]},At=W,jt=ve,Ct=Fe,Pt=Qe,Mt=function(e,t){var n,r;if("string"===t&&Ye(n=e.toString)&&!Je(r=Ke(n,e)))return r;if(Ye(n=e.valueOf)&&!Je(r=Ke(n,e)))return r;if("string"!==t&&Ye(n=e.toString)&&!Je(r=Ke(n,e)))return r;throw Xe("Can't convert object to primitive value")},Tt=Ot,Lt=E.TypeError,Dt=Tt("toPrimitive"),It=function(e,t){if(!jt(e)||Ct(e))return e;var n,r=Pt(e,Dt);if(r){if(void 0===t&&(t="default"),n=At(r,e,t),!jt(n)||Ct(n))return n;throw Lt("Can't convert object to primitive value")}return void 0===t&&(t="number"),Mt(e,t)},Rt=Fe,Ut=function(e){var t=It(e,"string");return Rt(t)?t:t+""},Nt=ve,Ft=E.document,Bt=Nt(Ft)&&Nt(Ft.createElement),Gt=function(e){return Bt?Ft.createElement(e):{}},Vt=Gt,zt=!G&&!O((function(){return 7!=Object.defineProperty(Vt("div"),"a",{get:function(){return 7}}).a})),Wt=G,qt=W,Ht=q,Qt=X,Kt=pe,Yt=Ut,Jt=lt,Xt=zt,$t=Object.getOwnPropertyDescriptor;B.f=Wt?$t:function(e,t){if(e=Kt(e),t=Yt(t),Xt)try{return $t(e,t)}catch(e){}if(Jt(e,t))return Qt(!qt(Ht.f,e,t),e[t])};var Zt=O,en=F,tn=/#|\.prototype\./,nn=function(e,t){var n=on[rn(e)];return n==cn||n!=an&&(en(t)?Zt(t):!!t)},rn=nn.normalize=function(e){return String(e).replace(tn,".").toLowerCase()},on=nn.data={},an=nn.NATIVE="N",cn=nn.POLYFILL="P",sn=nn,un=qe,ln=A,fn=N(N.bind),pn=function(e,t){return un(e),void 0===t?e:ln?fn(e,t):function(){return e.apply(t,arguments)}},dn={},vn=G&&O((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),hn=E,yn=ve,mn=hn.String,gn=hn.TypeError,bn=function(e){if(yn(e))return e;throw gn(mn(e)+" is not an object")},xn=G,wn=zt,Sn=vn,_n=bn,kn=Ut,En=E.TypeError,On=Object.defineProperty,An=Object.getOwnPropertyDescriptor,jn="enumerable",Cn="configurable",Pn="writable";dn.f=xn?Sn?function(e,t,n){if(_n(e),t=kn(t),_n(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Pn in n&&!n.writable){var r=An(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:Cn in n?n.configurable:r.configurable,enumerable:jn in n?n.enumerable:r.enumerable,writable:!1})}return On(e,t,n)}:On:function(e,t,n){if(_n(e),t=kn(t),_n(n),wn)try{return On(e,t,n)}catch(e){}if("get"in n||"set"in n)throw En("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Mn=dn,Tn=X,Ln=G?function(e,t,n){return Mn.f(e,t,Tn(1,n))}:function(e,t,n){return e[t]=n,e},Dn=E,In=T,Rn=N,Un=F,Nn=B.f,Fn=sn,Bn=he,Gn=pn,Vn=Ln,zn=lt,Wn=function(e){var t=function(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return In(e,this,arguments)};return t.prototype=e.prototype,t},qn=function(e,t){var n,r,i,o,a,c,s,u,l=e.target,f=e.global,p=e.stat,d=e.proto,v=f?Dn:p?Dn[l]:(Dn[l]||{}).prototype,h=f?Bn:Bn[l]||Vn(Bn,l,{})[l],y=h.prototype;for(i in t)n=!Fn(f?i:l+(p?".":"#")+i,e.forced)&&v&&zn(v,i),a=h[i],n&&(c=e.noTargetGet?(u=Nn(v,i))&&u.value:v[i]),o=n&&c?c:t[i],n&&typeof a==typeof o||(s=e.bind&&n?Gn(o,Dn):e.wrap&&n?Wn(o):d&&Un(o)?Rn(o):o,(e.sham||o&&o.sham||a&&a.sham)&&Vn(s,"sham",!0),Vn(h,i,s),d&&(zn(Bn,r=l+"Prototype")||Vn(Bn,r,{}),Vn(Bn[r],i,o),e.real&&y&&!y[i]&&Vn(y,i,o)))},Hn=te,Qn=Array.isArray||function(e){return"Array"==Hn(e)},Kn=Math.ceil,Yn=Math.floor,Jn=function(e){var t=+e;return t!=t||0===t?0:(t>0?Yn:Kn)(t)},Xn=Jn,$n=Math.min,Zn=function(e){return e>0?$n(Xn(e),9007199254740991):0},er=Zn,tr=function(e){return er(e.length)},nr=Ut,rr=dn,ir=X,or=function(e,t,n){var r=nr(t);r in e?rr.f(e,r,ir(0,n)):e[r]=n},ar={};ar[Ot("toStringTag")]="z";var cr="[object z]"===String(ar),sr=E,ur=cr,lr=F,fr=te,pr=Ot("toStringTag"),dr=sr.Object,vr="Arguments"==fr(function(){return arguments}()),hr=ur?fr:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=dr(e),pr))?n:vr?fr(t):"Object"==(r=fr(t))&&lr(t.callee)?"Arguments":r},yr=F,mr=rt,gr=N(Function.toString);yr(mr.inspectSource)||(mr.inspectSource=function(e){return gr(e)});var br=mr.inspectSource,xr=N,wr=O,Sr=F,_r=hr,kr=br,Er=function(){},Or=[],Ar=xe("Reflect","construct"),jr=/^\s*(?:class|function)\b/,Cr=xr(jr.exec),Pr=!jr.exec(Er),Mr=function(e){if(!Sr(e))return!1;try{return Ar(Er,Or,e),!0}catch(e){return!1}},Tr=function(e){if(!Sr(e))return!1;switch(_r(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Pr||!!Cr(jr,kr(e))}catch(e){return!0}};Tr.sham=!0;var Lr=!Ar||wr((function(){var e;return Mr(Mr.call)||!Mr(Object)||!Mr((function(){e=!0}))||e}))?Tr:Mr,Dr=E,Ir=Qn,Rr=Lr,Ur=ve,Nr=Ot("species"),Fr=Dr.Array,Br=function(e){var t;return Ir(e)&&(t=e.constructor,(Rr(t)&&(t===Fr||Ir(t.prototype))||Ur(t)&&null===(t=t[Nr]))&&(t=void 0)),void 0===t?Fr:t},Gr=function(e,t){return new(Br(e))(0===t?0:t)},Vr=O,zr=Ce,Wr=Ot("species"),qr=function(e){return zr>=51||!Vr((function(){var t=[];return(t.constructor={})[Wr]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Hr=qn,Qr=E,Kr=O,Yr=Qn,Jr=ve,Xr=ct,$r=tr,Zr=or,ei=Gr,ti=qr,ni=Ce,ri=Ot("isConcatSpreadable"),ii=9007199254740991,oi="Maximum allowed index exceeded",ai=Qr.TypeError,ci=ni>=51||!Kr((function(){var e=[];return e[ri]=!1,e.concat()[0]!==e})),si=ti("concat"),ui=function(e){if(!Jr(e))return!1;var t=e[ri];return void 0!==t?!!t:Yr(e)};Hr({target:"Array",proto:!0,forced:!ci||!si},{concat:function(e){var t,n,r,i,o,a=Xr(this),c=ei(a,0),s=0;for(t=-1,r=arguments.length;t<r;t++)if(ui(o=-1===t?a:arguments[t])){if(s+(i=$r(o))>ii)throw ai(oi);for(n=0;n<i;n++,s++)n in o&&Zr(c,s,o[n])}else{if(s>=ii)throw ai(oi);Zr(c,s++,o)}return c.length=s,c}});var li=hr,fi=E.String,pi=function(e){if("Symbol"===li(e))throw TypeError("Cannot convert a Symbol value to a string");return fi(e)},di={},vi=Jn,hi=Math.max,yi=Math.min,mi=function(e,t){var n=vi(e);return n<0?hi(n+t,0):yi(n,t)},gi=pe,bi=mi,xi=tr,wi=function(e){return function(t,n,r){var i,o=gi(t),a=xi(o),c=bi(r,a);if(e&&n!=n){for(;a>c;)if((i=o[c++])!=i)return!0}else for(;a>c;c++)if((e||c in o)&&o[c]===n)return e||c||0;return!e&&-1}},Si={includes:wi(!0),indexOf:wi(!1)},_i={},ki=lt,Ei=pe,Oi=Si.indexOf,Ai=_i,ji=N([].push),Ci=function(e,t){var n,r=Ei(e),i=0,o=[];for(n in r)!ki(Ai,n)&&ki(r,n)&&ji(o,n);for(;t.length>i;)ki(r,n=t[i++])&&(~Oi(o,n)||ji(o,n));return o},Pi=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Mi=Ci,Ti=Pi,Li=Object.keys||function(e){return Mi(e,Ti)},Di=G,Ii=vn,Ri=dn,Ui=bn,Ni=pe,Fi=Li;di.f=Di&&!Ii?Object.defineProperties:function(e,t){Ui(e);for(var n,r=Ni(t),i=Fi(t),o=i.length,a=0;o>a;)Ri.f(e,n=i[a++],r[n]);return e};var Bi,Gi=xe("document","documentElement"),Vi=$e.exports,zi=ht,Wi=Vi("keys"),qi=function(e){return Wi[e]||(Wi[e]=zi(e))},Hi=bn,Qi=di,Ki=Pi,Yi=_i,Ji=Gi,Xi=Gt,$i=qi("IE_PROTO"),Zi=function(){},eo=function(e){return"<script>"+e+"</"+"script>"},to=function(e){e.write(eo("")),e.close();var t=e.parentWindow.Object;return e=null,t},no=function(){try{Bi=new ActiveXObject("htmlfile")}catch(e){}var e,t;no="undefined"!=typeof document?document.domain&&Bi?to(Bi):((t=Xi("iframe")).style.display="none",Ji.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(eo("document.F=Object")),e.close(),e.F):to(Bi);for(var n=Ki.length;n--;)delete no.prototype[Ki[n]];return no()};Yi[$i]=!0;var ro=Object.create||function(e,t){var n;return null!==e?(Zi.prototype=Hi(e),n=new Zi,Zi.prototype=null,n[$i]=e):n=no(),void 0===t?n:Qi.f(n,t)},io={},oo=Ci,ao=Pi.concat("length","prototype");io.f=Object.getOwnPropertyNames||function(e){return oo(e,ao)};var co={},so=mi,uo=tr,lo=or,fo=E.Array,po=Math.max,vo=te,ho=pe,yo=io.f,mo=function(e,t,n){for(var r=uo(e),i=so(t,r),o=so(void 0===n?r:n,r),a=fo(po(o-i,0)),c=0;i<o;i++,c++)lo(a,c,e[i]);return a.length=c,a},go="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];co.f=function(e){return go&&"Window"==vo(e)?function(e){try{return yo(e)}catch(e){return mo(go)}}(e):yo(ho(e))};var bo={};bo.f=Object.getOwnPropertySymbols;var xo=N([].slice),wo=Ln,So=function(e,t,n,r){r&&r.enumerable?e[t]=n:wo(e,t,n)},_o={},ko=Ot;_o.f=ko;var Eo,Oo,Ao,jo=he,Co=lt,Po=_o,Mo=dn.f,To=function(e){var t=jo.Symbol||(jo.Symbol={});Co(t,e)||Mo(t,e,{value:Po.f(e)})},Lo=hr,Do=cr?{}.toString:function(){return"[object "+Lo(this)+"]"},Io=cr,Ro=dn.f,Uo=Ln,No=lt,Fo=Do,Bo=Ot("toStringTag"),Go=function(e,t,n,r){if(e){var i=n?e:e.prototype;No(i,Bo)||Ro(i,Bo,{configurable:!0,value:t}),r&&!Io&&Uo(i,"toString",Fo)}},Vo=F,zo=br,Wo=E.WeakMap,qo=Vo(Wo)&&/native code/.test(zo(Wo)),Ho=E,Qo=N,Ko=ve,Yo=Ln,Jo=lt,Xo=rt,$o=qi,Zo=_i,ea="Object already initialized",ta=Ho.TypeError,na=Ho.WeakMap;if(qo||Xo.state){var ra=Xo.state||(Xo.state=new na),ia=Qo(ra.get),oa=Qo(ra.has),aa=Qo(ra.set);Eo=function(e,t){if(oa(ra,e))throw new ta(ea);return t.facade=e,aa(ra,e,t),t},Oo=function(e){return ia(ra,e)||{}},Ao=function(e){return oa(ra,e)}}else{var ca=$o("state");Zo[ca]=!0,Eo=function(e,t){if(Jo(e,ca))throw new ta(ea);return t.facade=e,Yo(e,ca,t),t},Oo=function(e){return Jo(e,ca)?e[ca]:{}},Ao=function(e){return Jo(e,ca)}}var sa={set:Eo,get:Oo,has:Ao,enforce:function(e){return Ao(e)?Oo(e):Eo(e,{})},getterFor:function(e){return function(t){var n;if(!Ko(t)||(n=Oo(t)).type!==e)throw ta("Incompatible receiver, "+e+" required");return n}}},ua=pn,la=ce,fa=ct,pa=tr,da=Gr,va=N([].push),ha=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,c=5==e||o;return function(s,u,l,f){for(var p,d,v=fa(s),h=la(v),y=ua(u,l),m=pa(h),g=0,b=f||da,x=t?b(s,m):n||a?b(s,0):void 0;m>g;g++)if((c||g in h)&&(d=y(p=h[g],g,v),e))if(t)x[g]=d;else if(d)switch(e){case 3:return!0;case 5:return p;case 6:return g;case 2:va(x,p)}else switch(e){case 4:return!1;case 7:va(x,p)}return o?-1:r||i?i:x}},ya={forEach:ha(0),map:ha(1),filter:ha(2),some:ha(3),every:ha(4),find:ha(5),findIndex:ha(6),filterReject:ha(7)},ma=qn,ga=E,ba=xe,xa=T,wa=W,Sa=N,_a=G,ka=Te,Ea=O,Oa=lt,Aa=Qn,ja=F,Ca=ve,Pa=we,Ma=Fe,Ta=bn,La=ct,Da=pe,Ia=Ut,Ra=pi,Ua=X,Na=ro,Fa=Li,Ba=io,Ga=co,Va=bo,za=B,Wa=dn,qa=di,Ha=q,Qa=xo,Ka=So,Ya=$e.exports,Ja=_i,Xa=ht,$a=Ot,Za=_o,ec=To,tc=Go,nc=sa,rc=ya.forEach,ic=qi("hidden"),oc="Symbol",ac=$a("toPrimitive"),cc=nc.set,sc=nc.getterFor(oc),uc=Object.prototype,lc=ga.Symbol,fc=lc&&lc.prototype,pc=ga.TypeError,dc=ga.QObject,vc=ba("JSON","stringify"),hc=za.f,yc=Wa.f,mc=Ga.f,gc=Ha.f,bc=Sa([].push),xc=Ya("symbols"),wc=Ya("op-symbols"),Sc=Ya("string-to-symbol-registry"),_c=Ya("symbol-to-string-registry"),kc=Ya("wks"),Ec=!dc||!dc.prototype||!dc.prototype.findChild,Oc=_a&&Ea((function(){return 7!=Na(yc({},"a",{get:function(){return yc(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=hc(uc,t);r&&delete uc[t],yc(e,t,n),r&&e!==uc&&yc(uc,t,r)}:yc,Ac=function(e,t){var n=xc[e]=Na(fc);return cc(n,{type:oc,tag:e,description:t}),_a||(n.description=t),n},jc=function(e,t,n){e===uc&&jc(wc,t,n),Ta(e);var r=Ia(t);return Ta(n),Oa(xc,r)?(n.enumerable?(Oa(e,ic)&&e[ic][r]&&(e[ic][r]=!1),n=Na(n,{enumerable:Ua(0,!1)})):(Oa(e,ic)||yc(e,ic,Ua(1,{})),e[ic][r]=!0),Oc(e,r,n)):yc(e,r,n)},Cc=function(e,t){Ta(e);var n=Da(t),r=Fa(n).concat(Lc(n));return rc(r,(function(t){_a&&!wa(Pc,n,t)||jc(e,t,n[t])})),e},Pc=function(e){var t=Ia(e),n=wa(gc,this,t);return!(this===uc&&Oa(xc,t)&&!Oa(wc,t))&&(!(n||!Oa(this,t)||!Oa(xc,t)||Oa(this,ic)&&this[ic][t])||n)},Mc=function(e,t){var n=Da(e),r=Ia(t);if(n!==uc||!Oa(xc,r)||Oa(wc,r)){var i=hc(n,r);return!i||!Oa(xc,r)||Oa(n,ic)&&n[ic][r]||(i.enumerable=!0),i}},Tc=function(e){var t=mc(Da(e)),n=[];return rc(t,(function(e){Oa(xc,e)||Oa(Ja,e)||bc(n,e)})),n},Lc=function(e){var t=e===uc,n=mc(t?wc:Da(e)),r=[];return rc(n,(function(e){!Oa(xc,e)||t&&!Oa(uc,e)||bc(r,xc[e])})),r};if(ka||(lc=function(){if(Pa(fc,this))throw pc("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?Ra(arguments[0]):void 0,t=Xa(e),n=function(e){this===uc&&wa(n,wc,e),Oa(this,ic)&&Oa(this[ic],t)&&(this[ic][t]=!1),Oc(this,t,Ua(1,e))};return _a&&Ec&&Oc(uc,t,{configurable:!0,set:n}),Ac(t,e)},Ka(fc=lc.prototype,"toString",(function(){return sc(this).tag})),Ka(lc,"withoutSetter",(function(e){return Ac(Xa(e),e)})),Ha.f=Pc,Wa.f=jc,qa.f=Cc,za.f=Mc,Ba.f=Ga.f=Tc,Va.f=Lc,Za.f=function(e){return Ac($a(e),e)},_a&&yc(fc,"description",{configurable:!0,get:function(){return sc(this).description}})),ma({global:!0,wrap:!0,forced:!ka,sham:!ka},{Symbol:lc}),rc(Fa(kc),(function(e){ec(e)})),ma({target:oc,stat:!0,forced:!ka},{for:function(e){var t=Ra(e);if(Oa(Sc,t))return Sc[t];var n=lc(t);return Sc[t]=n,_c[n]=t,n},keyFor:function(e){if(!Ma(e))throw pc(e+" is not a symbol");if(Oa(_c,e))return _c[e]},useSetter:function(){Ec=!0},useSimple:function(){Ec=!1}}),ma({target:"Object",stat:!0,forced:!ka,sham:!_a},{create:function(e,t){return void 0===t?Na(e):Cc(Na(e),t)},defineProperty:jc,defineProperties:Cc,getOwnPropertyDescriptor:Mc}),ma({target:"Object",stat:!0,forced:!ka},{getOwnPropertyNames:Tc,getOwnPropertySymbols:Lc}),ma({target:"Object",stat:!0,forced:Ea((function(){Va.f(1)}))},{getOwnPropertySymbols:function(e){return Va.f(La(e))}}),vc){var Dc=!ka||Ea((function(){var e=lc();return"[null]"!=vc([e])||"{}"!=vc({a:e})||"{}"!=vc(Object(e))}));ma({target:"JSON",stat:!0,forced:Dc},{stringify:function(e,t,n){var r=Qa(arguments),i=t;if((Ca(t)||void 0!==e)&&!Ma(e))return Aa(t)||(t=function(e,t){if(ja(i)&&(t=wa(i,this,e,t)),!Ma(t))return t}),r[1]=t,xa(vc,null,r)}})}if(!fc[ac]){var Ic=fc.valueOf;Ka(fc,ac,(function(e){return wa(Ic,this)}))}tc(lc,oc),Ja[ic]=!0,To("asyncIterator"),To("hasInstance"),To("isConcatSpreadable"),To("iterator"),To("match"),To("matchAll"),To("replace"),To("search"),To("species"),To("split"),To("toPrimitive"),To("toStringTag"),To("unscopables"),Go(E.JSON,"JSON",!0);var Rc,Uc,Nc,Fc=he.Symbol,Bc={},Gc=G,Vc=lt,zc=Function.prototype,Wc=Gc&&Object.getOwnPropertyDescriptor,qc=Vc(zc,"name"),Hc={EXISTS:qc,PROPER:qc&&"something"===function(){}.name,CONFIGURABLE:qc&&(!Gc||Gc&&Wc(zc,"name").configurable)},Qc=!O((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Kc=E,Yc=lt,Jc=F,Xc=ct,$c=Qc,Zc=qi("IE_PROTO"),es=Kc.Object,ts=es.prototype,ns=$c?es.getPrototypeOf:function(e){var t=Xc(e);if(Yc(t,Zc))return t[Zc];var n=t.constructor;return Jc(n)&&t instanceof n?n.prototype:t instanceof es?ts:null},rs=O,is=F,os=ro,as=ns,cs=So,ss=Ot("iterator"),us=!1;[].keys&&("next"in(Nc=[].keys())?(Uc=as(as(Nc)))!==Object.prototype&&(Rc=Uc):us=!0);var ls=null==Rc||rs((function(){var e={};return Rc[ss].call(e)!==e}));is((Rc=ls?{}:os(Rc))[ss])||cs(Rc,ss,(function(){return this}));var fs={IteratorPrototype:Rc,BUGGY_SAFARI_ITERATORS:us},ps=fs.IteratorPrototype,ds=ro,vs=X,hs=Go,ys=Bc,ms=function(){return this},gs=E,bs=F,xs=gs.String,ws=gs.TypeError,Ss=N,_s=bn,ks=function(e){if("object"==typeof e||bs(e))return e;throw ws("Can't set "+xs(e)+" as a prototype")},Es=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Ss(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return _s(n),ks(r),t?e(n,r):n.__proto__=r,n}}():void 0),Os=qn,As=W,js=function(e,t,n,r){var i=t+" Iterator";return e.prototype=ds(ps,{next:vs(+!r,n)}),hs(e,i,!1,!0),ys[i]=ms,e},Cs=ns,Ps=Go,Ms=So,Ts=Bc,Ls=Hc.PROPER,Ds=fs.BUGGY_SAFARI_ITERATORS,Is=Ot("iterator"),Rs="keys",Us="values",Ns="entries",Fs=function(){return this},Bs=function(e,t,n,r,i,o,a){js(n,t,r);var c,s,u,l=function(e){if(e===i&&h)return h;if(!Ds&&e in d)return d[e];switch(e){case Rs:case Us:case Ns:return function(){return new n(this,e)}}return function(){return new n(this)}},f=t+" Iterator",p=!1,d=e.prototype,v=d[Is]||d["@@iterator"]||i&&d[i],h=!Ds&&v||l(i),y="Array"==t&&d.entries||v;if(y&&(c=Cs(y.call(new e)))!==Object.prototype&&c.next&&(Ps(c,f,!0,!0),Ts[f]=Fs),Ls&&i==Us&&v&&v.name!==Us&&(p=!0,h=function(){return As(v,this)}),i)if(s={values:l(Us),keys:o?h:l(Rs),entries:l(Ns)},a)for(u in s)(Ds||p||!(u in d))&&Ms(d,u,s[u]);else Os({target:t,proto:!0,forced:Ds||p},s);return a&&d[Is]!==h&&Ms(d,Is,h,{name:i}),Ts[t]=h,s},Gs=pe,Vs=Bc,zs=sa;dn.f;var Ws=Bs,qs="Array Iterator",Hs=zs.set,Qs=zs.getterFor(qs);Ws(Array,"Array",(function(e,t){Hs(this,{type:qs,target:Gs(e),index:0,kind:t})}),(function(){var e=Qs(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),Vs.Arguments=Vs.Array;var Ks={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ys=E,Js=hr,Xs=Ln,$s=Bc,Zs=Ot("toStringTag");for(var eu in Ks){var tu=Ys[eu],nu=tu&&tu.prototype;nu&&Js(nu)!==Zs&&Xs(nu,Zs,eu),$s[eu]=$s.Array}var ru=Fc;To("asyncDispose"),To("dispose"),To("matcher"),To("metadata"),To("observable"),To("patternMatch"),To("replaceAll");var iu=ru;!function(e){e.exports=iu}(_);var ou={exports:{}},au=N,cu=Jn,su=pi,uu=ue,lu=au("".charAt),fu=au("".charCodeAt),pu=au("".slice),du=function(e){return function(t,n){var r,i,o=su(uu(t)),a=cu(n),c=o.length;return a<0||a>=c?e?"":void 0:(r=fu(o,a))<55296||r>56319||a+1===c||(i=fu(o,a+1))<56320||i>57343?e?lu(o,a):r:e?pu(o,a,a+2):i-56320+(r-55296<<10)+65536}},vu={codeAt:du(!1),charAt:du(!0)}.charAt,hu=pi,yu=sa,mu=Bs,gu="String Iterator",bu=yu.set,xu=yu.getterFor(gu);mu(String,"String",(function(e){bu(this,{type:gu,string:hu(e),index:0})}),(function(){var e,t=xu(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=vu(n,r),t.index+=e.length,{value:e,done:!1})}));var wu=_o.f("iterator");!function(e){e.exports=wu}(ou),function(e){var t=_.exports,n=ou.exports;function r(i){return e.exports=r="function"==typeof t&&"symbol"==typeof n?function(e){return typeof e}:function(e){return e&&"function"==typeof t&&e.constructor===t&&e!==t.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(i)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(S);var Su={exports:{}},_u={exports:{}},ku=qn,Eu=G,Ou=dn.f;ku({target:"Object",stat:!0,forced:Object.defineProperty!==Ou,sham:!Eu},{defineProperty:Ou});var Au=he.Object,ju=_u.exports=function(e,t,n){return Au.defineProperty(e,t,n)};Au.defineProperty.sham&&(ju.sham=!0);var Cu=_u.exports;!function(e){e.exports=Cu}(Su);var Pu={exports:{}};qn({target:"Object",stat:!0,sham:!G},{create:ro});var Mu=he.Object,Tu=function(e,t){return Mu.create(e,t)};!function(e){e.exports=Tu}(Pu);var Lu={exports:{}},Du=ct,Iu=ns,Ru=Qc;qn({target:"Object",stat:!0,forced:O((function(){Iu(1)})),sham:!Ru},{getPrototypeOf:function(e){return Iu(Du(e))}});var Uu=he.Object.getPrototypeOf;!function(e){e.exports=Uu}(Lu);var Nu={exports:{}},Fu=O,Bu=function(e,t){var n=[][e];return!!n&&Fu((function(){n.call(null,t||function(){throw 1},1)}))},Gu=ya.forEach,Vu=Bu("forEach")?[].forEach:function(e){return Gu(this,e,arguments.length>1?arguments[1]:void 0)};qn({target:"Array",proto:!0,forced:[].forEach!=Vu},{forEach:Vu});var zu=he,Wu=function(e){return zu[e+"Prototype"]},qu=Wu("Array").forEach,Hu=hr,Qu=lt,Ku=we,Yu=qu,Ju=Array.prototype,Xu={DOMTokenList:!0,NodeList:!0},$u=function(e){var t=e.forEach;return e===Ju||Ku(Ju,e)&&t===Ju.forEach||Qu(Xu,Hu(e))?Yu:t},Zu=$u;!function(e){e.exports=Zu}(Nu);var el={exports:{}};qn({target:"Object",stat:!0},{setPrototypeOf:Es});var tl=he.Object.setPrototypeOf;!function(e){e.exports=tl}(el);var nl={exports:{}},rl=xe,il=io,ol=bo,al=bn,cl=N([].concat),sl=rl("Reflect","ownKeys")||function(e){var t=il.f(al(e)),n=ol.f;return n?cl(t,n(e)):t},ul=lt,ll=sl,fl=B,pl=dn,dl=N("".replace),vl=String(Error("zxcasd").stack),hl=/\n\s*at [^:]*:[^\n]*/,yl=hl.test(vl),ml=ve,gl=Ln,bl=Bc,xl=Ot("iterator"),wl=Array.prototype,Sl=function(e){return void 0!==e&&(bl.Array===e||wl[xl]===e)},_l=hr,kl=Qe,El=Bc,Ol=Ot("iterator"),Al=function(e){if(null!=e)return kl(e,Ol)||kl(e,"@@iterator")||El[_l(e)]},jl=W,Cl=qe,Pl=bn,Ml=Ge,Tl=Al,Ll=E.TypeError,Dl=function(e,t){var n=arguments.length<2?Tl(e):t;if(Cl(n))return Pl(jl(n,e));throw Ll(Ml(e)+" is not iterable")},Il=W,Rl=bn,Ul=Qe,Nl=function(e,t,n){var r,i;Rl(e);try{if(!(r=Ul(e,"return"))){if("throw"===t)throw n;return n}r=Il(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return Rl(r),n},Fl=pn,Bl=W,Gl=bn,Vl=Ge,zl=Sl,Wl=tr,ql=we,Hl=Dl,Ql=Al,Kl=Nl,Yl=E.TypeError,Jl=function(e,t){this.stopped=e,this.result=t},Xl=Jl.prototype,$l=function(e,t,n){var r,i,o,a,c,s,u,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=Fl(t,l),h=function(e){return r&&Kl(r,"normal",e),new Jl(!0,e)},y=function(e){return f?(Gl(e),d?v(e[0],e[1],h):v(e[0],e[1])):d?v(e,h):v(e)};if(p)r=e;else{if(!(i=Ql(e)))throw Yl(Vl(e)+" is not iterable");if(zl(i)){for(o=0,a=Wl(e);a>o;o++)if((c=y(e[o]))&&ql(Xl,c))return c;return new Jl(!1)}r=Hl(e,i)}for(s=r.next;!(u=Bl(s,r)).done;){try{c=y(u.value)}catch(e){Kl(r,"throw",e)}if("object"==typeof c&&c&&ql(Xl,c))return c}return new Jl(!1)},Zl=pi,ef=X,tf=!O((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",ef(1,7)),7!==e.stack)})),nf=qn,rf=E,of=we,af=ns,cf=Es,sf=function(e,t,n){for(var r=ll(t),i=pl.f,o=fl.f,a=0;a<r.length;a++){var c=r[a];ul(e,c)||n&&ul(n,c)||i(e,c,o(t,c))}},uf=ro,lf=Ln,ff=X,pf=function(e,t){if(yl&&"string"==typeof e)for(;t--;)e=dl(e,hl,"");return e},df=function(e,t){ml(t)&&"cause"in t&&gl(e,"cause",t.cause)},vf=$l,hf=function(e,t){return void 0===e?arguments.length<2?"":t:Zl(e)},yf=tf,mf=Ot("toStringTag"),gf=rf.Error,bf=[].push,xf=function(e,t){var n,r=arguments.length>2?arguments[2]:void 0,i=of(wf,this);cf?n=cf(new gf,i?af(this):wf):(n=i?this:uf(wf),lf(n,mf,"Error")),void 0!==t&&lf(n,"message",hf(t)),yf&&lf(n,"stack",pf(n.stack,1)),df(n,r);var o=[];return vf(e,bf,{that:o}),lf(n,"errors",o),n};cf?cf(xf,gf):sf(xf,gf,{name:!0});var wf=xf.prototype=uf(gf.prototype,{constructor:ff(1,xf),message:ff(1,""),name:ff(1,"AggregateError")});nf({global:!0},{AggregateError:xf});var Sf=E.Promise,_f=So,kf=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:_f(e,r,t[r],n);return e},Ef=xe,Of=dn,Af=G,jf=Ot("species"),Cf=function(e){var t=Ef(e),n=Of.f;Af&&t&&!t[jf]&&n(t,jf,{configurable:!0,get:function(){return this}})},Pf=we,Mf=E.TypeError,Tf=function(e,t){if(Pf(t,e))return e;throw Mf("Incorrect invocation")},Lf=Ot("iterator"),Df=!1;try{var If=0,Rf={next:function(){return{done:!!If++}},return:function(){Df=!0}};Rf[Lf]=function(){return this},Array.from(Rf,(function(){throw 2}))}catch(e){}var Uf,Nf,Ff,Bf,Gf=function(e,t){if(!t&&!Df)return!1;var n=!1;try{var r={};r[Lf]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Vf=Lr,zf=Ge,Wf=E.TypeError,qf=bn,Hf=function(e){if(Vf(e))return e;throw Wf(zf(e)+" is not a constructor")},Qf=Ot("species"),Kf=function(e,t){var n,r=qf(e).constructor;return void 0===r||null==(n=qf(r)[Qf])?t:Hf(n)},Yf=E.TypeError,Jf=function(e,t){if(e<t)throw Yf("Not enough arguments");return e},Xf=/(?:ipad|iphone|ipod).*applewebkit/i.test(Se),$f="process"==te(E.process),Zf=E,ep=T,tp=pn,np=F,rp=lt,ip=O,op=Gi,ap=xo,cp=Gt,sp=Jf,up=Xf,lp=$f,fp=Zf.setImmediate,pp=Zf.clearImmediate,dp=Zf.process,vp=Zf.Dispatch,hp=Zf.Function,yp=Zf.MessageChannel,mp=Zf.String,gp=0,bp={},xp="onreadystatechange";try{Uf=Zf.location}catch(e){}var wp=function(e){if(rp(bp,e)){var t=bp[e];delete bp[e],t()}},Sp=function(e){return function(){wp(e)}},_p=function(e){wp(e.data)},kp=function(e){Zf.postMessage(mp(e),Uf.protocol+"//"+Uf.host)};fp&&pp||(fp=function(e){sp(arguments.length,1);var t=np(e)?e:hp(e),n=ap(arguments,1);return bp[++gp]=function(){ep(t,void 0,n)},Nf(gp),gp},pp=function(e){delete bp[e]},lp?Nf=function(e){dp.nextTick(Sp(e))}:vp&&vp.now?Nf=function(e){vp.now(Sp(e))}:yp&&!up?(Bf=(Ff=new yp).port2,Ff.port1.onmessage=_p,Nf=tp(Bf.postMessage,Bf)):Zf.addEventListener&&np(Zf.postMessage)&&!Zf.importScripts&&Uf&&"file:"!==Uf.protocol&&!ip(kp)?(Nf=kp,Zf.addEventListener("message",_p,!1)):Nf=xp in cp("script")?function(e){op.appendChild(cp("script")).onreadystatechange=function(){op.removeChild(this),wp(e)}}:function(e){setTimeout(Sp(e),0)});var Ep,Op,Ap,jp,Cp,Pp,Mp,Tp,Lp={set:fp,clear:pp},Dp=E,Ip=/ipad|iphone|ipod/i.test(Se)&&void 0!==Dp.Pebble,Rp=/web0s(?!.*chrome)/i.test(Se),Up=E,Np=pn,Fp=B.f,Bp=Lp.set,Gp=Xf,Vp=Ip,zp=Rp,Wp=$f,qp=Up.MutationObserver||Up.WebKitMutationObserver,Hp=Up.document,Qp=Up.process,Kp=Up.Promise,Yp=Fp(Up,"queueMicrotask"),Jp=Yp&&Yp.value;Jp||(Ep=function(){var e,t;for(Wp&&(e=Qp.domain)&&e.exit();Op;){t=Op.fn,Op=Op.next;try{t()}catch(e){throw Op?jp():Ap=void 0,e}}Ap=void 0,e&&e.enter()},Gp||Wp||zp||!qp||!Hp?!Vp&&Kp&&Kp.resolve?((Mp=Kp.resolve(void 0)).constructor=Kp,Tp=Np(Mp.then,Mp),jp=function(){Tp(Ep)}):Wp?jp=function(){Qp.nextTick(Ep)}:(Bp=Np(Bp,Up),jp=function(){Bp(Ep)}):(Cp=!0,Pp=Hp.createTextNode(""),new qp(Ep).observe(Pp,{characterData:!0}),jp=function(){Pp.data=Cp=!Cp}));var Xp=Jp||function(e){var t={fn:e,next:void 0};Ap&&(Ap.next=t),Op||(Op=t,jp()),Ap=t},$p={},Zp=qe,ed=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Zp(t),this.reject=Zp(n)};$p.f=function(e){return new ed(e)};var td=bn,nd=ve,rd=$p,id=function(e,t){if(td(e),nd(t)&&t.constructor===e)return t;var n=rd.f(e);return(0,n.resolve)(t),n.promise},od=E,ad=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},cd=function(){this.head=null,this.tail=null};cd.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var sd,ud,ld,fd="object"==typeof window,pd=qn,dd=E,vd=xe,hd=W,yd=Sf,md=kf,gd=Go,bd=Cf,xd=qe,wd=F,Sd=ve,_d=Tf,kd=br,Ed=$l,Od=Gf,Ad=Kf,jd=Lp.set,Cd=Xp,Pd=id,Md=function(e,t){var n=od.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},Td=$p,Ld=ad,Dd=cd,Id=sa,Rd=sn,Ud=fd,Nd=$f,Fd=Ce,Bd=Ot("species"),Gd="Promise",Vd=Id.getterFor(Gd),zd=Id.set,Wd=Id.getterFor(Gd),qd=yd&&yd.prototype,Hd=yd,Qd=qd,Kd=dd.TypeError,Yd=dd.document,Jd=dd.process,Xd=Td.f,$d=Xd,Zd=!!(Yd&&Yd.createEvent&&dd.dispatchEvent),ev=wd(dd.PromiseRejectionEvent),tv="unhandledrejection",nv=Rd(Gd,(function(){var e=kd(Hd),t=e!==String(Hd);if(!t&&66===Fd)return!0;if(!Qd.finally)return!0;if(Fd>=51&&/native code/.test(e))return!1;var n=new Hd((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[Bd]=r,!(n.then((function(){}))instanceof r)||!t&&Ud&&!ev})),rv=nv||!Od((function(e){Hd.all(e).catch((function(){}))})),iv=function(e){var t;return!(!Sd(e)||!wd(t=e.then))&&t},ov=function(e,t){var n,r,i,o=t.value,a=1==t.state,c=a?e.ok:e.fail,s=e.resolve,u=e.reject,l=e.domain;try{c?(a||(2===t.rejection&&lv(t),t.rejection=1),!0===c?n=o:(l&&l.enter(),n=c(o),l&&(l.exit(),i=!0)),n===e.promise?u(Kd("Promise-chain cycle")):(r=iv(n))?hd(r,n,s,u):s(n)):u(o)}catch(e){l&&!i&&l.exit(),u(e)}},av=function(e,t){e.notified||(e.notified=!0,Cd((function(){for(var n,r=e.reactions;n=r.get();)ov(n,e);e.notified=!1,t&&!e.rejection&&sv(e)})))},cv=function(e,t,n){var r,i;Zd?((r=Yd.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),dd.dispatchEvent(r)):r={promise:t,reason:n},!ev&&(i=dd["on"+e])?i(r):e===tv&&Md("Unhandled promise rejection",n)},sv=function(e){hd(jd,dd,(function(){var t,n=e.facade,r=e.value;if(uv(e)&&(t=Ld((function(){Nd?Jd.emit("unhandledRejection",r,n):cv(tv,n,r)})),e.rejection=Nd||uv(e)?2:1,t.error))throw t.value}))},uv=function(e){return 1!==e.rejection&&!e.parent},lv=function(e){hd(jd,dd,(function(){var t=e.facade;Nd?Jd.emit("rejectionHandled",t):cv("rejectionhandled",t,e.value)}))},fv=function(e,t,n){return function(r){e(t,r,n)}},pv=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,av(e,!0))},dv=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Kd("Promise can't be resolved itself");var r=iv(t);r?Cd((function(){var n={done:!1};try{hd(r,t,fv(dv,n,e),fv(pv,n,e))}catch(t){pv(n,t,e)}})):(e.value=t,e.state=1,av(e,!1))}catch(t){pv({done:!1},t,e)}}};nv&&(Qd=(Hd=function(e){_d(this,Qd),xd(e),hd(sd,this);var t=Vd(this);try{e(fv(dv,t),fv(pv,t))}catch(e){pv(t,e)}}).prototype,(sd=function(e){zd(this,{type:Gd,done:!1,notified:!1,parent:!1,reactions:new Dd,rejection:!1,state:0,value:void 0})}).prototype=md(Qd,{then:function(e,t){var n=Wd(this),r=Xd(Ad(this,Hd));return n.parent=!0,r.ok=!wd(e)||e,r.fail=wd(t)&&t,r.domain=Nd?Jd.domain:void 0,0==n.state?n.reactions.add(r):Cd((function(){ov(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),ud=function(){var e=new sd,t=Vd(e);this.promise=e,this.resolve=fv(dv,t),this.reject=fv(pv,t)},Td.f=Xd=function(e){return e===Hd||e===ld?new ud(e):$d(e)}),pd({global:!0,wrap:!0,forced:nv},{Promise:Hd}),gd(Hd,Gd,!1,!0),bd(Gd),ld=vd(Gd),pd({target:Gd,stat:!0,forced:nv},{reject:function(e){var t=Xd(this);return hd(t.reject,void 0,e),t.promise}}),pd({target:Gd,stat:!0,forced:true},{resolve:function(e){return Pd(this===ld?Hd:this,e)}}),pd({target:Gd,stat:!0,forced:rv},{all:function(e){var t=this,n=Xd(t),r=n.resolve,i=n.reject,o=Ld((function(){var n=xd(t.resolve),o=[],a=0,c=1;Ed(e,(function(e){var s=a++,u=!1;c++,hd(n,t,e).then((function(e){u||(u=!0,o[s]=e,--c||r(o))}),i)})),--c||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=Xd(t),r=n.reject,i=Ld((function(){var i=xd(t.resolve);Ed(e,(function(e){hd(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var vv=W,hv=qe,yv=$p,mv=ad,gv=$l;qn({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=yv.f(t),r=n.resolve,i=n.reject,o=mv((function(){var n=hv(t.resolve),i=[],o=0,a=1;gv(e,(function(e){var c=o++,s=!1;a++,vv(n,t,e).then((function(e){s||(s=!0,i[c]={status:"fulfilled",value:e},--a||r(i))}),(function(e){s||(s=!0,i[c]={status:"rejected",reason:e},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var bv=qe,xv=xe,wv=W,Sv=$p,_v=ad,kv=$l,Ev="No one promise resolved";qn({target:"Promise",stat:!0},{any:function(e){var t=this,n=xv("AggregateError"),r=Sv.f(t),i=r.resolve,o=r.reject,a=_v((function(){var r=bv(t.resolve),a=[],c=0,s=1,u=!1;kv(e,(function(e){var l=c++,f=!1;s++,wv(r,t,e).then((function(e){f||u||(u=!0,i(e))}),(function(e){f||u||(f=!0,a[l]=e,--s||o(new n(a,Ev)))}))})),--s||o(new n(a,Ev))}));return a.error&&o(a.value),r.promise}});var Ov=Sf,Av=xe,jv=F,Cv=Kf,Pv=id;qn({target:"Promise",proto:!0,real:!0,forced:!!Ov&&O((function(){Ov.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Cv(this,Av("Promise")),n=jv(e);return this.then(n?function(n){return Pv(t,e()).then((function(){return n}))}:e,n?function(n){return Pv(t,e()).then((function(){throw n}))}:e)}});var Mv=he.Promise,Tv=Mv,Lv=$p,Dv=ad;qn({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=Lv.f(this),n=Dv(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var Iv=Tv;!function(e){e.exports=Iv}(nl);var Rv={exports:{}},Uv=qn,Nv=Qn,Fv=N([].reverse),Bv=[1,2];Uv({target:"Array",proto:!0,forced:String(Bv)===String(Bv.reverse())},{reverse:function(){return Nv(this)&&(this.length=this.length),Fv(this)}});var Gv=Wu("Array").reverse,Vv=we,zv=Gv,Wv=Array.prototype,qv=function(e){var t=e.reverse;return e===Wv||Vv(Wv,e)&&t===Wv.reverse?zv:t};!function(e){e.exports=qv}(Rv);var Hv={exports:{}},Qv=qn,Kv=E,Yv=Qn,Jv=Lr,Xv=ve,$v=mi,Zv=tr,eh=pe,th=or,nh=Ot,rh=xo,ih=qr("slice"),oh=nh("species"),ah=Kv.Array,ch=Math.max;Qv({target:"Array",proto:!0,forced:!ih},{slice:function(e,t){var n,r,i,o=eh(this),a=Zv(o),c=$v(e,a),s=$v(void 0===t?a:t,a);if(Yv(o)&&(n=o.constructor,(Jv(n)&&(n===ah||Yv(n.prototype))||Xv(n)&&null===(n=n[oh]))&&(n=void 0),n===ah||void 0===n))return rh(o,c,s);for(r=new(void 0===n?ah:n)(ch(s-c,0)),i=0;c<s;c++,i++)c in o&&th(r,i,o[c]);return r.length=i,r}});var sh=Wu("Array").slice,uh=we,lh=sh,fh=Array.prototype,ph=function(e){var t=e.slice;return e===fh||uh(fh,e)&&t===fh.slice?lh:t},dh=ph;!function(e){e.exports=dh}(Hv),function(e){var t=S.exports.default,n=_.exports,r=Su.exports,i=Pu.exports,o=Lu.exports,a=Nu.exports,c=el.exports,s=nl.exports,u=Rv.exports,l=Hv.exports;function f(){e.exports=f=function(){return p},e.exports.__esModule=!0,e.exports.default=e.exports;var p={},d=Object.prototype,v=d.hasOwnProperty,h="function"==typeof n?n:{},y=h.iterator||"@@iterator",m=h.asyncIterator||"@@asyncIterator",g=h.toStringTag||"@@toStringTag";function b(e,t,n){return r(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{b({},"")}catch(e){b=function(e,t,n){return e[t]=n}}function x(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=i(o.prototype),c=new D(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var c=M(a,n);if(c){if(c===S)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=w(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===S)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,c),a}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}p.wrap=x;var S={};function _(){}function k(){}function E(){}var O={};b(O,y,(function(){return this}));var A=o&&o(o(I([])));A&&A!==d&&v.call(A,y)&&(O=A);var j=E.prototype=_.prototype=i(O);function C(e){var t;a(t=["next","throw","return"]).call(t,(function(t){b(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,n){function r(i,o,a,c){var s=w(e[i],e,o);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==t(l)&&v.call(l,"__await")?n.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):n.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,c)}))}c(s.arg)}var i;this._invoke=function(e,t){function o(){return new n((function(n,i){r(e,t,n,i)}))}return i=i?i.then(o,o):o()}}function M(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,M(e,t),"throw"===t.method))return S;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var r=w(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,S;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,S):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,S)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],a(e).call(e,T,this),this.reset(!0)}function I(e){if(e){var t=e[y];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(v.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:R}}function R(){return{value:void 0,done:!0}}return k.prototype=E,b(j,"constructor",E),b(E,"constructor",k),k.displayName=b(E,g,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(e){return c?c(e,E):(e.__proto__=E,b(e,g,"GeneratorFunction")),e.prototype=i(j),e},p.awrap=function(e){return{__await:e}},C(P.prototype),b(P.prototype,m,(function(){return this})),p.AsyncIterator=P,p.async=function(e,t,n,r,i){void 0===i&&(i=s);var o=new P(x(e,t,n,r),i);return p.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(j),b(j,g,"Generator"),b(j,y,(function(){return this})),b(j,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var n in e)t.push(n);return u(t).call(t),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},p.values=I,D.prototype={constructor:D,reset:function(e){var t;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,a(t=this.tryEntries).call(t,L),!e)for(var n in this)"t"===n.charAt(0)&&v.call(this,n)&&!isNaN(+l(n).call(n,1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),c=v.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&v.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,S):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),S},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),S}},p}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports}(w);var vh=w.exports(),hh=vh;try{regeneratorRuntime=vh}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=vh:Function("r","regeneratorRuntime = r")(vh)}var yh={exports:{}},mh=Wu("Array").concat,gh=we,bh=mh,xh=Array.prototype,wh=function(e){var t=e.concat;return e===xh||gh(xh,e)&&t===xh.concat?bh:t};!function(e){e.exports=wh}(yh);var Sh=x(yh.exports),_h={exports:{}},kh=N,Eh=qe,Oh=ve,Ah=lt,jh=xo,Ch=A,Ph=E.Function,Mh=kh([].concat),Th=kh([].join),Lh={},Dh=function(e,t,n){if(!Ah(Lh,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";Lh[t]=Ph("C,a","return new C("+Th(r,",")+")")}return Lh[t](e,n)},Ih=Ch?Ph.bind:function(e){var t=Eh(this),n=t.prototype,r=jh(arguments,1),i=function(){var n=Mh(r,jh(arguments));return this instanceof i?Dh(t,n.length,n):t.apply(e,n)};return Oh(n)&&(i.prototype=n),i},Rh=Ih;qn({target:"Function",proto:!0,forced:Function.bind!==Rh},{bind:Rh});var Uh=Wu("Function").bind,Nh=we,Fh=Uh,Bh=Function.prototype,Gh=function(e){var t=e.bind;return e===Bh||Nh(Bh,e)&&t===Bh.bind?Fh:t};!function(e){e.exports=Gh}(_h);var Vh=x(_h.exports),zh={exports:{}};!function(e){e.exports=$u}(zh);var Wh=x(zh.exports),qh={exports:{}},Hh=ya.map;qn({target:"Array",proto:!0,forced:!qr("map")},{map:function(e){return Hh(this,e,arguments.length>1?arguments[1]:void 0)}});var Qh=Wu("Array").map,Kh=we,Yh=Qh,Jh=Array.prototype,Xh=function(e){var t=e.map;return e===Jh||Kh(Jh,e)&&t===Jh.map?Yh:t};!function(e){e.exports=Xh}(qh);var $h=x(qh.exports),Zh={exports:{}},ey=Si.includes;qn({target:"Array",proto:!0},{includes:function(e){return ey(this,e,arguments.length>1?arguments[1]:void 0)}});var ty=Wu("Array").includes,ny=ve,ry=te,iy=Ot("match"),oy=function(e){var t;return ny(e)&&(void 0!==(t=e[iy])?!!t:"RegExp"==ry(e))},ay=E.TypeError,cy=Ot("match"),sy=qn,uy=function(e){if(oy(e))throw ay("The method doesn't accept regular expressions");return e},ly=ue,fy=pi,py=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[cy]=!1,"/./"[e](t)}catch(e){}}return!1},dy=N("".indexOf);sy({target:"String",proto:!0,forced:!py("includes")},{includes:function(e){return!!~dy(fy(ly(this)),fy(uy(e)),arguments.length>1?arguments[1]:void 0)}});var vy=Wu("String").includes,hy=we,yy=ty,my=vy,gy=Array.prototype,by=String.prototype,xy=function(e){var t=e.includes;return e===gy||hy(gy,e)&&t===gy.includes?yy:"string"==typeof e||e===by||hy(by,e)&&t===by.includes?my:t};!function(e){e.exports=xy}(Zh);var wy=x(Zh.exports),Sy={exports:{}},_y=qn,ky=ya.findIndex,Ey="findIndex",Oy=!0;Ey in[]&&Array(1).findIndex((function(){Oy=!1})),_y({target:"Array",proto:!0,forced:Oy},{findIndex:function(e){return ky(this,e,arguments.length>1?arguments[1]:void 0)}});var Ay=Wu("Array").findIndex,jy=we,Cy=Ay,Py=Array.prototype,My=function(e){var t=e.findIndex;return e===Py||jy(Py,e)&&t===Py.findIndex?Cy:t};!function(e){e.exports=My}(Sy);var Ty=x(Sy.exports),Ly={exports:{}},Dy=qn,Iy=ya.find,Ry="find",Uy=!0;Ry in[]&&Array(1).find((function(){Uy=!1})),Dy({target:"Array",proto:!0,forced:Uy},{find:function(e){return Iy(this,e,arguments.length>1?arguments[1]:void 0)}});var Ny=Wu("Array").find,Fy=we,By=Ny,Gy=Array.prototype,Vy=function(e){var t=e.find;return e===Gy||Fy(Gy,e)&&t===Gy.find?By:t};!function(e){e.exports=Vy}(Ly);var zy=x(Ly.exports),Wy={exports:{}},qy=qn,Hy=E,Qy=mi,Ky=Jn,Yy=tr,Jy=ct,Xy=Gr,$y=or,Zy=qr("splice"),em=Hy.TypeError,tm=Math.max,nm=Math.min,rm=9007199254740991,im="Maximum allowed length exceeded";qy({target:"Array",proto:!0,forced:!Zy},{splice:function(e,t){var n,r,i,o,a,c,s=Jy(this),u=Yy(s),l=Qy(e,u),f=arguments.length;if(0===f?n=r=0:1===f?(n=0,r=u-l):(n=f-2,r=nm(tm(Ky(t),0),u-l)),u+n-r>rm)throw em(im);for(i=Xy(s,r),o=0;o<r;o++)(a=l+o)in s&&$y(i,o,s[a]);if(i.length=r,n<r){for(o=l;o<u-r;o++)c=o+n,(a=o+r)in s?s[c]=s[a]:delete s[c];for(o=u;o>u-r+n;o--)delete s[o-1]}else if(n>r)for(o=u-r;o>l;o--)c=o+n-1,(a=o+r-1)in s?s[c]=s[a]:delete s[c];for(o=0;o<n;o++)s[o+l]=arguments[o+2];return s.length=u-r+n,i}});var om=Wu("Array").splice,am=we,cm=om,sm=Array.prototype,um=function(e){var t=e.splice;return e===sm||am(sm,e)&&t===sm.splice?cm:t};!function(e){e.exports=um}(Wy);var lm=x(Wy.exports),fm={exports:{}},pm=qn,dm=Si.indexOf,vm=Bu,hm=N([].indexOf),ym=!!hm&&1/hm([1],1,-0)<0,mm=vm("indexOf");pm({target:"Array",proto:!0,forced:ym||!mm},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return ym?hm(this,e,t)||0:dm(this,e,t)}});var gm=Wu("Array").indexOf,bm=we,xm=gm,wm=Array.prototype,Sm=function(e){var t=e.indexOf;return e===wm||bm(wm,e)&&t===wm.indexOf?xm:t};!function(e){e.exports=Sm}(fm);var _m=x(fm.exports),km={exports:{}},Em=ya.filter;qn({target:"Array",proto:!0,forced:!qr("filter")},{filter:function(e){return Em(this,e,arguments.length>1?arguments[1]:void 0)}});var Om=Wu("Array").filter,Am=we,jm=Om,Cm=Array.prototype,Pm=function(e){var t=e.filter;return e===Cm||Am(Cm,e)&&t===Cm.filter?jm:t};!function(e){e.exports=Pm}(km);var Mm=x(km.exports),Tm={exports:{}},Lm=Qn,Dm=tr,Im=pn,Rm=E.TypeError,Um=function(e,t,n,r,i,o,a,c){for(var s,u,l=i,f=0,p=!!a&&Im(a,c);f<r;){if(f in n){if(s=p?p(n[f],f,t):n[f],o>0&&Lm(s))u=Dm(s),l=Um(e,t,s,u,l,o-1)-1;else{if(l>=9007199254740991)throw Rm("Exceed the acceptable array length");e[l]=s}l++}f++}return l},Nm=Um,Fm=qe,Bm=ct,Gm=tr,Vm=Gr;qn({target:"Array",proto:!0},{flatMap:function(e){var t,n=Bm(this),r=Gm(n);return Fm(e),(t=Vm(n,0)).length=Nm(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}});var zm=Wu("Array").flatMap,Wm=we,qm=zm,Hm=Array.prototype,Qm=function(e){var t=e.flatMap;return e===Hm||Wm(Hm,e)&&t===Hm.flatMap?qm:t};!function(e){e.exports=Qm}(Tm);var Km=x(Tm.exports),Ym={exports:{}},Jm=qn,Xm=E,$m=T,Zm=F,eg=xo,tg=Jf,ng=/MSIE .\./.test(Se),rg=Xm.Function,ig=function(e){return function(t,n){var r=tg(arguments.length,1)>2,i=Zm(t)?t:rg(t),o=r?eg(arguments,2):void 0;return e(r?function(){$m(i,this,o)}:i,n)}};Jm({global:!0,bind:!0,forced:ng},{setTimeout:ig(Xm.setTimeout),setInterval:ig(Xm.setInterval)});var og=he.setTimeout;!function(e){e.exports=og}(Ym);var ag=x(Ym.exports),cg={exports:{}},sg=bn,ug=Nl,lg=pn,fg=W,pg=ct,dg=function(e,t,n,r){try{return r?t(sg(n)[0],n[1]):t(n)}catch(t){ug(e,"throw",t)}},vg=Sl,hg=Lr,yg=tr,mg=or,gg=Dl,bg=Al,xg=E.Array,wg=function(e){var t=pg(e),n=hg(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=lg(i,r>2?arguments[2]:void 0));var a,c,s,u,l,f,p=bg(t),d=0;if(!p||this==xg&&vg(p))for(a=yg(t),c=n?new this(a):xg(a);a>d;d++)f=o?i(t[d],d):t[d],mg(c,d,f);else for(l=(u=gg(t,p)).next,c=n?new this:[];!(s=fg(l,u)).done;d++)f=o?dg(u,i,[s.value,d],!0):s.value,mg(c,d,f);return c.length=d,c};qn({target:"Array",stat:!0,forced:!Gf((function(e){Array.from(e)}))},{from:wg});var Sg=he.Array.from;!function(e){e.exports=Sg}(cg);var _g=x(cg.exports),kg={exports:{}},Eg=G,Og=N,Ag=Li,jg=pe,Cg=Og(q.f),Pg=Og([].push),Mg=function(e){return function(t){for(var n,r=jg(t),i=Ag(r),o=i.length,a=0,c=[];o>a;)n=i[a++],Eg&&!Cg(r,n)||Pg(c,e?[n,r[n]]:r[n]);return c}},Tg={entries:Mg(!0),values:Mg(!1)}.values;qn({target:"Object",stat:!0},{values:function(e){return Tg(e)}});var Lg=he.Object.values;!function(e){e.exports=Lg}(kg);var Dg=x(kg.exports),Ig={exports:{}};qn({target:"Array",stat:!0},{isArray:Qn});var Rg=he.Array.isArray;!function(e){e.exports=Rg}(Ig);var Ug=x(Ig.exports),Ng={exports:{}};!function(e){e.exports=ph}(Ng);var Fg=x(Ng.exports),Bg={exports:{}};!function(e){e.exports=Mv}(Bg);var Gg=x(Bg.exports),Vg={exports:{}},zg=he.setInterval;!function(e){e.exports=zg}(Vg);var Wg=x(Vg.exports),qg=new Uint8Array([88,0,0,0]),Hg=new Uint8Array([26,165,74,6,73,7,72,8,71,9,70,10,69,11,68,12,67,13,66,14,65]),Qg=new Uint8Array([24,255,1,0,0,0,0,0,0,0,0,0,0,0,0]),Kg=new Uint8Array([25,255,0,255,255,255,255]),Yg=new Uint8Array([27,255,0,0,0,0,0,0,0,0,0]),Jg={HEADER:qg,INIT:Hg,DISCONNECT:new Uint8Array([84]),START_MEASUREMENTS:Qg,STOP_MEASUREMENTS:Kg,SET_MEASUREMENT_PERIOD:Yg,GET_INFO:new Uint8Array([85]),GET_STATUS:new Uint8Array([16]),GET_SENSOR_IDS:new Uint8Array([81]),GET_SENSOR_INFO:new Uint8Array([80,0]),GET_DEFAULT_SENSORS_MASK:new Uint8Array([86])},Xg=6,$g=7,Zg=10,eb=8,tb=9,nb=11,rb=12,ib=13,ob=14,ab=32,cb={exports:{}},sb={exports:{}},ub=O((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),lb=O,fb=ve,pb=te,db=ub,vb=Object.isExtensible,hb=lb((function(){vb(1)}))||db?function(e){return!!fb(e)&&((!db||"ArrayBuffer"!=pb(e))&&(!vb||vb(e)))}:vb,yb=!O((function(){return Object.isExtensible(Object.preventExtensions({}))})),mb=qn,gb=N,bb=_i,xb=ve,wb=lt,Sb=dn.f,_b=io,kb=co,Eb=hb,Ob=yb,Ab=!1,jb=ht("meta"),Cb=0,Pb=function(e){Sb(e,jb,{value:{objectID:"O"+Cb++,weakData:{}}})},Mb=sb.exports={enable:function(){Mb.enable=function(){},Ab=!0;var e=_b.f,t=gb([].splice),n={};n[jb]=1,e(n).length&&(_b.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===jb){t(r,i,1);break}return r},mb({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:kb.f}))},fastKey:function(e,t){if(!xb(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!wb(e,jb)){if(!Eb(e))return"F";if(!t)return"E";Pb(e)}return e[jb].objectID},getWeakData:function(e,t){if(!wb(e,jb)){if(!Eb(e))return!0;if(!t)return!1;Pb(e)}return e[jb].weakData},onFreeze:function(e){return Ob&&Ab&&Eb(e)&&!wb(e,jb)&&Pb(e),e}};bb[jb]=!0;var Tb=qn,Lb=E,Db=sb.exports,Ib=O,Rb=Ln,Ub=$l,Nb=Tf,Fb=F,Bb=ve,Gb=Go,Vb=dn.f,zb=ya.forEach,Wb=G,qb=sa.set,Hb=sa.getterFor,Qb=dn.f,Kb=ro,Yb=kf,Jb=pn,Xb=Tf,$b=$l,Zb=Bs,ex=Cf,tx=G,nx=sb.exports.fastKey,rx=sa.set,ix=sa.getterFor,ox={getConstructor:function(e,t,n,r){var i=e((function(e,i){Xb(e,o),rx(e,{type:t,index:Kb(null),first:void 0,last:void 0,size:0}),tx||(e.size=0),null!=i&&$b(i,e[r],{that:e,AS_ENTRIES:n})})),o=i.prototype,a=ix(t),c=function(e,t,n){var r,i,o=a(e),c=s(e,t);return c?c.value=n:(o.last=c={index:i=nx(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=c),r&&(r.next=c),tx?o.size++:e.size++,"F"!==i&&(o.index[i]=c)),e},s=function(e,t){var n,r=a(e),i=nx(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Yb(o,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,tx?e.size=0:this.size=0},delete:function(e){var t=this,n=a(t),r=s(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),tx?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=a(this),r=Jb(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),Yb(o,n?{get:function(e){var t=s(this,e);return t&&t.value},set:function(e,t){return c(this,0===e?0:e,t)}}:{add:function(e){return c(this,e=0===e?0:e,e)}}),tx&&Qb(o,"size",{get:function(){return a(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=ix(t),o=ix(r);Zb(e,t,(function(e,t){rx(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),ex(t)}},ax=function(e,t,n){var r,i=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),a=i?"set":"add",c=Lb[e],s=c&&c.prototype,u={};if(Wb&&Fb(c)&&(o||s.forEach&&!Ib((function(){(new c).entries().next()})))){var l=(r=t((function(t,n){qb(Nb(t,l),{type:e,collection:new c}),null!=n&&Ub(n,t[a],{that:t,AS_ENTRIES:i})}))).prototype,f=Hb(e);zb(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(e){var t="add"==e||"set"==e;!(e in s)||o&&"clear"==e||Rb(l,e,(function(n,r){var i=f(this).collection;if(!t&&o&&!Bb(n))return"get"==e&&void 0;var a=i[e](0===n?0:n,r);return t?this:a}))})),o||Vb(l,"size",{configurable:!0,get:function(){return f(this).collection.size}})}else r=n.getConstructor(t,e,i,a),Db.enable();return Gb(r,e,!1,!0),u[e]=r,Tb({global:!0,forced:!0},u),o||n.setStrong(r,e,i),r};ax("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),ox);var cx=he.Map;!function(e){e.exports=cx}(cb);var sx=x(cb.exports),ux={exports:{}},lx=qe,fx=ct,px=ce,dx=tr,vx=E.TypeError,hx=function(e){return function(t,n,r,i){lx(n);var o=fx(t),a=px(o),c=dx(o),s=e?c-1:0,u=e?-1:1;if(r<2)for(;;){if(s in a){i=a[s],s+=u;break}if(s+=u,e?s<0:c<=s)throw vx("Reduce of empty array with no initial value")}for(;e?s>=0:c>s;s+=u)s in a&&(i=n(i,a[s],s,o));return i}},yx={left:hx(!1),right:hx(!0)}.left,mx=Ce,gx=$f;qn({target:"Array",proto:!0,forced:!Bu("reduce")||!gx&&mx>79&&mx<83},{reduce:function(e){var t=arguments.length;return yx(this,e,t,t>1?arguments[1]:void 0)}});var bx=Wu("Array").reduce,xx=we,wx=bx,Sx=Array.prototype,_x=function(e){var t=e.reduce;return e===Sx||xx(Sx,e)&&t===Sx.reduce?wx:t};!function(e){e.exports=_x}(ux);var kx=x(ux.exports),Ex={exports:{}},Ox=Jn,Ax=pi,jx=ue,Cx=E.RangeError,Px=N,Mx=Zn,Tx=pi,Lx=ue,Dx=Px((function(e){var t=Ax(jx(this)),n="",r=Ox(e);if(r<0||r==1/0)throw Cx("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n})),Ix=Px("".slice),Rx=Math.ceil,Ux=function(e){return function(t,n,r){var i,o,a=Tx(Lx(t)),c=Mx(n),s=a.length,u=void 0===r?" ":Tx(r);return c<=s||""==u?a:((o=Dx(u,Rx((i=c-s)/u.length))).length>i&&(o=Ix(o,0,i)),e?a+o:o+a)}},Nx={start:Ux(!1),end:Ux(!0)},Fx=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(Se),Bx=Nx.start;qn({target:"String",proto:!0,forced:Fx},{padStart:function(e){return Bx(this,e,arguments.length>1?arguments[1]:void 0)}});var Gx=Wu("String").padStart,Vx=we,zx=Gx,Wx=String.prototype,qx=function(e){var t=e.padStart;return"string"==typeof e||e===Wx||Vx(Wx,e)&&t===Wx.padStart?zx:t};!function(e){e.exports=qx}(Ex);var Hx=x(Ex.exports),Qx=function(e){return 0!==e},Kx=function(){function e(){i(this,e),this._listenerMap=new sx}return a(e,[{key:"on",value:function(e,t){this._listenerMap.has(e)||this._listenerMap.set(e,[]),this._listenerMap.get(e).push(t)}},{key:"off",value:function(e,t){var n=this._listenerMap.get(e);if(n&&n.length){var r=kx(n).call(n,(function(e,n,r){return"function"==typeof n&&n===t?e=r:e}),-1);if(r>-1)return lm(n).call(n,r,1),this._listenerMap.set(e,n),!0}return!1}},{key:"unbind",value:function(){this._listenerMap.clear()}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this._listenerMap.get(e);return!(!i||!i.length)&&(Wh(i).call(i,(function(e){e.apply(void 0,n)})),!0)}}]),e}(),Yx=function(){},Jx=function(){};function Xx(e){var t;return $h(t=_g(new Uint8Array(e))).call(t,(function(e){var t;return Hx(t=e.toString(16)).call(t,2,"0")})).join(" ")}var $x={exports:{}},Zx=Wu("Array").values,ew=hr,tw=lt,nw=we,rw=Zx,iw=Array.prototype,ow={DOMTokenList:!0,NodeList:!0},aw=function(e){var t=e.values;return e===iw||nw(iw,e)&&t===iw.values||tw(ow,ew(e))?rw:t};!function(e){e.exports=aw}($x);var cw,sw=x($x.exports),uw=a((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.type=t.type,this.mode=t.mode,this.minValue=t.minValue,this.maxValue=t.maxValue,this.uncertainty=t.uncertainty,this.minPeriod=t.minPeriod,this.maxPeriod=t.maxPeriod,this.typicalPeriod=t.typicalPeriod,this.granularity=t.granularity})),lw=a((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.number=t.number,this.name=t.name,this.unit=t.unit,this.id=t.id,this.mutalExclusionMask=t.mutalExclusionMask,this.measurementInfo=t.measurementInfo})),fw=function(e){s(n,e);var t=y(n);function n(e){var r;return i(this,n),(r=t.call(this)).number=e.number,r.name=e.name,r.unit=e.unit,r.specs=e,r.enabled=!1,r.values=[],r.value=null,r}return a(n,[{key:"clear",value:function(){this.value=null,this.values=[]}},{key:"setValue",value:function(e,t){this.value=e,t&&sw(this).push(this.value),this.emit("value-changed",this)}},{key:"setEnabled",value:function(e){this.enabled!==e&&(this.enabled=e,this.emit("state-changed",this))}}]),n}(Kx),pw=function(e){s(g,e);var t,n,o,c,u,l,f,p,d,v,h,m=y(g);function g(e){var t;if(i(this,g),t=m.call(this),"undefined"==typeof TextDecoder){var n=require("text-encoding");cw=n.TextDecoder}else cw=TextDecoder;return t.device=e,t.sensors=[],t.opened=!1,t.rollingCounter=0,t.collecting=!1,t.measurementPeriod=10,t.response=null,t.remainingResponseLength=0,t.defaultSensorsMask=0,t.keepValues=!0,t.minMeasurementPeriod=10,t.serialNumber="",t.orderCode="",t.name="",t}return a(g,[{key:"getBatteryLevel",value:(h=r(hh.mark((function e(){var t;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getStatus();case 2:return t=e.sent,e.abrupt("return",t.battery);case 4:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"getChargingState",value:(v=r(hh.mark((function e(){var t;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getStatus();case 2:return t=e.sent,e.abrupt("return",t.chargingStatus);case 4:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"open",value:(d=r(hh.mark((function e(){var t,n=arguments;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],!this.opened){e.next=3;break}throw new Error("Device cannot be opened because it is already open");case 3:return e.next=5,this._connect();case 5:return e.next=7,this._init();case 7:return e.next=9,this._getStatus();case 9:return e.next=11,this._getDeviceInfo();case 11:return e.next=13,this._getDefaultSensorsMask();case 13:return e.next=15,this._getAvailableSensors();case 15:this._onOpened(),t&&this.start();case 17:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"close",value:(p=r(hh.mark((function e(){return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.opened){e.next=2;break}throw new Error("Device cannot be closed because it is not open");case 2:return e.next=4,this._stopMeasurements();case 4:return e.next=6,this._sendCommand(Jg.DISCONNECT);case 6:return e.abrupt("return",this._disconnect());case 7:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"enableDefaultSensors",value:function(){for(var e=1,t=0;t<32;++t){if((this.defaultSensorsMask&e)===e){var n=this.getSensor(t);n&&n.setEnabled(!0)}e<<=1}}},{key:"start",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=Mm(e=this.sensors).call(e,(function(e){return e.enabled}));0===r.length&&(this.enableDefaultSensors(),r=Mm(t=this.sensors).call(t,(function(e){return e.enabled})));Wh(r).call(r,(function(e){return e.clear()})),n&&(this.measurementPeriod=n),this._startMeasurements()}},{key:"stop",value:function(){this._stopMeasurements()}},{key:"getSensor",value:function(e){var t;return zy(t=this.sensors).call(t,(function(t){return t.number===e}))}},{key:"_connect",value:(f=r(hh.mark((function e(){var t=this;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.device.setup({onClosed:function(){return t._onClosed()},onResponse:function(e){return t._handleResponse(e)}}).then((function(){t.writeQueue=[],t.deviceWriteInterval=Wg((function(){if(t.writeQueue&&t.writeQueue.length>0){var e=t.writeQueue[0];e.written||(t._writeToDevice(e.buffer),e.written=!0)}}),10)})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"_disconnect",value:(l=r(hh.mark((function e(){return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(this.deviceWriteInterval),e.abrupt("return",this.device.close());case 2:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"_init",value:function(){return this.collecting=!1,this.rollingCounter=255,this._sendCommand(Jg.INIT)}},{key:"_handleResponse",value:function(e){var t,n,r,i;if(Yx("command notified: ".concat(Xx(e.buffer))),this.remainingResponseLegnth>0){if(this.remainingResponseLegnth-=e.buffer.byteLength,this.response=new DataView((n=this.response.buffer,r=Fg(t=e.buffer).call(t,0),(i=new Uint8Array(n.byteLength+r.byteLength)).set(new Uint8Array(n),0),i.set(new Uint8Array(r),n.byteLength),i.buffer)),this.remainingResponseLegnth>0)return}else this.response=e;var o=this.response.getUint8(1);if(o>this.response.buffer.byteLength)this.remainingResponseLegnth=o-this.response.buffer.byteLength;else if(Yx("handle command: ".concat(Xx(this.response.buffer))),this.response.getUint8(0)===ab)this._processMeasurements(this.response);else{var a=this.response.getUint8(4),c=this.response.getUint8(5),s=new DataView(this.response.buffer,6);this._resolveWriteCommand(a,c,s),this.remainingResponseLegnth=0,this.response=null}}},{key:"_getSensorsWithMask",value:function(e){for(var t=[],n=1,r=0;r<32;++r){if((e&n)===n){var i,o=this.getSensor(r);if(o)t.push(o),Yx(Sh(i="available: [".concat(e,"] ")).call(i,t[t.length-1].number))}n<<=1}return t}},{key:"_processMeasurements",value:function(e){var t=[],n=!0,r=0,i=0,o=e.getUint8(4);switch(o){case Xg:t=this._getSensorsWithMask(e.getUint16(5,!0)),r=e.getUint8(7,!0),i=9;break;case $g:t=this._getSensorsWithMask(e.getUint32(5,!0)),r=e.getUint8(9,!0),i=11;break;case Zg:case eb:t[0]=this.getSensor(e.getUint8(6)),r=e.getUint8(7,!0),i=8;break;case nb:case tb:t[0]=this.getSensor(e.getUint8(6)),r=e.getUint8(7,!0),i=8,n=!1;break;case rb:case ib:case ob:Yx("Purposely Ignoring packet type: ".concat(o));break;default:Yx("Unknown packet type: ".concat(o))}for(var a=0;a<r;++a)for(var c=0;c<t.length;++c)n?t[c].setValue(e.getFloat32(i,!0),this.keepValues):t[c].setValue(e.getInt32(i,!0),this.keepValues),i+=4}},{key:"_resolveWriteCommand",value:function(e,t,n){var r,i,o=zy(r=this.writeQueue).call(r,(function(n){return n.command===e&&n.rollingCounter===t}));o&&(o.resolve(n),this.writeQueue=Mm(i=this.writeQueue).call(i,(function(e){return e!==o})))}},{key:"_onOpened",value:function(){Yx("opened"),this.opened=!0,this.emit("device-opened")}},{key:"_onClosed",value:function(){Yx("closed"),this.opened=!1,this.emit("device-closed")}},{key:"_decRollingCounter",value:function(){return this.rollingCounter-=1,this.rollingCounter}},{key:"_calculateChecksum",value:function(e){for(var t=e[1],n=-1*e[3],r=0;r<t;++r)n+=e[r],n&=255;return n<0||n>255?(Yx("Checksum failed!"),0):n}},{key:"_sendCommand",value:function(e){var t=new Uint8Array(Jg.HEADER.byteLength+e.byteLength);return t.set(new Uint8Array(Jg.HEADER),0),t.set(new Uint8Array(e),Jg.HEADER.byteLength),t[1]=t.length,t[2]=this._decRollingCounter(),t[3]=this._calculateChecksum(t),this._queueWriteCommand(t)}},{key:"_writeToDevice",value:(u=r(hh.mark((function e(t){var n,r,i;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,i=t.length;case 2:if(!(i>0)){e.next=14;break}return e.prev=3,i>this.device.maxPacketLength?(n=t.subarray(r,r+this.device.maxPacketLength),i-=this.device.maxPacketLength,r+=this.device.maxPacketLength):(n=t.subarray(r,r+i),i=0),e.next=7,this.device.writeCommand(n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Yx("Write Failure: ".concat(e.t0));case 12:e.next=2;break;case 14:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e){return u.apply(this,arguments)})},{key:"_queueWriteCommand",value:function(e){var t=this;return Yx("command queued: ".concat(Xx(e))),new Gg((function(n,r){t.writeQueue.push({command:e[4],rollingCounter:e[2],buffer:e,written:!1,resolve:n,reject:r}),ag((function(){var n,i;t.writeQueue=Mm(n=t.writeQueue).call(n,(function(t){return t.command===e[4]&&t.rollingCounter!==e[2]})),r(new Error(Sh(i="write command timed out after 5s. Command: ".concat(e[4].toString(16)," Rolling Counter: ")).call(i,e[2].toString(16))))}),5e3)}))}},{key:"_getStatus",value:(c=r(hh.mark((function e(){var t,n,r,i;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._sendCommand(Jg.GET_STATUS);case 2:return r=e.sent,i={mainFirmwareVersion:Sh(t="".concat(r.getUint8(2),".")).call(t,r.getUint8(3)),bleFirmwareVersion:Sh(n="".concat(r.getUint8(6),".")).call(n,r.getUint8(9)),battery:r.getUint8(10),chargingStatus:"".concat(r.getUint8(11))},e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"_getAvailableSensors",value:(o=r(hh.mark((function e(){var t,n,r=this;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._sendCommand(Jg.GET_SENSOR_IDS).then((function(e){r.availableSensors=e.getUint32(0,!0),Yx("Get Available Sensors Returned ".concat(r.availableSensors))}));case 2:t=1,n=0;case 4:if(!(n<31)){e.next=12;break}if((this.availableSensors&t)!==t){e.next=8;break}return e.next=8,this._getSensorInfo(n);case 8:t<<=1;case 9:++n,e.next=4;break;case 12:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"_getDefaultSensorsMask",value:function(){var e=this;return this._sendCommand(Jg.GET_DEFAULT_SENSORS_MASK).then((function(t){e.defaultSensorsMask=t.getUint32(0,!0),Yx("Default Sensors:"),Jx(e)}))}},{key:"_getDeviceInfo",value:function(){var e=this;return this._sendCommand(Jg.GET_INFO).then((function(t){var n,r,i,o=new cw("utf-8");e.orderCode=o.decode(Mm(n=new Uint8Array(t.buffer,6,16)).call(n,Qx)),e.serialNumber=o.decode(Mm(r=new Uint8Array(t.buffer,22,16)).call(r,Qx)),e.name=o.decode(Mm(i=new Uint8Array(t.buffer,38,32)).call(i,Qx)),Yx("Device Info:"),Jx(e)}))}},{key:"_getSensorInfo",value:(n=r(hh.mark((function e(t){var n,r=this;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Uint8Array(Jg.GET_SENSOR_INFO))[1]=t,e.abrupt("return",this._sendCommand(n).then((function(e){var t=e.getUint32(2,!0);if(t>0){var n,i,o=new cw("utf-8"),a=new uw({type:e.getUint8(6),mode:e.getUint8(7),minValue:e.getFloat64(108,!0),maxValue:e.getFloat64(116,!0),uncertainty:e.getFloat64(100,!0),minPeriod:e.getUint32(124,!0)/1e3,maxPeriod:((e.getUint32(132,!0)<<32)+e.getUint32(128,!0))/1e3,typicalPeriod:e.getUint32(136,!0)/1e3,granularity:e.getUint32(140,!0)/1e3}),c=new lw({number:e.getUint8(0),name:o.decode(Mm(n=new Uint8Array(e.buffer,14,60)).call(n,Qx)),unit:o.decode(Mm(i=new Uint8Array(e.buffer,74,32)).call(i,Qx)),mutalExclusionMask:e.getUint32(144,!0),measurementInfo:a,sensorId:t}),s=new fw(c);Yx("Get Sensor Info Returned"),Jx(s),r.sensors.push(s),s.on("state-changed",(function(){var e;Yx("Sensor Restart: ".concat(s.number)),s.enabled&&(r.measurementPeriod=s.specs.measurementInfo.typicalPeriod,Wh(e=r.sensors).call(e,(function(e){if(s.number!==e.number&&e.enabled){var t=1<<e.number;(t&s.specs.mutalExclusionMask)===t?e.enabled=!1:e.specs.measurementInfo.typicalPeriod>r.measurementPeriod&&(r.measurementPeriod=e.specs.measurementInfo.typicalPeriod)}}))),r._restartMeasurements()}))}})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_restartMeasurements",value:(t=r(hh.mark((function e(){var t;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.collecting,!this.collecting){e.next=10;break}return e.prev=2,e.next=5,this._stopMeasurements();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:if(this.collecting||!t){e.next=19;break}return e.prev=11,e.next=14,this._startMeasurements();case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.error(e.t1);case 19:case"end":return e.stop()}}),e,this,[[2,7],[11,16]])}))),function(){return t.apply(this,arguments)})},{key:"_setMeasurementPeriod",value:function(e){var t=new Uint8Array(Jg.SET_MEASUREMENT_PERIOD),n=1e3*this.minMeasurementPeriod;return e<n&&(e=n),Yx("MeasurementPeriod: ".concat(e)),t[3]=e>>0&255,t[4]=e>>8&255,t[5]=e>>16&255,t[6]=e>>24&255,this._sendCommand(t)}},{key:"_getEnabledChannelMask",value:function(){var e,t=0,n=Mm(e=this.sensors).call(e,(function(e){return e.enabled}));return Wh(n).call(n,(function(e){t+=1<<e.number})),t}},{key:"_startMeasurements",value:function(){var e=this;return this._setMeasurementPeriod(1e3*this.measurementPeriod).then((function(){var t=e._getEnabledChannelMask();Yx("ChannelMask: ".concat(t));var n=new Uint8Array(Jg.START_MEASUREMENTS);return n[3]=t>>0&255,n[4]=t>>8&255,n[5]=t>>16&255,n[6]=t>>24&255,e._sendCommand(n).then((function(t){0===t.getUint8(0)&&(e.collecting=!0,e.emit("measurements-started"))}))}))}},{key:"_stopMeasurements",value:function(){var e=this;return this._sendCommand(Jg.STOP_MEASUREMENTS).then((function(t){0===t.getUint8(0)&&(e.collecting=!1,e.emit("measurements-stopped"))}))}}]),g}(Kx),dw=function(){function e(t){i(this,e),this.webBluetoothNativeDevice=t,this.maxPacketLength=20,this.deviceCommand=null,this.deviceResponse=null}var t,n,o;return a(e,[{key:"godirectAdapter",get:function(){return!0}},{key:"writeCommand",value:(o=r(hh.mark((function e(t){return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deviceCommand.writeValue(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"setup",value:(n=r(hh.mark((function e(t){var n,r,i,o,a,c=this;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.onClosed,r=t.onResponse,this.webBluetoothNativeDevice.addEventListener("gattserverdisconnected",n),e.prev=2,e.next=5,this.webBluetoothNativeDevice.gatt.connect();case 5:return i=e.sent,e.next=8,i.getPrimaryService("d91714ef-28b9-4f91-ba16-f0d9a604f112");case 8:return o=e.sent,e.next=11,o.getCharacteristics();case 11:a=e.sent,Wh(a).call(a,(function(e){switch(e.uuid){case"f4bf14a6-c7d5-4b6d-8aa8-df1a7c83adcb":c.deviceCommand=e;break;case"b41e6675-a329-40e0-aa01-44d2f444babe":c.deviceResponse=e,c.deviceResponse.addEventListener("characteristicvaluechanged",(function(e){var t=e.target.value;r(t)})),c.deviceResponse.startNotifications();break;default:Yx("No case found for ".concat(e.uuid))}})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.error(e.t0);case 18:if(this.deviceCommand&&this.deviceResponse){e.next=20;break}throw new Error("Expected command and response characteristics not found");case 20:case"end":return e.stop()}}),e,this,[[2,15]])}))),function(e){return n.apply(this,arguments)})},{key:"close",value:(t=r(hh.mark((function e(){return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.webBluetoothNativeDevice.gatt.disconnect());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),vw=function(){function e(t){i(this,e),this.webUsbNativeDevice=t,this.onResponse=null,this.onClosed=null,this.reportId=0,this.maxPacketLength=63}var t,n,o;return a(e,[{key:"godirectAdapter",get:function(){return!0}},{key:"writeCommand",value:(o=r(hh.mark((function e(t){var n,r;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Uint8Array(Sh(n=[t.byteLength]).call(n,m(t))),e.abrupt("return",this.webUsbNativeDevice.sendReport(this.reportId,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"setup",value:(n=r(hh.mark((function e(t){var n,r,i=this;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.onClosed,r=t.onResponse,e.next=3,this.webUsbNativeDevice.open();case 3:this.onResponse=r,this.onClosed=n,this.reportId=this.webUsbNativeDevice.collections[0].outputReports[0].reportId,this.webUsbNativeDevice.oninputreport=function(e){var t,n=new DataView(Fg(t=e.data.buffer).call(t,1));i.onResponse(n)};case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"close",value:(t=r(hh.mark((function e(){return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.webUsbNativeDevice.close(),this.onClosed();case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),hw={createDevice:function(e){var t=arguments;return r(hh.mark((function n(){var r,i,o,a,c,s,u;return hh.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{},i=r.open,o=void 0===i||i,a=r.startMeasurements,c=void 0===a||a,(s=e).godirectAdapter){n.next=12;break}if(!e.gatt){n.next=7;break}s=new dw(e),n.next=12;break;case 7:if(!e.collections[0].outputReports[0]){n.next=11;break}s=new vw(e),n.next=12;break;case 11:throw new Error("Device Open Failed [ No matching adapter ]");case 12:if(u=new pw(s),!o){n.next=23;break}return n.prev=14,n.next=17,u.open(c);case 17:n.next=23;break;case 19:throw n.prev=19,n.t0=n.catch(14),console.error(n.t0),new Error("Device Open Failed [".concat(n.t0,"]"));case 23:return n.abrupt("return",u);case 24:case"end":return n.stop()}}),n,null,[[14,19]])})))()},selectDevice:function(){var e=arguments;return r(hh.mark((function t(){var n,r;return hh.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!(e.length>0&&void 0!==e[0])||e[0])){t.next=9;break}if(navigator.bluetooth){t.next=4;break}return t.abrupt("return",Gg.reject(new Error("No Web Bluetooth support.")));case 4:return t.next=6,navigator.bluetooth.requestDevice({filters:[{namePrefix:"GDX"}],optionalServices:["d91714ef-28b9-4f91-ba16-f0d9a604f112"]});case 6:n=t.sent,t.next=15;break;case 9:if(navigator.hid){t.next=11;break}return t.abrupt("return",Gg.reject(new Error("No Web HID support.")));case 11:return t.next=13,navigator.hid.requestDevice({filters:[{vendorId:2295,productId:16}]});case 13:r=t.sent,n=r[0];case 15:if(n){t.next=17;break}throw new DOMException("No device selected.");case 17:return t.abrupt("return",hw.createDevice(n));case 18:case"end":return t.stop()}}),t)})))()}},yw=[vec(216/255,38/255,47/255),vec(59/255,139/255,.8),vec(186/255,178/255,30/255),vec(.2,69/255,170/255),vec(226/255,96/255,148/255),vec(91/255,44/255,99/255)];function mw(e){var t;return Sh(t="".concat(e.name," ")).call(t,e.unit?"(".concat(e.unit,")"):"")}var gw=function(e){s(c,e);var n,o=y(c);function c(){var e,t,n;return i(this,c),(n=o.call(this)).started=!1,n.addDevice=Vh(e=n._addDevice).call(e,v(n)),n.end=Vh(t=n._end).call(t,v(n)),n.devices=[],n.declaredDevices=[],n._setupVenierSections(),n}return a(c,[{key:"vp_collect_is_pressed",value:function(){return this.started}},{key:"vp_close_is_pressed",value:function(){return!1}},{key:"started",get:function(){return this._started},set:function(e){var t,n;if(this._started=e,this.actionButton)if(e){if(this.actionButton.textContent="Stop",Wh(n=this.devices).call(n,(function(e){return e.deviceStart()})),this.collectionStartTime=new Date,this._graph){this._graph.xmin=0,this._graph.xmax=5;try{var r,i;Wh(r=this._curves).call(r,(function(e){return e.remove()})),this._curveIndecies=$h(i=this._curves).call(i,(function(){return[0]}))}catch(e){var o;!this._startedFirstTypeErrorCaught&&wy(o=e.message).call(o,"Cannot read properties of undefined (reading 'type')")?this._startedFirstTypeErrorCaught=!0:console.error(e)}}}else this.actionButton.textContent="Collect",Wh(t=this.devices).call(t,(function(e){return e.stopRead()})),delete this.firstRead}},{key:"samplesPerSecond",get:function(){return Math.round(1e3/this.period)},set:function(e){this.period=1/(e/1e3)}},{key:"period",get:function(){return this._period},set:function(e){var t,n=this;this._period=Number(e)||100,this.sampleLabel&&(this.sampleLabel.textContent="".concat(this.samplesPerSecond," samples/second")),Wh(t=this.devices).call(t,(function(e){e&&(e.period=n.period)}))}},{key:"periodS",get:function(){return Number(this.period/1e3)}},{key:"_addDevice",value:(n=r(hh.mark((function e(){var t,n,r,i,o=this;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,hw.selectDevice(this.isBluetoothConnection);case 4:if(t.item=e.sent,t.item){e.next=7;break}throw new Error("Device selection cancelled or failed");case 7:this.addDeviceButton.text="Add another Go Direct Device",t.item.stop(),r=this._createSensorInteraction(t),wy(n=this.devices).call(n,r)||this.devices.push(r),this.channels===this._unsetChannels?r.device.item.sensors[0].setEnabled(!0):Wh(i=r.device.item.sensors).call(i,(function(e){var t,n,i=Ty(t=o.declaredDevices).call(t,(function(e){return e===r.device.item.name}));-1===i&&(i=0),e.setEnabled(null===(n=o.channels[i])||void 0===n?void 0:wy(n).call(n,e.number))})),r.setupSensors(),this.dispatchEvent(new Event("device-connected")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0);case 19:case"end":return e.stop()}}),e,this,[[1,16]])}))),function(){return n.apply(this,arguments)})},{key:"_createSensorInteraction",value:function(e,t){var n,i=this,o=zy(n=this.devices).call(n,(function(t){return t.device.item.name===e.item.name})),a=o||document.createElement("vernier-device");a.toggleAttribute("placeholder",t),e.element=a,a.device=e,a.period=this.period,this._skipDeviceControl||this._deviceSection.append(a),a.addEventListener("disconnected",(function(){var e,t;lm(e=i.devices).call(e,_m(t=i.devices).call(t,a),1),i.devices.length||i._resetState()}));var c=function(){var e=r(hh.mark((function e(){var t,n,r,o;return hh.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.dispatchEvent(new Event("device-sensor-toggled")),i._graph){e.next=3;break}return e.abrupt("return");case 3:o=Mm(t=Km(n=i.devices).call(n,(function(e){return e.device.item.sensors}))).call(t,(function(e){return null==e?void 0:e.enabled})),i._graph.ytitle="['".concat($h(o).call(o,mw).join("', '"),"']"),i._curves=$h(o).call(o,(function(e,t){return gcurve({color:yw[t]})})),i._curveIndecies=$h(r=i._curves).call(r,(function(){return[0]}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.addEventListener("sensor-toggled",c),t||ag((function(){c()})),a}},{key:"_end",value:function(){var e;this.started=!1,Wh(e=m(this.devices)).call(e,(function(e){e.disconnect()}))}},{key:"_resetGraph",value:function(){this._graph&&(this._graph.xtitle="Time",this._graph.ytitle="",this._graph.scroll=!0,this._graph.width=500,this._graph.height=300,this._graph.xmin=0,this._graph.xmax=5,this._graph.fast=!1)}},{key:"_resetState",value:function(){var e,t,n,r=this;this.addDeviceButton.text="Select a Go Direct Device",Wh(e=["actionButton","exitButton","sampleSlider","sampleLabel"]).call(e,(function(e){r[e]&&(r[e].remove(),delete r[e])})),Wh(t=_g(this._metersDivision.children)).call(t,(function(e){return e.remove()})),this._curves&&Wh(n=this._curves).call(n,(function(e){return e.remove()})),this._resetGraph()}},{key:"_setupVenierSections",value:function(){this._vernierAboveCanvasSection=document.createElement("section"),this._vernierAboveCanvasSection.id="vernier-above-section",this._vernierAboveCanvasSection.style.display="flex",this._vernierAboveCanvasSection.style.flexDirection="column",this._vernierAboveCanvasSection.style.whiteSpace="normal",this._vernierBelowCanvasSection=document.createElement("section"),this._vernierBelowCanvasSection.id="vernier-below-section",this._vernierBelowCanvasSection.style.display="flex",this._vernierBelowCanvasSection.style.flexDirection="column",this._vernierBelowCanvasSection.style.whiteSpace="normal",this._interactionSection=document.createElement("section"),this._interactionSection.id="vernier-interaction-section",this._interactionSection.style.display="grid",this._interactionSection.style.gridTemplateColumns="repeat(auto-fit, 200px)",this._interactionSection.style.padding="8px",this._interactionSection.style.gap="8px",this._interactionSection.style.alignItems="center",this._deviceSection=document.createElement("section"),this._deviceSection.id="vernier-device-section",this._deviceSection.style.display="grid",this._deviceSection.style.gridTemplateColumns="repeat(auto-fit, 450px)",document.querySelector(".glowscript").prepend(this._vernierAboveCanvasSection),document.querySelector(".glowscript").after(this._vernierBelowCanvasSection),this._vernierAboveCanvasSection.appendChild(this._interactionSection),this._vernierBelowCanvasSection.appendChild(this._deviceSection)}},{key:"_toggleStarted",value:function(){this.started=!this.started}},{key:"_verifyConnection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ble";if("ble"===e)return!0;if("usb"===e)return!1;throw new Error('connection must be "ble" for bluetooth or "usb" for a wired connection')}},{key:"open",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};("string"==typeof n&&(n={connection:n}),this.isBluetoothConnection=this._verifyConnection(n.connection.toLowerCase()),n.device_to_open)&&(this.declaredDevices=n.device_to_open.split(/, ?/),this.devices=$h(e=this.declaredDevices).call(e,(function(e){return t._createSensorInteraction({item:{name:e}},!0)})))}},{key:"read",value:function(){var e,t,n,r=this;if(!this.devices)return!1;var i=Mm(e=Km(t=this.devices).call(t,(function(e){return Dg(e.chartMeasurements)}))).call(e,(function(e){var t;return!wy(t=[null,void 0]).call(t,e)}));this.dispatchEvent(new CustomEvent("data-read",{detail:{measurements:$h(i).call(i,(function(e){return $h(e).call(e,(function(e,t){return[r.periodS*t,e]}))}))}}));var o=Km(n=this.devices).call(n,(function(e){return e.readMeasurement()}));return this._priorMark&&console.log(performance.measure("measure","priorMark").duration),this._priorMark=performance.mark("priorMark"),o}},{key:"select_sensors",value:function(e){this._unsetChannels=[[0]],Ug(e)&&Ug(e[0])&&(e={channels:e}),Ug(e)&&!Ug(e[0])&&(e={channels:[e]}),"number"==typeof e&&(e={channels:[[e]]}),void 0===e&&(e={channels:this._unsetChannels}),this.channels=e.channels}},{key:"start",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.period="number"==typeof t?t:null!==(e=t.period)&&void 0!==e?e:100,this.addDeviceButton=button({bind:this.addDevice,text:"Select a Go Direct Device",id:"addDevice"})}},{key:"vp_rate",value:function(){return 2e3/this.period}},{key:"vp_get_slider_period",value:function(){return this.period}},{key:"vp_vernier_canvas",value:function(){var e,n,r=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o={buttons:!0,meters:!0,slider:!0,graph:!1,channel_setup:!0};((i=t(t({},o),i)).buttons&&this.addEventListener("device-connected",(function(){var e;r.actionButton||(r.actionButton=document.createElement("button"),r.actionButton.style.color="#00aa00",r.actionButton.style.fontSize="20px",r.actionButton.style.padding="4px 8px",r.actionButton.textContent="Collect",r.actionButton.addEventListener("click",Vh(e=r._toggleStarted).call(e,r)),r.exitButton=document.createElement("button"),r.exitButton.style.color="#aa0000",r.exitButton.style.fontSize="20px",r.exitButton.style.padding="4px 8px",r.exitButton.textContent="Close",r.exitButton.addEventListener("click",r.end),r._interactionSection.append(r.actionButton,r.exitButton))})),i.meters&&(this._metersDivision=document.createElement("div"),this._metersDivision.style.display="grid",this._metersDivision.style.gap="8px",this._metersDivision.style.padding="8px",this._metersDivision.style.gridTemplateColumns="repeat(auto-fit, 25ex)",this.addEventListener("device-connected",(function(){r.addEventListener("device-sensor-toggled",(function(){var e,t,n;null===(e=Wh(t=_g(r._metersDivision.children)))||void 0===e||e.call(t,(function(e){return e.remove()})),Wh(n=r.devices).call(n,(function(e){var t;if(e.device.item.sensors){var n=Mm(t=e.device.item.sensors).call(t,(function(e){return e.enabled}));Wh(n).call(n,(function(e){var t=document.createElement("div");t.style.display="flex",t.style.alignItems="center",t.style.gap="8px";var n=document.createElement("span"),i=document.createElement("span");n.textContent="".concat(mw(e),": "),e.on("value-changed",(function(e){var t=e.value;i.textContent=Math.round(100*t)/100})),t.appendChild(n),t.appendChild(i),r._metersDivision.appendChild(t)}))}}))})),r._vernierAboveCanvasSection.appendChild(r._metersDivision)}))),i.slider&&this.addEventListener("device-connected",(function(){r.sampleSlider||(r.sampleSlider=document.createElement("input"),r.sampleSlider.id="sample-slider",r.sampleSlider.setAttribute("type","range"),r.sampleSlider.value=r.samplesPerSecond,r.sampleSlider.setAttribute("min",1),r.sampleSlider.setAttribute("max",100),r.sampleSlider.setAttribute("step",1),r.sampleSlider.addEventListener("input",(function(e){var t=e.target.value;r.samplesPerSecond=t})),r.sampleLabel=document.createElement("label"),r.sampleLabel.textContent="".concat(r.samplesPerSecond," samples/second"),r.sampleLabel.setAttribute("for","sample-slider"),r._interactionSection.append(r.sampleSlider),r._interactionSection.append(r.sampleLabel))})),i.chart)&&(this._graph=graph({xtitle:"Time",ytitle:"",scroll:!0,width:500,height:300,xmin:0,xmax:5,fast:!1}),this._curves=[gcurve()],this._curves[0].plot(0,0),this._curveIndecies=$h(n=this._curves).call(n,(function(){return[0]})),this.addEventListener("data-read",(function(e){var t,n=e.detail.measurements;Wh(t=r._curves).call(t,(function(e,t){for(;r._curveIndecies[t]+1<n[t].length;){var i=n[t][r._curveIndecies[t]];e.plot.apply(e,m(i)),r._curveIndecies[t]++}}))})));this._skipDeviceControl=!i.channel_setup,this._skipDeviceControl&&this.devices.length&&Wh(e=_g(this._deviceSection.children)).call(e,(function(e){return e.remove()}))}}]),c}(d(EventTarget)),bw=function(e){s(n,e);var t=y(n);function n(){var e;return i(this,n),(e=t.call(this)).attachShadow({mode:"open"}),e.chartMeasurements={},e.readMeasurements={},e}return a(n,[{key:"styles",get:function(){return"\n      <style>\n        fieldset {\n          display:flex;\n          flex-direction:column;\n          white-space:normal;\n          gap:4px;\n        }\n        [hidden] {\n          display:none;\n        }\n        [data-sensor-channel] {\n          display:flex;\n          justify-content: space-between;\n        }\n        [data-sensor-reading] {\n          color: var(--chart-color, 'black')\n        }\n      </style>\n    "}},{key:"period",get:function(){return this._period},set:function(e){var t,n;this._period=Number(e)||100,null===(t=(n=this.device.item).stop)||void 0===t||t.call(n),this.deviceStart()}},{key:"connectedCallback",value:function(){var e=this;this.setAttribute("id",this.device.item.name),this.render(),this.shadowRoot.querySelector("#disconnect").addEventListener("click",(function(){e.disconnect()}))}},{key:"deviceStart",value:function(){var e,t=this;if(this.device.item.sensors){var n=Mm(e=this.device.item.sensors).call(e,(function(e){return e.enabled}));n.length&&(Wh(n).call(n,(function(e){var n,r,i,o;t.chartMeasurements[mw(e)]=null===(n=t.chartMeasurements)||void 0===n||null===(r=n[mw(e)])||void 0===r?void 0:Fg(r).call(r,-1),t.readMeasurements[mw(e)]=null===(i=t.readMeasurements)||void 0===i||null===(o=i[mw(e)])||void 0===o?void 0:Fg(o).call(o,-1)})),this._reading=!0,this.device.item.start(this.period))}}},{key:"stopRead",value:function(){this._reading=!1}},{key:"disconnect",value:function(){this.dispatchEvent(new Event("disconnected"));try{this.device.item.stop(),this.device.item.close()}catch(e){console.error(e)}this.remove()}},{key:"readMeasurement",value:function(){var e;return $h(e=Dg(this.readMeasurements)).call(e,(function(e){var t;return null!==(t=e.shift())&&void 0!==t?t:null}))}},{key:"setupSensors",value:function(){var e,t=this;this.render(),Wh(e=this.device.item.sensors).call(e,(function(e){e.on("value-changed",(function(n){var r,i=n.value;e.enabled&&(t._reading&&(t.chartMeasurements[mw(e)]||(t.chartMeasurements[mw(e)]=[],t.readMeasurements[mw(e)]=[]),t.chartMeasurements[mw(e)].push(i),t.readMeasurements[mw(e)].push(i)),t.shadowRoot.querySelector('[data-sensor-channel="'.concat(mw(e),'"] [data-sensor-reading]')).textContent=Sh(r="".concat(Math.round(100*i)/100," ")).call(r,e.unit))}))}));var n=this.shadowRoot.querySelectorAll("#channels input");Wh(n).call(n,(function(e){e.addEventListener("change",(function(){var n,r=zy(n=t.device.item.sensors).call(n,(function(t){return t.number===Number(e.dataset.number)}));r.setEnabled(e.checked),t.dispatchEvent(new CustomEvent("sensor-toggled",{detail:t.device})),t.device.item.stop(),t.deviceStart(),r.enabled?(t.chartMeasurements[mw(r)]=[],t.readMeasurements[mw(r)]=[]):(delete t.chartMeasurements[mw(r)],delete t.readMeasurements[mw(r)])}))}))}},{key:"render",value:function(){var e,t,n;this.shadowRoot.innerHTML=Sh(e=Sh(t="\n      ".concat(this.styles,"\n      <fieldset id='sensor'>\n        <legend>")).call(t,this.device.item.name,"</legend>\n        <fieldset id='channels'>\n          <legend>Channels</legend>\n          ")).call(e,$h(n=this.device.item.sensors||[]).call(n,(function(e){var t,n,r;return Sh(t=Sh(n=Sh(r='<div data-sensor-channel="'.concat(mw(e),'"><label><input ')).call(r,e.enabled?"checked":""," type='checkbox'\n                data-number=\"")).call(n,e.number,'">')).call(t,mw(e),"</label><span data-sensor-reading></span></div>")})).join(""),"\n        </fieldset>\n        <button id='disconnect'>Disconnect</button>\n      </fieldset>\n    ")}}]),n}(d(HTMLElement));return customElements.define("vernier-device",bw),new gw}));
