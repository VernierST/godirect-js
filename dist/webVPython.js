/**
 * Copyright (c) 2023 Vernier Software. All rights reserved.
 * This code may only be used under the BSD 3-Clause license found at
 * https://raw.githubusercontent.com/VernierST/godirect-js/main/LICENSE
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).gdx=t()}(this,(function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,c,"next",e)}function c(e){n(a,i,o,s,c,"throw",e)}s(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e,t,n){return p=f()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&l(i,n.prototype),i},p.apply(null,arguments)}function h(e){var t="function"==typeof Map?new Map:void 0;return h=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return p(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)},h(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function y(e){var t=f();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function m(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function x(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w={exports:{}},_={exports:{}},S={exports:{}},k=function(e){return e&&e.Math==Math&&e},E=k("object"==typeof globalThis&&globalThis)||k("object"==typeof window&&window)||k("object"==typeof self&&self)||k("object"==typeof b&&b)||function(){return this}()||Function("return this")(),O=function(e){try{return!!e()}catch(e){return!0}},A=!O((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),C=A,j=Function.prototype,T=j.apply,P=j.call,M="object"==typeof Reflect&&Reflect.apply||(C?P.bind(T):function(){return P.apply(T,arguments)}),L=A,D=Function.prototype,I=D.bind,R=D.call,U=L&&I.bind(R,R),N=L?function(e){return e&&U(e)}:function(e){return e&&function(){return R.apply(e,arguments)}},F=function(e){return"function"==typeof e},B={},G=!O((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),V=A,z=Function.prototype.call,W=V?z.bind(z):function(){return z.apply(z,arguments)},q={},H={}.propertyIsEnumerable,Q=Object.getOwnPropertyDescriptor,K=Q&&!H.call({1:2},1);q.f=K?function(e){var t=Q(this,e);return!!t&&t.enumerable}:H;var Y,J,X=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},$=N,Z=$({}.toString),ee=$("".slice),te=function(e){return ee(Z(e),8,-1)},ne=N,re=O,ie=te,oe=E.Object,ae=ne("".split),se=re((function(){return!oe("z").propertyIsEnumerable(0)}))?function(e){return"String"==ie(e)?ae(e,""):oe(e)}:oe,ce=E.TypeError,ue=function(e){if(null==e)throw ce("Can't call method on "+e);return e},le=se,fe=ue,pe=function(e){return le(fe(e))},he=F,ve=function(e){return"object"==typeof e?null!==e:he(e)},de={},ye=de,me=E,ge=F,be=function(e){return ge(e)?e:void 0},xe=function(e,t){return arguments.length<2?be(ye[e])||be(me[e]):ye[e]&&ye[e][t]||me[e]&&me[e][t]},we=N({}.isPrototypeOf),_e=xe("navigator","userAgent")||"",Se=E,ke=_e,Ee=Se.process,Oe=Se.Deno,Ae=Ee&&Ee.versions||Oe&&Oe.version,Ce=Ae&&Ae.v8;Ce&&(J=(Y=Ce.split("."))[0]>0&&Y[0]<4?1:+(Y[0]+Y[1])),!J&&ke&&(!(Y=ke.match(/Edge\/(\d+)/))||Y[1]>=74)&&(Y=ke.match(/Chrome\/(\d+)/))&&(J=+Y[1]);var je=J,Te=je,Pe=O,Me=!!Object.getOwnPropertySymbols&&!Pe((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Te&&Te<41})),Le=Me&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,De=xe,Ie=F,Re=we,Ue=Le,Ne=E.Object,Fe=Ue?function(e){return"symbol"==typeof e}:function(e){var t=De("Symbol");return Ie(t)&&Re(t.prototype,Ne(e))},Be=E.String,Ge=function(e){try{return Be(e)}catch(e){return"Object"}},Ve=F,ze=Ge,We=E.TypeError,qe=function(e){if(Ve(e))return e;throw We(ze(e)+" is not a function")},He=qe,Qe=function(e,t){var n=e[t];return null==n?void 0:He(n)},Ke=W,Ye=F,Je=ve,Xe=E.TypeError,$e={exports:{}},Ze=E,et=Object.defineProperty,tt=function(e,t){try{et(Ze,e,{value:t,configurable:!0,writable:!0})}catch(n){Ze[e]=t}return t},nt="__core-js_shared__",rt=E[nt]||tt(nt,{}),it=rt;($e.exports=function(e,t){return it[e]||(it[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.0",mode:"pure",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.0/LICENSE",source:"https://github.com/zloirock/core-js"});var ot=ue,at=E.Object,st=function(e){return at(ot(e))},ct=st,ut=N({}.hasOwnProperty),lt=Object.hasOwn||function(e,t){return ut(ct(e),t)},ft=N,pt=0,ht=Math.random(),vt=ft(1..toString),dt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+vt(++pt+ht,36)},yt=E,mt=$e.exports,gt=lt,bt=dt,xt=Me,wt=Le,_t=mt("wks"),St=yt.Symbol,kt=St&&St.for,Et=wt?St:St&&St.withoutSetter||bt,Ot=function(e){if(!gt(_t,e)||!xt&&"string"!=typeof _t[e]){var t="Symbol."+e;xt&&gt(St,e)?_t[e]=St[e]:_t[e]=wt&&kt?kt(t):Et(t)}return _t[e]},At=W,Ct=ve,jt=Fe,Tt=Qe,Pt=function(e,t){var n,r;if("string"===t&&Ye(n=e.toString)&&!Je(r=Ke(n,e)))return r;if(Ye(n=e.valueOf)&&!Je(r=Ke(n,e)))return r;if("string"!==t&&Ye(n=e.toString)&&!Je(r=Ke(n,e)))return r;throw Xe("Can't convert object to primitive value")},Mt=Ot,Lt=E.TypeError,Dt=Mt("toPrimitive"),It=function(e,t){if(!Ct(e)||jt(e))return e;var n,r=Tt(e,Dt);if(r){if(void 0===t&&(t="default"),n=At(r,e,t),!Ct(n)||jt(n))return n;throw Lt("Can't convert object to primitive value")}return void 0===t&&(t="number"),Pt(e,t)},Rt=Fe,Ut=function(e){var t=It(e,"string");return Rt(t)?t:t+""},Nt=ve,Ft=E.document,Bt=Nt(Ft)&&Nt(Ft.createElement),Gt=function(e){return Bt?Ft.createElement(e):{}},Vt=Gt,zt=!G&&!O((function(){return 7!=Object.defineProperty(Vt("div"),"a",{get:function(){return 7}}).a})),Wt=G,qt=W,Ht=q,Qt=X,Kt=pe,Yt=Ut,Jt=lt,Xt=zt,$t=Object.getOwnPropertyDescriptor;B.f=Wt?$t:function(e,t){if(e=Kt(e),t=Yt(t),Xt)try{return $t(e,t)}catch(e){}if(Jt(e,t))return Qt(!qt(Ht.f,e,t),e[t])};var Zt=O,en=F,tn=/#|\.prototype\./,nn=function(e,t){var n=on[rn(e)];return n==sn||n!=an&&(en(t)?Zt(t):!!t)},rn=nn.normalize=function(e){return String(e).replace(tn,".").toLowerCase()},on=nn.data={},an=nn.NATIVE="N",sn=nn.POLYFILL="P",cn=nn,un=qe,ln=A,fn=N(N.bind),pn=function(e,t){return un(e),void 0===t?e:ln?fn(e,t):function(){return e.apply(t,arguments)}},hn={},vn=G&&O((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),dn=E,yn=ve,mn=dn.String,gn=dn.TypeError,bn=function(e){if(yn(e))return e;throw gn(mn(e)+" is not an object")},xn=G,wn=zt,_n=vn,Sn=bn,kn=Ut,En=E.TypeError,On=Object.defineProperty,An=Object.getOwnPropertyDescriptor,Cn="enumerable",jn="configurable",Tn="writable";hn.f=xn?_n?function(e,t,n){if(Sn(e),t=kn(t),Sn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Tn in n&&!n.writable){var r=An(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:jn in n?n.configurable:r.configurable,enumerable:Cn in n?n.enumerable:r.enumerable,writable:!1})}return On(e,t,n)}:On:function(e,t,n){if(Sn(e),t=kn(t),Sn(n),wn)try{return On(e,t,n)}catch(e){}if("get"in n||"set"in n)throw En("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Pn=hn,Mn=X,Ln=G?function(e,t,n){return Pn.f(e,t,Mn(1,n))}:function(e,t,n){return e[t]=n,e},Dn=E,In=M,Rn=N,Un=F,Nn=B.f,Fn=cn,Bn=de,Gn=pn,Vn=Ln,zn=lt,Wn=function(e){var t=function(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return In(e,this,arguments)};return t.prototype=e.prototype,t},qn=function(e,t){var n,r,i,o,a,s,c,u,l=e.target,f=e.global,p=e.stat,h=e.proto,v=f?Dn:p?Dn[l]:(Dn[l]||{}).prototype,d=f?Bn:Bn[l]||Vn(Bn,l,{})[l],y=d.prototype;for(i in t)n=!Fn(f?i:l+(p?".":"#")+i,e.forced)&&v&&zn(v,i),a=d[i],n&&(s=e.noTargetGet?(u=Nn(v,i))&&u.value:v[i]),o=n&&s?s:t[i],n&&typeof a==typeof o||(c=e.bind&&n?Gn(o,Dn):e.wrap&&n?Wn(o):h&&Un(o)?Rn(o):o,(e.sham||o&&o.sham||a&&a.sham)&&Vn(c,"sham",!0),Vn(d,i,c),h&&(zn(Bn,r=l+"Prototype")||Vn(Bn,r,{}),Vn(Bn[r],i,o),e.real&&y&&!y[i]&&Vn(y,i,o)))},Hn=te,Qn=Array.isArray||function(e){return"Array"==Hn(e)},Kn=Math.ceil,Yn=Math.floor,Jn=function(e){var t=+e;return t!=t||0===t?0:(t>0?Yn:Kn)(t)},Xn=Jn,$n=Math.min,Zn=function(e){return e>0?$n(Xn(e),9007199254740991):0},er=Zn,tr=function(e){return er(e.length)},nr=Ut,rr=hn,ir=X,or=function(e,t,n){var r=nr(t);r in e?rr.f(e,r,ir(0,n)):e[r]=n},ar={};ar[Ot("toStringTag")]="z";var sr="[object z]"===String(ar),cr=E,ur=sr,lr=F,fr=te,pr=Ot("toStringTag"),hr=cr.Object,vr="Arguments"==fr(function(){return arguments}()),dr=ur?fr:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=hr(e),pr))?n:vr?fr(t):"Object"==(r=fr(t))&&lr(t.callee)?"Arguments":r},yr=F,mr=rt,gr=N(Function.toString);yr(mr.inspectSource)||(mr.inspectSource=function(e){return gr(e)});var br=mr.inspectSource,xr=N,wr=O,_r=F,Sr=dr,kr=br,Er=function(){},Or=[],Ar=xe("Reflect","construct"),Cr=/^\s*(?:class|function)\b/,jr=xr(Cr.exec),Tr=!Cr.exec(Er),Pr=function(e){if(!_r(e))return!1;try{return Ar(Er,Or,e),!0}catch(e){return!1}},Mr=function(e){if(!_r(e))return!1;switch(Sr(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Tr||!!jr(Cr,kr(e))}catch(e){return!0}};Mr.sham=!0;var Lr=!Ar||wr((function(){var e;return Pr(Pr.call)||!Pr(Object)||!Pr((function(){e=!0}))||e}))?Mr:Pr,Dr=E,Ir=Qn,Rr=Lr,Ur=ve,Nr=Ot("species"),Fr=Dr.Array,Br=function(e){var t;return Ir(e)&&(t=e.constructor,(Rr(t)&&(t===Fr||Ir(t.prototype))||Ur(t)&&null===(t=t[Nr]))&&(t=void 0)),void 0===t?Fr:t},Gr=function(e,t){return new(Br(e))(0===t?0:t)},Vr=O,zr=je,Wr=Ot("species"),qr=function(e){return zr>=51||!Vr((function(){var t=[];return(t.constructor={})[Wr]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Hr=qn,Qr=E,Kr=O,Yr=Qn,Jr=ve,Xr=st,$r=tr,Zr=or,ei=Gr,ti=qr,ni=je,ri=Ot("isConcatSpreadable"),ii=9007199254740991,oi="Maximum allowed index exceeded",ai=Qr.TypeError,si=ni>=51||!Kr((function(){var e=[];return e[ri]=!1,e.concat()[0]!==e})),ci=ti("concat"),ui=function(e){if(!Jr(e))return!1;var t=e[ri];return void 0!==t?!!t:Yr(e)};Hr({target:"Array",proto:!0,forced:!si||!ci},{concat:function(e){var t,n,r,i,o,a=Xr(this),s=ei(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(ui(o=-1===t?a:arguments[t])){if(c+(i=$r(o))>ii)throw ai(oi);for(n=0;n<i;n++,c++)n in o&&Zr(s,c,o[n])}else{if(c>=ii)throw ai(oi);Zr(s,c++,o)}return s.length=c,s}});var li=dr,fi=E.String,pi=function(e){if("Symbol"===li(e))throw TypeError("Cannot convert a Symbol value to a string");return fi(e)},hi={},vi=Jn,di=Math.max,yi=Math.min,mi=function(e,t){var n=vi(e);return n<0?di(n+t,0):yi(n,t)},gi=pe,bi=mi,xi=tr,wi=function(e){return function(t,n,r){var i,o=gi(t),a=xi(o),s=bi(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},_i={includes:wi(!0),indexOf:wi(!1)},Si={},ki=lt,Ei=pe,Oi=_i.indexOf,Ai=Si,Ci=N([].push),ji=function(e,t){var n,r=Ei(e),i=0,o=[];for(n in r)!ki(Ai,n)&&ki(r,n)&&Ci(o,n);for(;t.length>i;)ki(r,n=t[i++])&&(~Oi(o,n)||Ci(o,n));return o},Ti=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Pi=ji,Mi=Ti,Li=Object.keys||function(e){return Pi(e,Mi)},Di=G,Ii=vn,Ri=hn,Ui=bn,Ni=pe,Fi=Li;hi.f=Di&&!Ii?Object.defineProperties:function(e,t){Ui(e);for(var n,r=Ni(t),i=Fi(t),o=i.length,a=0;o>a;)Ri.f(e,n=i[a++],r[n]);return e};var Bi,Gi=xe("document","documentElement"),Vi=$e.exports,zi=dt,Wi=Vi("keys"),qi=function(e){return Wi[e]||(Wi[e]=zi(e))},Hi=bn,Qi=hi,Ki=Ti,Yi=Si,Ji=Gi,Xi=Gt,$i=qi("IE_PROTO"),Zi=function(){},eo=function(e){return"<script>"+e+"</"+"script>"},to=function(e){e.write(eo("")),e.close();var t=e.parentWindow.Object;return e=null,t},no=function(){try{Bi=new ActiveXObject("htmlfile")}catch(e){}var e,t;no="undefined"!=typeof document?document.domain&&Bi?to(Bi):((t=Xi("iframe")).style.display="none",Ji.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(eo("document.F=Object")),e.close(),e.F):to(Bi);for(var n=Ki.length;n--;)delete no.prototype[Ki[n]];return no()};Yi[$i]=!0;var ro=Object.create||function(e,t){var n;return null!==e?(Zi.prototype=Hi(e),n=new Zi,Zi.prototype=null,n[$i]=e):n=no(),void 0===t?n:Qi.f(n,t)},io={},oo=ji,ao=Ti.concat("length","prototype");io.f=Object.getOwnPropertyNames||function(e){return oo(e,ao)};var so={},co=mi,uo=tr,lo=or,fo=E.Array,po=Math.max,ho=te,vo=pe,yo=io.f,mo=function(e,t,n){for(var r=uo(e),i=co(t,r),o=co(void 0===n?r:n,r),a=fo(po(o-i,0)),s=0;i<o;i++,s++)lo(a,s,e[i]);return a.length=s,a},go="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];so.f=function(e){return go&&"Window"==ho(e)?function(e){try{return yo(e)}catch(e){return mo(go)}}(e):yo(vo(e))};var bo={};bo.f=Object.getOwnPropertySymbols;var xo=N([].slice),wo=Ln,_o=function(e,t,n,r){r&&r.enumerable?e[t]=n:wo(e,t,n)},So={},ko=Ot;So.f=ko;var Eo,Oo,Ao,Co=de,jo=lt,To=So,Po=hn.f,Mo=function(e){var t=Co.Symbol||(Co.Symbol={});jo(t,e)||Po(t,e,{value:To.f(e)})},Lo=dr,Do=sr?{}.toString:function(){return"[object "+Lo(this)+"]"},Io=sr,Ro=hn.f,Uo=Ln,No=lt,Fo=Do,Bo=Ot("toStringTag"),Go=function(e,t,n,r){if(e){var i=n?e:e.prototype;No(i,Bo)||Ro(i,Bo,{configurable:!0,value:t}),r&&!Io&&Uo(i,"toString",Fo)}},Vo=F,zo=br,Wo=E.WeakMap,qo=Vo(Wo)&&/native code/.test(zo(Wo)),Ho=E,Qo=N,Ko=ve,Yo=Ln,Jo=lt,Xo=rt,$o=qi,Zo=Si,ea="Object already initialized",ta=Ho.TypeError,na=Ho.WeakMap;if(qo||Xo.state){var ra=Xo.state||(Xo.state=new na),ia=Qo(ra.get),oa=Qo(ra.has),aa=Qo(ra.set);Eo=function(e,t){if(oa(ra,e))throw new ta(ea);return t.facade=e,aa(ra,e,t),t},Oo=function(e){return ia(ra,e)||{}},Ao=function(e){return oa(ra,e)}}else{var sa=$o("state");Zo[sa]=!0,Eo=function(e,t){if(Jo(e,sa))throw new ta(ea);return t.facade=e,Yo(e,sa,t),t},Oo=function(e){return Jo(e,sa)?e[sa]:{}},Ao=function(e){return Jo(e,sa)}}var ca={set:Eo,get:Oo,has:Ao,enforce:function(e){return Ao(e)?Oo(e):Eo(e,{})},getterFor:function(e){return function(t){var n;if(!Ko(t)||(n=Oo(t)).type!==e)throw ta("Incompatible receiver, "+e+" required");return n}}},ua=pn,la=se,fa=st,pa=tr,ha=Gr,va=N([].push),da=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,l,f){for(var p,h,v=fa(c),d=la(v),y=ua(u,l),m=pa(d),g=0,b=f||ha,x=t?b(c,m):n||a?b(c,0):void 0;m>g;g++)if((s||g in d)&&(h=y(p=d[g],g,v),e))if(t)x[g]=h;else if(h)switch(e){case 3:return!0;case 5:return p;case 6:return g;case 2:va(x,p)}else switch(e){case 4:return!1;case 7:va(x,p)}return o?-1:r||i?i:x}},ya={forEach:da(0),map:da(1),filter:da(2),some:da(3),every:da(4),find:da(5),findIndex:da(6),filterReject:da(7)},ma=qn,ga=E,ba=xe,xa=M,wa=W,_a=N,Sa=G,ka=Me,Ea=O,Oa=lt,Aa=Qn,Ca=F,ja=ve,Ta=we,Pa=Fe,Ma=bn,La=st,Da=pe,Ia=Ut,Ra=pi,Ua=X,Na=ro,Fa=Li,Ba=io,Ga=so,Va=bo,za=B,Wa=hn,qa=hi,Ha=q,Qa=xo,Ka=_o,Ya=$e.exports,Ja=Si,Xa=dt,$a=Ot,Za=So,es=Mo,ts=Go,ns=ca,rs=ya.forEach,is=qi("hidden"),os="Symbol",as=$a("toPrimitive"),ss=ns.set,cs=ns.getterFor(os),us=Object.prototype,ls=ga.Symbol,fs=ls&&ls.prototype,ps=ga.TypeError,hs=ga.QObject,vs=ba("JSON","stringify"),ds=za.f,ys=Wa.f,ms=Ga.f,gs=Ha.f,bs=_a([].push),xs=Ya("symbols"),ws=Ya("op-symbols"),_s=Ya("string-to-symbol-registry"),Ss=Ya("symbol-to-string-registry"),ks=Ya("wks"),Es=!hs||!hs.prototype||!hs.prototype.findChild,Os=Sa&&Ea((function(){return 7!=Na(ys({},"a",{get:function(){return ys(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=ds(us,t);r&&delete us[t],ys(e,t,n),r&&e!==us&&ys(us,t,r)}:ys,As=function(e,t){var n=xs[e]=Na(fs);return ss(n,{type:os,tag:e,description:t}),Sa||(n.description=t),n},Cs=function(e,t,n){e===us&&Cs(ws,t,n),Ma(e);var r=Ia(t);return Ma(n),Oa(xs,r)?(n.enumerable?(Oa(e,is)&&e[is][r]&&(e[is][r]=!1),n=Na(n,{enumerable:Ua(0,!1)})):(Oa(e,is)||ys(e,is,Ua(1,{})),e[is][r]=!0),Os(e,r,n)):ys(e,r,n)},js=function(e,t){Ma(e);var n=Da(t),r=Fa(n).concat(Ls(n));return rs(r,(function(t){Sa&&!wa(Ts,n,t)||Cs(e,t,n[t])})),e},Ts=function(e){var t=Ia(e),n=wa(gs,this,t);return!(this===us&&Oa(xs,t)&&!Oa(ws,t))&&(!(n||!Oa(this,t)||!Oa(xs,t)||Oa(this,is)&&this[is][t])||n)},Ps=function(e,t){var n=Da(e),r=Ia(t);if(n!==us||!Oa(xs,r)||Oa(ws,r)){var i=ds(n,r);return!i||!Oa(xs,r)||Oa(n,is)&&n[is][r]||(i.enumerable=!0),i}},Ms=function(e){var t=ms(Da(e)),n=[];return rs(t,(function(e){Oa(xs,e)||Oa(Ja,e)||bs(n,e)})),n},Ls=function(e){var t=e===us,n=ms(t?ws:Da(e)),r=[];return rs(n,(function(e){!Oa(xs,e)||t&&!Oa(us,e)||bs(r,xs[e])})),r};if(ka||(ls=function(){if(Ta(fs,this))throw ps("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?Ra(arguments[0]):void 0,t=Xa(e),n=function(e){this===us&&wa(n,ws,e),Oa(this,is)&&Oa(this[is],t)&&(this[is][t]=!1),Os(this,t,Ua(1,e))};return Sa&&Es&&Os(us,t,{configurable:!0,set:n}),As(t,e)},Ka(fs=ls.prototype,"toString",(function(){return cs(this).tag})),Ka(ls,"withoutSetter",(function(e){return As(Xa(e),e)})),Ha.f=Ts,Wa.f=Cs,qa.f=js,za.f=Ps,Ba.f=Ga.f=Ms,Va.f=Ls,Za.f=function(e){return As($a(e),e)},Sa&&ys(fs,"description",{configurable:!0,get:function(){return cs(this).description}})),ma({global:!0,wrap:!0,forced:!ka,sham:!ka},{Symbol:ls}),rs(Fa(ks),(function(e){es(e)})),ma({target:os,stat:!0,forced:!ka},{for:function(e){var t=Ra(e);if(Oa(_s,t))return _s[t];var n=ls(t);return _s[t]=n,Ss[n]=t,n},keyFor:function(e){if(!Pa(e))throw ps(e+" is not a symbol");if(Oa(Ss,e))return Ss[e]},useSetter:function(){Es=!0},useSimple:function(){Es=!1}}),ma({target:"Object",stat:!0,forced:!ka,sham:!Sa},{create:function(e,t){return void 0===t?Na(e):js(Na(e),t)},defineProperty:Cs,defineProperties:js,getOwnPropertyDescriptor:Ps}),ma({target:"Object",stat:!0,forced:!ka},{getOwnPropertyNames:Ms,getOwnPropertySymbols:Ls}),ma({target:"Object",stat:!0,forced:Ea((function(){Va.f(1)}))},{getOwnPropertySymbols:function(e){return Va.f(La(e))}}),vs){var Ds=!ka||Ea((function(){var e=ls();return"[null]"!=vs([e])||"{}"!=vs({a:e})||"{}"!=vs(Object(e))}));ma({target:"JSON",stat:!0,forced:Ds},{stringify:function(e,t,n){var r=Qa(arguments),i=t;if((ja(t)||void 0!==e)&&!Pa(e))return Aa(t)||(t=function(e,t){if(Ca(i)&&(t=wa(i,this,e,t)),!Pa(t))return t}),r[1]=t,xa(vs,null,r)}})}if(!fs[as]){var Is=fs.valueOf;Ka(fs,as,(function(e){return wa(Is,this)}))}ts(ls,os),Ja[is]=!0,Mo("asyncIterator"),Mo("hasInstance"),Mo("isConcatSpreadable"),Mo("iterator"),Mo("match"),Mo("matchAll"),Mo("replace"),Mo("search"),Mo("species"),Mo("split"),Mo("toPrimitive"),Mo("toStringTag"),Mo("unscopables"),Go(E.JSON,"JSON",!0);var Rs,Us,Ns,Fs=de.Symbol,Bs={},Gs=G,Vs=lt,zs=Function.prototype,Ws=Gs&&Object.getOwnPropertyDescriptor,qs=Vs(zs,"name"),Hs={EXISTS:qs,PROPER:qs&&"something"===function(){}.name,CONFIGURABLE:qs&&(!Gs||Gs&&Ws(zs,"name").configurable)},Qs=!O((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Ks=E,Ys=lt,Js=F,Xs=st,$s=Qs,Zs=qi("IE_PROTO"),ec=Ks.Object,tc=ec.prototype,nc=$s?ec.getPrototypeOf:function(e){var t=Xs(e);if(Ys(t,Zs))return t[Zs];var n=t.constructor;return Js(n)&&t instanceof n?n.prototype:t instanceof ec?tc:null},rc=O,ic=F,oc=ro,ac=nc,sc=_o,cc=Ot("iterator"),uc=!1;[].keys&&("next"in(Ns=[].keys())?(Us=ac(ac(Ns)))!==Object.prototype&&(Rs=Us):uc=!0);var lc=null==Rs||rc((function(){var e={};return Rs[cc].call(e)!==e}));ic((Rs=lc?{}:oc(Rs))[cc])||sc(Rs,cc,(function(){return this}));var fc={IteratorPrototype:Rs,BUGGY_SAFARI_ITERATORS:uc},pc=fc.IteratorPrototype,hc=ro,vc=X,dc=Go,yc=Bs,mc=function(){return this},gc=E,bc=F,xc=gc.String,wc=gc.TypeError,_c=N,Sc=bn,kc=function(e){if("object"==typeof e||bc(e))return e;throw wc("Can't set "+xc(e)+" as a prototype")},Ec=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=_c(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Sc(n),kc(r),t?e(n,r):n.__proto__=r,n}}():void 0),Oc=qn,Ac=W,Cc=function(e,t,n,r){var i=t+" Iterator";return e.prototype=hc(pc,{next:vc(+!r,n)}),dc(e,i,!1,!0),yc[i]=mc,e},jc=nc,Tc=Go,Pc=_o,Mc=Bs,Lc=Hs.PROPER,Dc=fc.BUGGY_SAFARI_ITERATORS,Ic=Ot("iterator"),Rc="keys",Uc="values",Nc="entries",Fc=function(){return this},Bc=function(e,t,n,r,i,o,a){Cc(n,t,r);var s,c,u,l=function(e){if(e===i&&d)return d;if(!Dc&&e in h)return h[e];switch(e){case Rc:case Uc:case Nc:return function(){return new n(this,e)}}return function(){return new n(this)}},f=t+" Iterator",p=!1,h=e.prototype,v=h[Ic]||h["@@iterator"]||i&&h[i],d=!Dc&&v||l(i),y="Array"==t&&h.entries||v;if(y&&(s=jc(y.call(new e)))!==Object.prototype&&s.next&&(Tc(s,f,!0,!0),Mc[f]=Fc),Lc&&i==Uc&&v&&v.name!==Uc&&(p=!0,d=function(){return Ac(v,this)}),i)if(c={values:l(Uc),keys:o?d:l(Rc),entries:l(Nc)},a)for(u in c)(Dc||p||!(u in h))&&Pc(h,u,c[u]);else Oc({target:t,proto:!0,forced:Dc||p},c);return a&&h[Ic]!==d&&Pc(h,Ic,d,{name:i}),Mc[t]=d,c},Gc=pe,Vc=Bs,zc=ca;hn.f;var Wc=Bc,qc="Array Iterator",Hc=zc.set,Qc=zc.getterFor(qc);Wc(Array,"Array",(function(e,t){Hc(this,{type:qc,target:Gc(e),index:0,kind:t})}),(function(){var e=Qc(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),Vc.Arguments=Vc.Array;var Kc={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Yc=E,Jc=dr,Xc=Ln,$c=Bs,Zc=Ot("toStringTag");for(var eu in Kc){var tu=Yc[eu],nu=tu&&tu.prototype;nu&&Jc(nu)!==Zc&&Xc(nu,Zc,eu),$c[eu]=$c.Array}var ru=Fs;Mo("asyncDispose"),Mo("dispose"),Mo("matcher"),Mo("metadata"),Mo("observable"),Mo("patternMatch"),Mo("replaceAll");var iu=ru;!function(e){e.exports=iu}(S);var ou={exports:{}},au=N,su=Jn,cu=pi,uu=ue,lu=au("".charAt),fu=au("".charCodeAt),pu=au("".slice),hu=function(e){return function(t,n){var r,i,o=cu(uu(t)),a=su(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=fu(o,a))<55296||r>56319||a+1===s||(i=fu(o,a+1))<56320||i>57343?e?lu(o,a):r:e?pu(o,a,a+2):i-56320+(r-55296<<10)+65536}},vu={codeAt:hu(!1),charAt:hu(!0)}.charAt,du=pi,yu=ca,mu=Bc,gu="String Iterator",bu=yu.set,xu=yu.getterFor(gu);mu(String,"String",(function(e){bu(this,{type:gu,string:du(e),index:0})}),(function(){var e,t=xu(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=vu(n,r),t.index+=e.length,{value:e,done:!1})}));var wu=So.f("iterator");!function(e){e.exports=wu}(ou),function(e){var t=S.exports,n=ou.exports;function r(i){return e.exports=r="function"==typeof t&&"symbol"==typeof n?function(e){return typeof e}:function(e){return e&&"function"==typeof t&&e.constructor===t&&e!==t.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(i)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(_);var _u={exports:{}},Su={exports:{}},ku=qn,Eu=G,Ou=hn.f;ku({target:"Object",stat:!0,forced:Object.defineProperty!==Ou,sham:!Eu},{defineProperty:Ou});var Au=de.Object,Cu=Su.exports=function(e,t,n){return Au.defineProperty(e,t,n)};Au.defineProperty.sham&&(Cu.sham=!0);var ju=Su.exports;!function(e){e.exports=ju}(_u);var Tu={exports:{}};qn({target:"Object",stat:!0,sham:!G},{create:ro});var Pu=de.Object,Mu=function(e,t){return Pu.create(e,t)};!function(e){e.exports=Mu}(Tu);var Lu={exports:{}},Du=st,Iu=nc,Ru=Qs;qn({target:"Object",stat:!0,forced:O((function(){Iu(1)})),sham:!Ru},{getPrototypeOf:function(e){return Iu(Du(e))}});var Uu=de.Object.getPrototypeOf;!function(e){e.exports=Uu}(Lu);var Nu={exports:{}},Fu=O,Bu=function(e,t){var n=[][e];return!!n&&Fu((function(){n.call(null,t||function(){throw 1},1)}))},Gu=ya.forEach,Vu=Bu("forEach")?[].forEach:function(e){return Gu(this,e,arguments.length>1?arguments[1]:void 0)};qn({target:"Array",proto:!0,forced:[].forEach!=Vu},{forEach:Vu});var zu=de,Wu=function(e){return zu[e+"Prototype"]},qu=Wu("Array").forEach,Hu=dr,Qu=lt,Ku=we,Yu=qu,Ju=Array.prototype,Xu={DOMTokenList:!0,NodeList:!0},$u=function(e){var t=e.forEach;return e===Ju||Ku(Ju,e)&&t===Ju.forEach||Qu(Xu,Hu(e))?Yu:t},Zu=$u;!function(e){e.exports=Zu}(Nu);var el={exports:{}};qn({target:"Object",stat:!0},{setPrototypeOf:Ec});var tl=de.Object.setPrototypeOf;!function(e){e.exports=tl}(el);var nl={exports:{}},rl=xe,il=io,ol=bo,al=bn,sl=N([].concat),cl=rl("Reflect","ownKeys")||function(e){var t=il.f(al(e)),n=ol.f;return n?sl(t,n(e)):t},ul=lt,ll=cl,fl=B,pl=hn,hl=N("".replace),vl=String(Error("zxcasd").stack),dl=/\n\s*at [^:]*:[^\n]*/,yl=dl.test(vl),ml=ve,gl=Ln,bl=Bs,xl=Ot("iterator"),wl=Array.prototype,_l=function(e){return void 0!==e&&(bl.Array===e||wl[xl]===e)},Sl=dr,kl=Qe,El=Bs,Ol=Ot("iterator"),Al=function(e){if(null!=e)return kl(e,Ol)||kl(e,"@@iterator")||El[Sl(e)]},Cl=W,jl=qe,Tl=bn,Pl=Ge,Ml=Al,Ll=E.TypeError,Dl=function(e,t){var n=arguments.length<2?Ml(e):t;if(jl(n))return Tl(Cl(n,e));throw Ll(Pl(e)+" is not iterable")},Il=W,Rl=bn,Ul=Qe,Nl=function(e,t,n){var r,i;Rl(e);try{if(!(r=Ul(e,"return"))){if("throw"===t)throw n;return n}r=Il(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return Rl(r),n},Fl=pn,Bl=W,Gl=bn,Vl=Ge,zl=_l,Wl=tr,ql=we,Hl=Dl,Ql=Al,Kl=Nl,Yl=E.TypeError,Jl=function(e,t){this.stopped=e,this.result=t},Xl=Jl.prototype,$l=function(e,t,n){var r,i,o,a,s,c,u,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),v=Fl(t,l),d=function(e){return r&&Kl(r,"normal",e),new Jl(!0,e)},y=function(e){return f?(Gl(e),h?v(e[0],e[1],d):v(e[0],e[1])):h?v(e,d):v(e)};if(p)r=e;else{if(!(i=Ql(e)))throw Yl(Vl(e)+" is not iterable");if(zl(i)){for(o=0,a=Wl(e);a>o;o++)if((s=y(e[o]))&&ql(Xl,s))return s;return new Jl(!1)}r=Hl(e,i)}for(c=r.next;!(u=Bl(c,r)).done;){try{s=y(u.value)}catch(e){Kl(r,"throw",e)}if("object"==typeof s&&s&&ql(Xl,s))return s}return new Jl(!1)},Zl=pi,ef=X,tf=!O((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",ef(1,7)),7!==e.stack)})),nf=qn,rf=E,of=we,af=nc,sf=Ec,cf=function(e,t,n){for(var r=ll(t),i=pl.f,o=fl.f,a=0;a<r.length;a++){var s=r[a];ul(e,s)||n&&ul(n,s)||i(e,s,o(t,s))}},uf=ro,lf=Ln,ff=X,pf=function(e,t){if(yl&&"string"==typeof e)for(;t--;)e=hl(e,dl,"");return e},hf=function(e,t){ml(t)&&"cause"in t&&gl(e,"cause",t.cause)},vf=$l,df=function(e,t){return void 0===e?arguments.length<2?"":t:Zl(e)},yf=tf,mf=Ot("toStringTag"),gf=rf.Error,bf=[].push,xf=function(e,t){var n,r=arguments.length>2?arguments[2]:void 0,i=of(wf,this);sf?n=sf(new gf,i?af(this):wf):(n=i?this:uf(wf),lf(n,mf,"Error")),void 0!==t&&lf(n,"message",df(t)),yf&&lf(n,"stack",pf(n.stack,1)),hf(n,r);var o=[];return vf(e,bf,{that:o}),lf(n,"errors",o),n};sf?sf(xf,gf):cf(xf,gf,{name:!0});var wf=xf.prototype=uf(gf.prototype,{constructor:ff(1,xf),message:ff(1,""),name:ff(1,"AggregateError")});nf({global:!0},{AggregateError:xf});var _f=E.Promise,Sf=_o,kf=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:Sf(e,r,t[r],n);return e},Ef=xe,Of=hn,Af=G,Cf=Ot("species"),jf=function(e){var t=Ef(e),n=Of.f;Af&&t&&!t[Cf]&&n(t,Cf,{configurable:!0,get:function(){return this}})},Tf=we,Pf=E.TypeError,Mf=function(e,t){if(Tf(t,e))return e;throw Pf("Incorrect invocation")},Lf=Ot("iterator"),Df=!1;try{var If=0,Rf={next:function(){return{done:!!If++}},return:function(){Df=!0}};Rf[Lf]=function(){return this},Array.from(Rf,(function(){throw 2}))}catch(e){}var Uf,Nf,Ff,Bf,Gf=function(e,t){if(!t&&!Df)return!1;var n=!1;try{var r={};r[Lf]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Vf=Lr,zf=Ge,Wf=E.TypeError,qf=bn,Hf=function(e){if(Vf(e))return e;throw Wf(zf(e)+" is not a constructor")},Qf=Ot("species"),Kf=function(e,t){var n,r=qf(e).constructor;return void 0===r||null==(n=qf(r)[Qf])?t:Hf(n)},Yf=E.TypeError,Jf=function(e,t){if(e<t)throw Yf("Not enough arguments");return e},Xf=/(?:ipad|iphone|ipod).*applewebkit/i.test(_e),$f="process"==te(E.process),Zf=E,ep=M,tp=pn,np=F,rp=lt,ip=O,op=Gi,ap=xo,sp=Gt,cp=Jf,up=Xf,lp=$f,fp=Zf.setImmediate,pp=Zf.clearImmediate,hp=Zf.process,vp=Zf.Dispatch,dp=Zf.Function,yp=Zf.MessageChannel,mp=Zf.String,gp=0,bp={},xp="onreadystatechange";try{Uf=Zf.location}catch(e){}var wp=function(e){if(rp(bp,e)){var t=bp[e];delete bp[e],t()}},_p=function(e){return function(){wp(e)}},Sp=function(e){wp(e.data)},kp=function(e){Zf.postMessage(mp(e),Uf.protocol+"//"+Uf.host)};fp&&pp||(fp=function(e){cp(arguments.length,1);var t=np(e)?e:dp(e),n=ap(arguments,1);return bp[++gp]=function(){ep(t,void 0,n)},Nf(gp),gp},pp=function(e){delete bp[e]},lp?Nf=function(e){hp.nextTick(_p(e))}:vp&&vp.now?Nf=function(e){vp.now(_p(e))}:yp&&!up?(Bf=(Ff=new yp).port2,Ff.port1.onmessage=Sp,Nf=tp(Bf.postMessage,Bf)):Zf.addEventListener&&np(Zf.postMessage)&&!Zf.importScripts&&Uf&&"file:"!==Uf.protocol&&!ip(kp)?(Nf=kp,Zf.addEventListener("message",Sp,!1)):Nf=xp in sp("script")?function(e){op.appendChild(sp("script")).onreadystatechange=function(){op.removeChild(this),wp(e)}}:function(e){setTimeout(_p(e),0)});var Ep,Op,Ap,Cp,jp,Tp,Pp,Mp,Lp={set:fp,clear:pp},Dp=E,Ip=/ipad|iphone|ipod/i.test(_e)&&void 0!==Dp.Pebble,Rp=/web0s(?!.*chrome)/i.test(_e),Up=E,Np=pn,Fp=B.f,Bp=Lp.set,Gp=Xf,Vp=Ip,zp=Rp,Wp=$f,qp=Up.MutationObserver||Up.WebKitMutationObserver,Hp=Up.document,Qp=Up.process,Kp=Up.Promise,Yp=Fp(Up,"queueMicrotask"),Jp=Yp&&Yp.value;Jp||(Ep=function(){var e,t;for(Wp&&(e=Qp.domain)&&e.exit();Op;){t=Op.fn,Op=Op.next;try{t()}catch(e){throw Op?Cp():Ap=void 0,e}}Ap=void 0,e&&e.enter()},Gp||Wp||zp||!qp||!Hp?!Vp&&Kp&&Kp.resolve?((Pp=Kp.resolve(void 0)).constructor=Kp,Mp=Np(Pp.then,Pp),Cp=function(){Mp(Ep)}):Wp?Cp=function(){Qp.nextTick(Ep)}:(Bp=Np(Bp,Up),Cp=function(){Bp(Ep)}):(jp=!0,Tp=Hp.createTextNode(""),new qp(Ep).observe(Tp,{characterData:!0}),Cp=function(){Tp.data=jp=!jp}));var Xp=Jp||function(e){var t={fn:e,next:void 0};Ap&&(Ap.next=t),Op||(Op=t,Cp()),Ap=t},$p={},Zp=qe,eh=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Zp(t),this.reject=Zp(n)};$p.f=function(e){return new eh(e)};var th=bn,nh=ve,rh=$p,ih=function(e,t){if(th(e),nh(t)&&t.constructor===e)return t;var n=rh.f(e);return(0,n.resolve)(t),n.promise},oh=E,ah=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},sh=function(){this.head=null,this.tail=null};sh.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var ch,uh,lh,fh="object"==typeof window,ph=qn,hh=E,vh=xe,dh=W,yh=_f,mh=kf,gh=Go,bh=jf,xh=qe,wh=F,_h=ve,Sh=Mf,kh=br,Eh=$l,Oh=Gf,Ah=Kf,Ch=Lp.set,jh=Xp,Th=ih,Ph=function(e,t){var n=oh.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},Mh=$p,Lh=ah,Dh=sh,Ih=ca,Rh=cn,Uh=fh,Nh=$f,Fh=je,Bh=Ot("species"),Gh="Promise",Vh=Ih.getterFor(Gh),zh=Ih.set,Wh=Ih.getterFor(Gh),qh=yh&&yh.prototype,Hh=yh,Qh=qh,Kh=hh.TypeError,Yh=hh.document,Jh=hh.process,Xh=Mh.f,$h=Xh,Zh=!!(Yh&&Yh.createEvent&&hh.dispatchEvent),ev=wh(hh.PromiseRejectionEvent),tv="unhandledrejection",nv=Rh(Gh,(function(){var e=kh(Hh),t=e!==String(Hh);if(!t&&66===Fh)return!0;if(!Qh.finally)return!0;if(Fh>=51&&/native code/.test(e))return!1;var n=new Hh((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[Bh]=r,!(n.then((function(){}))instanceof r)||!t&&Uh&&!ev})),rv=nv||!Oh((function(e){Hh.all(e).catch((function(){}))})),iv=function(e){var t;return!(!_h(e)||!wh(t=e.then))&&t},ov=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(a||(2===t.rejection&&lv(t),t.rejection=1),!0===s?n=o:(l&&l.enter(),n=s(o),l&&(l.exit(),i=!0)),n===e.promise?u(Kh("Promise-chain cycle")):(r=iv(n))?dh(r,n,c,u):c(n)):u(o)}catch(e){l&&!i&&l.exit(),u(e)}},av=function(e,t){e.notified||(e.notified=!0,jh((function(){for(var n,r=e.reactions;n=r.get();)ov(n,e);e.notified=!1,t&&!e.rejection&&cv(e)})))},sv=function(e,t,n){var r,i;Zh?((r=Yh.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),hh.dispatchEvent(r)):r={promise:t,reason:n},!ev&&(i=hh["on"+e])?i(r):e===tv&&Ph("Unhandled promise rejection",n)},cv=function(e){dh(Ch,hh,(function(){var t,n=e.facade,r=e.value;if(uv(e)&&(t=Lh((function(){Nh?Jh.emit("unhandledRejection",r,n):sv(tv,n,r)})),e.rejection=Nh||uv(e)?2:1,t.error))throw t.value}))},uv=function(e){return 1!==e.rejection&&!e.parent},lv=function(e){dh(Ch,hh,(function(){var t=e.facade;Nh?Jh.emit("rejectionHandled",t):sv("rejectionhandled",t,e.value)}))},fv=function(e,t,n){return function(r){e(t,r,n)}},pv=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,av(e,!0))},hv=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Kh("Promise can't be resolved itself");var r=iv(t);r?jh((function(){var n={done:!1};try{dh(r,t,fv(hv,n,e),fv(pv,n,e))}catch(t){pv(n,t,e)}})):(e.value=t,e.state=1,av(e,!1))}catch(t){pv({done:!1},t,e)}}};nv&&(Qh=(Hh=function(e){Sh(this,Qh),xh(e),dh(ch,this);var t=Vh(this);try{e(fv(hv,t),fv(pv,t))}catch(e){pv(t,e)}}).prototype,(ch=function(e){zh(this,{type:Gh,done:!1,notified:!1,parent:!1,reactions:new Dh,rejection:!1,state:0,value:void 0})}).prototype=mh(Qh,{then:function(e,t){var n=Wh(this),r=Xh(Ah(this,Hh));return n.parent=!0,r.ok=!wh(e)||e,r.fail=wh(t)&&t,r.domain=Nh?Jh.domain:void 0,0==n.state?n.reactions.add(r):jh((function(){ov(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),uh=function(){var e=new ch,t=Vh(e);this.promise=e,this.resolve=fv(hv,t),this.reject=fv(pv,t)},Mh.f=Xh=function(e){return e===Hh||e===lh?new uh(e):$h(e)}),ph({global:!0,wrap:!0,forced:nv},{Promise:Hh}),gh(Hh,Gh,!1,!0),bh(Gh),lh=vh(Gh),ph({target:Gh,stat:!0,forced:nv},{reject:function(e){var t=Xh(this);return dh(t.reject,void 0,e),t.promise}}),ph({target:Gh,stat:!0,forced:true},{resolve:function(e){return Th(this===lh?Hh:this,e)}}),ph({target:Gh,stat:!0,forced:rv},{all:function(e){var t=this,n=Xh(t),r=n.resolve,i=n.reject,o=Lh((function(){var n=xh(t.resolve),o=[],a=0,s=1;Eh(e,(function(e){var c=a++,u=!1;s++,dh(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=Xh(t),r=n.reject,i=Lh((function(){var i=xh(t.resolve);Eh(e,(function(e){dh(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var vv=W,dv=qe,yv=$p,mv=ah,gv=$l;qn({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=yv.f(t),r=n.resolve,i=n.reject,o=mv((function(){var n=dv(t.resolve),i=[],o=0,a=1;gv(e,(function(e){var s=o++,c=!1;a++,vv(n,t,e).then((function(e){c||(c=!0,i[s]={status:"fulfilled",value:e},--a||r(i))}),(function(e){c||(c=!0,i[s]={status:"rejected",reason:e},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var bv=qe,xv=xe,wv=W,_v=$p,Sv=ah,kv=$l,Ev="No one promise resolved";qn({target:"Promise",stat:!0},{any:function(e){var t=this,n=xv("AggregateError"),r=_v.f(t),i=r.resolve,o=r.reject,a=Sv((function(){var r=bv(t.resolve),a=[],s=0,c=1,u=!1;kv(e,(function(e){var l=s++,f=!1;c++,wv(r,t,e).then((function(e){f||u||(u=!0,i(e))}),(function(e){f||u||(f=!0,a[l]=e,--c||o(new n(a,Ev)))}))})),--c||o(new n(a,Ev))}));return a.error&&o(a.value),r.promise}});var Ov=_f,Av=xe,Cv=F,jv=Kf,Tv=ih;qn({target:"Promise",proto:!0,real:!0,forced:!!Ov&&O((function(){Ov.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=jv(this,Av("Promise")),n=Cv(e);return this.then(n?function(n){return Tv(t,e()).then((function(){return n}))}:e,n?function(n){return Tv(t,e()).then((function(){throw n}))}:e)}});var Pv=de.Promise,Mv=Pv,Lv=$p,Dv=ah;qn({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=Lv.f(this),n=Dv(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var Iv=Mv;!function(e){e.exports=Iv}(nl);var Rv={exports:{}},Uv=qn,Nv=Qn,Fv=N([].reverse),Bv=[1,2];Uv({target:"Array",proto:!0,forced:String(Bv)===String(Bv.reverse())},{reverse:function(){return Nv(this)&&(this.length=this.length),Fv(this)}});var Gv=Wu("Array").reverse,Vv=we,zv=Gv,Wv=Array.prototype,qv=function(e){var t=e.reverse;return e===Wv||Vv(Wv,e)&&t===Wv.reverse?zv:t};!function(e){e.exports=qv}(Rv);var Hv={exports:{}},Qv=qn,Kv=E,Yv=Qn,Jv=Lr,Xv=ve,$v=mi,Zv=tr,ed=pe,td=or,nd=Ot,rd=xo,id=qr("slice"),od=nd("species"),ad=Kv.Array,sd=Math.max;Qv({target:"Array",proto:!0,forced:!id},{slice:function(e,t){var n,r,i,o=ed(this),a=Zv(o),s=$v(e,a),c=$v(void 0===t?a:t,a);if(Yv(o)&&(n=o.constructor,(Jv(n)&&(n===ad||Yv(n.prototype))||Xv(n)&&null===(n=n[od]))&&(n=void 0),n===ad||void 0===n))return rd(o,s,c);for(r=new(void 0===n?ad:n)(sd(c-s,0)),i=0;s<c;s++,i++)s in o&&td(r,i,o[s]);return r.length=i,r}});var cd=Wu("Array").slice,ud=we,ld=cd,fd=Array.prototype,pd=function(e){var t=e.slice;return e===fd||ud(fd,e)&&t===fd.slice?ld:t},hd=pd;!function(e){e.exports=hd}(Hv),function(e){var t=_.exports.default,n=S.exports,r=_u.exports,i=Tu.exports,o=Lu.exports,a=Nu.exports,s=el.exports,c=nl.exports,u=Rv.exports,l=Hv.exports;function f(){e.exports=f=function(){return p},e.exports.__esModule=!0,e.exports.default=e.exports;var p={},h=Object.prototype,v=h.hasOwnProperty,d="function"==typeof n?n:{},y=d.iterator||"@@iterator",m=d.asyncIterator||"@@asyncIterator",g=d.toStringTag||"@@toStringTag";function b(e,t,n){return r(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{b({},"")}catch(e){b=function(e,t,n){return e[t]=n}}function x(e,t,n,r){var o=t&&t.prototype instanceof S?t:S,a=i(o.prototype),s=new D(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=P(a,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=w(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===_)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,s),a}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}p.wrap=x;var _={};function S(){}function k(){}function E(){}var O={};b(O,y,(function(){return this}));var A=o&&o(o(I([])));A&&A!==h&&v.call(A,y)&&(O=A);var C=E.prototype=S.prototype=i(O);function j(e){var t;a(t=["next","throw","return"]).call(t,(function(t){b(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,n){function r(i,o,a,s){var c=w(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==t(l)&&v.call(l,"__await")?n.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):n.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,t){function o(){return new n((function(n,i){r(e,t,n,i)}))}return i=i?i.then(o,o):o()}}function P(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var r=w(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,_;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],a(e).call(e,M,this),this.reset(!0)}function I(e){if(e){var t=e[y];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(v.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:R}}function R(){return{value:void 0,done:!0}}return k.prototype=E,b(C,"constructor",E),b(E,"constructor",k),k.displayName=b(E,g,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(e){return s?s(e,E):(e.__proto__=E,b(e,g,"GeneratorFunction")),e.prototype=i(C),e},p.awrap=function(e){return{__await:e}},j(T.prototype),b(T.prototype,m,(function(){return this})),p.AsyncIterator=T,p.async=function(e,t,n,r,i){void 0===i&&(i=c);var o=new T(x(e,t,n,r),i);return p.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},j(C),b(C,g,"Generator"),b(C,y,(function(){return this})),b(C,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var n in e)t.push(n);return u(t).call(t),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},p.values=I,D.prototype={constructor:D,reset:function(e){var t;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,a(t=this.tryEntries).call(t,L),!e)for(var n in this)"t"===n.charAt(0)&&v.call(this,n)&&!isNaN(+l(n).call(n,1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),s=v.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&v.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),_}},p}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports}(w);var vd=w.exports(),dd=vd;try{regeneratorRuntime=vd}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=vd:Function("r","regeneratorRuntime = r")(vd)}var yd={exports:{}},md=Wu("Array").concat,gd=we,bd=md,xd=Array.prototype,wd=function(e){var t=e.concat;return e===xd||gd(xd,e)&&t===xd.concat?bd:t};!function(e){e.exports=wd}(yd);var _d=x(yd.exports),Sd={exports:{}},kd=N,Ed=qe,Od=ve,Ad=lt,Cd=xo,jd=A,Td=E.Function,Pd=kd([].concat),Md=kd([].join),Ld={},Dd=function(e,t,n){if(!Ad(Ld,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";Ld[t]=Td("C,a","return new C("+Md(r,",")+")")}return Ld[t](e,n)},Id=jd?Td.bind:function(e){var t=Ed(this),n=t.prototype,r=Cd(arguments,1),i=function(){var n=Pd(r,Cd(arguments));return this instanceof i?Dd(t,n.length,n):t.apply(e,n)};return Od(n)&&(i.prototype=n),i},Rd=Id;qn({target:"Function",proto:!0,forced:Function.bind!==Rd},{bind:Rd});var Ud=Wu("Function").bind,Nd=we,Fd=Ud,Bd=Function.prototype,Gd=function(e){var t=e.bind;return e===Bd||Nd(Bd,e)&&t===Bd.bind?Fd:t};!function(e){e.exports=Gd}(Sd);var Vd=x(Sd.exports),zd={exports:{}};!function(e){e.exports=$u}(zd);var Wd=x(zd.exports),qd={exports:{}},Hd=ya.map;qn({target:"Array",proto:!0,forced:!qr("map")},{map:function(e){return Hd(this,e,arguments.length>1?arguments[1]:void 0)}});var Qd=Wu("Array").map,Kd=we,Yd=Qd,Jd=Array.prototype,Xd=function(e){var t=e.map;return e===Jd||Kd(Jd,e)&&t===Jd.map?Yd:t};!function(e){e.exports=Xd}(qd);var $d=x(qd.exports),Zd={exports:{}},ey=_i.includes;qn({target:"Array",proto:!0},{includes:function(e){return ey(this,e,arguments.length>1?arguments[1]:void 0)}});var ty=Wu("Array").includes,ny=ve,ry=te,iy=Ot("match"),oy=function(e){var t;return ny(e)&&(void 0!==(t=e[iy])?!!t:"RegExp"==ry(e))},ay=E.TypeError,sy=Ot("match"),cy=qn,uy=function(e){if(oy(e))throw ay("The method doesn't accept regular expressions");return e},ly=ue,fy=pi,py=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[sy]=!1,"/./"[e](t)}catch(e){}}return!1},hy=N("".indexOf);cy({target:"String",proto:!0,forced:!py("includes")},{includes:function(e){return!!~hy(fy(ly(this)),fy(uy(e)),arguments.length>1?arguments[1]:void 0)}});var vy=Wu("String").includes,dy=we,yy=ty,my=vy,gy=Array.prototype,by=String.prototype,xy=function(e){var t=e.includes;return e===gy||dy(gy,e)&&t===gy.includes?yy:"string"==typeof e||e===by||dy(by,e)&&t===by.includes?my:t};!function(e){e.exports=xy}(Zd);var wy=x(Zd.exports),_y={exports:{}},Sy=qn,ky=ya.findIndex,Ey="findIndex",Oy=!0;Ey in[]&&Array(1).findIndex((function(){Oy=!1})),Sy({target:"Array",proto:!0,forced:Oy},{findIndex:function(e){return ky(this,e,arguments.length>1?arguments[1]:void 0)}});var Ay=Wu("Array").findIndex,Cy=we,jy=Ay,Ty=Array.prototype,Py=function(e){var t=e.findIndex;return e===Ty||Cy(Ty,e)&&t===Ty.findIndex?jy:t};!function(e){e.exports=Py}(_y);var My=x(_y.exports),Ly={exports:{}},Dy=qn,Iy=ya.find,Ry="find",Uy=!0;Ry in[]&&Array(1).find((function(){Uy=!1})),Dy({target:"Array",proto:!0,forced:Uy},{find:function(e){return Iy(this,e,arguments.length>1?arguments[1]:void 0)}});var Ny=Wu("Array").find,Fy=we,By=Ny,Gy=Array.prototype,Vy=function(e){var t=e.find;return e===Gy||Fy(Gy,e)&&t===Gy.find?By:t};!function(e){e.exports=Vy}(Ly);var zy=x(Ly.exports),Wy={exports:{}},qy=qn,Hy=E,Qy=mi,Ky=Jn,Yy=tr,Jy=st,Xy=Gr,$y=or,Zy=qr("splice"),em=Hy.TypeError,tm=Math.max,nm=Math.min,rm=9007199254740991,im="Maximum allowed length exceeded";qy({target:"Array",proto:!0,forced:!Zy},{splice:function(e,t){var n,r,i,o,a,s,c=Jy(this),u=Yy(c),l=Qy(e,u),f=arguments.length;if(0===f?n=r=0:1===f?(n=0,r=u-l):(n=f-2,r=nm(tm(Ky(t),0),u-l)),u+n-r>rm)throw em(im);for(i=Xy(c,r),o=0;o<r;o++)(a=l+o)in c&&$y(i,o,c[a]);if(i.length=r,n<r){for(o=l;o<u-r;o++)s=o+n,(a=o+r)in c?c[s]=c[a]:delete c[s];for(o=u;o>u-r+n;o--)delete c[o-1]}else if(n>r)for(o=u-r;o>l;o--)s=o+n-1,(a=o+r-1)in c?c[s]=c[a]:delete c[s];for(o=0;o<n;o++)c[o+l]=arguments[o+2];return c.length=u-r+n,i}});var om=Wu("Array").splice,am=we,sm=om,cm=Array.prototype,um=function(e){var t=e.splice;return e===cm||am(cm,e)&&t===cm.splice?sm:t};!function(e){e.exports=um}(Wy);var lm=x(Wy.exports),fm={exports:{}},pm=qn,hm=_i.indexOf,vm=Bu,dm=N([].indexOf),ym=!!dm&&1/dm([1],1,-0)<0,mm=vm("indexOf");pm({target:"Array",proto:!0,forced:ym||!mm},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return ym?dm(this,e,t)||0:hm(this,e,t)}});var gm=Wu("Array").indexOf,bm=we,xm=gm,wm=Array.prototype,_m=function(e){var t=e.indexOf;return e===wm||bm(wm,e)&&t===wm.indexOf?xm:t};!function(e){e.exports=_m}(fm);var Sm=x(fm.exports),km={exports:{}},Em=ya.filter;qn({target:"Array",proto:!0,forced:!qr("filter")},{filter:function(e){return Em(this,e,arguments.length>1?arguments[1]:void 0)}});var Om=Wu("Array").filter,Am=we,Cm=Om,jm=Array.prototype,Tm=function(e){var t=e.filter;return e===jm||Am(jm,e)&&t===jm.filter?Cm:t};!function(e){e.exports=Tm}(km);var Pm=x(km.exports),Mm={exports:{}},Lm=Qn,Dm=tr,Im=pn,Rm=E.TypeError,Um=function(e,t,n,r,i,o,a,s){for(var c,u,l=i,f=0,p=!!a&&Im(a,s);f<r;){if(f in n){if(c=p?p(n[f],f,t):n[f],o>0&&Lm(c))u=Dm(c),l=Um(e,t,c,u,l,o-1)-1;else{if(l>=9007199254740991)throw Rm("Exceed the acceptable array length");e[l]=c}l++}f++}return l},Nm=Um,Fm=qe,Bm=st,Gm=tr,Vm=Gr;qn({target:"Array",proto:!0},{flatMap:function(e){var t,n=Bm(this),r=Gm(n);return Fm(e),(t=Vm(n,0)).length=Nm(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}});var zm=Wu("Array").flatMap,Wm=we,qm=zm,Hm=Array.prototype,Qm=function(e){var t=e.flatMap;return e===Hm||Wm(Hm,e)&&t===Hm.flatMap?qm:t};!function(e){e.exports=Qm}(Mm);var Km=x(Mm.exports),Ym={exports:{}},Jm=qn,Xm=E,$m=M,Zm=F,eg=xo,tg=Jf,ng=/MSIE .\./.test(_e),rg=Xm.Function,ig=function(e){return function(t,n){var r=tg(arguments.length,1)>2,i=Zm(t)?t:rg(t),o=r?eg(arguments,2):void 0;return e(r?function(){$m(i,this,o)}:i,n)}};Jm({global:!0,bind:!0,forced:ng},{setTimeout:ig(Xm.setTimeout),setInterval:ig(Xm.setInterval)});var og=de.setTimeout;!function(e){e.exports=og}(Ym);var ag=x(Ym.exports),sg={exports:{}},cg=bn,ug=Nl,lg=pn,fg=W,pg=st,hg=function(e,t,n,r){try{return r?t(cg(n)[0],n[1]):t(n)}catch(t){ug(e,"throw",t)}},vg=_l,dg=Lr,yg=tr,mg=or,gg=Dl,bg=Al,xg=E.Array,wg=function(e){var t=pg(e),n=dg(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=lg(i,r>2?arguments[2]:void 0));var a,s,c,u,l,f,p=bg(t),h=0;if(!p||this==xg&&vg(p))for(a=yg(t),s=n?new this(a):xg(a);a>h;h++)f=o?i(t[h],h):t[h],mg(s,h,f);else for(l=(u=gg(t,p)).next,s=n?new this:[];!(c=fg(l,u)).done;h++)f=o?hg(u,i,[c.value,h],!0):c.value,mg(s,h,f);return s.length=h,s};qn({target:"Array",stat:!0,forced:!Gf((function(e){Array.from(e)}))},{from:wg});var _g=de.Array.from;!function(e){e.exports=_g}(sg);var Sg=x(sg.exports),kg={exports:{}},Eg=G,Og=N,Ag=Li,Cg=pe,jg=Og(q.f),Tg=Og([].push),Pg=function(e){return function(t){for(var n,r=Cg(t),i=Ag(r),o=i.length,a=0,s=[];o>a;)n=i[a++],Eg&&!jg(r,n)||Tg(s,e?[n,r[n]]:r[n]);return s}},Mg={entries:Pg(!0),values:Pg(!1)}.values;qn({target:"Object",stat:!0},{values:function(e){return Mg(e)}});var Lg=de.Object.values;!function(e){e.exports=Lg}(kg);var Dg=x(kg.exports),Ig={exports:{}};!function(e){e.exports=pd}(Ig);var Rg=x(Ig.exports),Ug={exports:{}},Ng=ya.every;qn({target:"Array",proto:!0,forced:!Bu("every")},{every:function(e){return Ng(this,e,arguments.length>1?arguments[1]:void 0)}});var Fg=Wu("Array").every,Bg=we,Gg=Fg,Vg=Array.prototype,zg=function(e){var t=e.every;return e===Vg||Bg(Vg,e)&&t===Vg.every?Gg:t};!function(e){e.exports=zg}(Ug);var Wg=x(Ug.exports),qg={exports:{}};qn({target:"Array",stat:!0},{isArray:Qn});var Hg=de.Array.isArray;!function(e){e.exports=Hg}(qg);var Qg=x(qg.exports),Kg={exports:{}};!function(e){e.exports=Pv}(Kg);var Yg=x(Kg.exports),Jg={exports:{}},Xg=de.setInterval;!function(e){e.exports=Xg}(Jg);var $g=x(Jg.exports),Zg=new Uint8Array([88,0,0,0]),eb=new Uint8Array([26,165,74,6,73,7,72,8,71,9,70,10,69,11,68,12,67,13,66,14,65]),tb=new Uint8Array([24,255,1,0,0,0,0,0,0,0,0,0,0,0,0]),nb=new Uint8Array([25,255,0,255,255,255,255]),rb=new Uint8Array([27,255,0,0,0,0,0,0,0,0,0]),ib={HEADER:Zg,INIT:eb,DISCONNECT:new Uint8Array([84]),START_MEASUREMENTS:tb,STOP_MEASUREMENTS:nb,SET_MEASUREMENT_PERIOD:rb,GET_INFO:new Uint8Array([85]),GET_STATUS:new Uint8Array([16]),GET_SENSOR_IDS:new Uint8Array([81]),GET_SENSOR_INFO:new Uint8Array([80,0]),GET_DEFAULT_SENSORS_MASK:new Uint8Array([86])},ob=6,ab=7,sb=10,cb=8,ub=9,lb=11,fb=12,pb=13,hb=14,vb=32,db={exports:{}},yb={exports:{}},mb=O((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),gb=O,bb=ve,xb=te,wb=mb,_b=Object.isExtensible,Sb=gb((function(){_b(1)}))||wb?function(e){return!!bb(e)&&((!wb||"ArrayBuffer"!=xb(e))&&(!_b||_b(e)))}:_b,kb=!O((function(){return Object.isExtensible(Object.preventExtensions({}))})),Eb=qn,Ob=N,Ab=Si,Cb=ve,jb=lt,Tb=hn.f,Pb=io,Mb=so,Lb=Sb,Db=kb,Ib=!1,Rb=dt("meta"),Ub=0,Nb=function(e){Tb(e,Rb,{value:{objectID:"O"+Ub++,weakData:{}}})},Fb=yb.exports={enable:function(){Fb.enable=function(){},Ib=!0;var e=Pb.f,t=Ob([].splice),n={};n[Rb]=1,e(n).length&&(Pb.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===Rb){t(r,i,1);break}return r},Eb({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Mb.f}))},fastKey:function(e,t){if(!Cb(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!jb(e,Rb)){if(!Lb(e))return"F";if(!t)return"E";Nb(e)}return e[Rb].objectID},getWeakData:function(e,t){if(!jb(e,Rb)){if(!Lb(e))return!0;if(!t)return!1;Nb(e)}return e[Rb].weakData},onFreeze:function(e){return Db&&Ib&&Lb(e)&&!jb(e,Rb)&&Nb(e),e}};Ab[Rb]=!0;var Bb=qn,Gb=E,Vb=yb.exports,zb=O,Wb=Ln,qb=$l,Hb=Mf,Qb=F,Kb=ve,Yb=Go,Jb=hn.f,Xb=ya.forEach,$b=G,Zb=ca.set,ex=ca.getterFor,tx=hn.f,nx=ro,rx=kf,ix=pn,ox=Mf,ax=$l,sx=Bc,cx=jf,ux=G,lx=yb.exports.fastKey,fx=ca.set,px=ca.getterFor,hx={getConstructor:function(e,t,n,r){var i=e((function(e,i){ox(e,o),fx(e,{type:t,index:nx(null),first:void 0,last:void 0,size:0}),ux||(e.size=0),null!=i&&ax(i,e[r],{that:e,AS_ENTRIES:n})})),o=i.prototype,a=px(t),s=function(e,t,n){var r,i,o=a(e),s=c(e,t);return s?s.value=n:(o.last=s={index:i=lx(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),ux?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},c=function(e,t){var n,r=a(e),i=lx(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return rx(o,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,ux?e.size=0:this.size=0},delete:function(e){var t=this,n=a(t),r=c(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),ux?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=a(this),r=ix(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),rx(o,n?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),ux&&tx(o,"size",{get:function(){return a(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=px(t),o=px(r);sx(e,t,(function(e,t){fx(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),cx(t)}},vx=function(e,t,n){var r,i=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),a=i?"set":"add",s=Gb[e],c=s&&s.prototype,u={};if($b&&Qb(s)&&(o||c.forEach&&!zb((function(){(new s).entries().next()})))){var l=(r=t((function(t,n){Zb(Hb(t,l),{type:e,collection:new s}),null!=n&&qb(n,t[a],{that:t,AS_ENTRIES:i})}))).prototype,f=ex(e);Xb(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(e){var t="add"==e||"set"==e;!(e in c)||o&&"clear"==e||Wb(l,e,(function(n,r){var i=f(this).collection;if(!t&&o&&!Kb(n))return"get"==e&&void 0;var a=i[e](0===n?0:n,r);return t?this:a}))})),o||Jb(l,"size",{configurable:!0,get:function(){return f(this).collection.size}})}else r=n.getConstructor(t,e,i,a),Vb.enable();return Yb(r,e,!1,!0),u[e]=r,Bb({global:!0,forced:!0},u),o||n.setStrong(r,e,i),r};vx("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),hx);var dx=de.Map;!function(e){e.exports=dx}(db);var yx=x(db.exports),mx={exports:{}},gx=qe,bx=st,xx=se,wx=tr,_x=E.TypeError,Sx=function(e){return function(t,n,r,i){gx(n);var o=bx(t),a=xx(o),s=wx(o),c=e?s-1:0,u=e?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=u;break}if(c+=u,e?c<0:s<=c)throw _x("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=u)c in a&&(i=n(i,a[c],c,o));return i}},kx={left:Sx(!1),right:Sx(!0)}.left,Ex=je,Ox=$f;qn({target:"Array",proto:!0,forced:!Bu("reduce")||!Ox&&Ex>79&&Ex<83},{reduce:function(e){var t=arguments.length;return kx(this,e,t,t>1?arguments[1]:void 0)}});var Ax=Wu("Array").reduce,Cx=we,jx=Ax,Tx=Array.prototype,Px=function(e){var t=e.reduce;return e===Tx||Cx(Tx,e)&&t===Tx.reduce?jx:t};!function(e){e.exports=Px}(mx);var Mx=x(mx.exports),Lx={exports:{}},Dx=Jn,Ix=pi,Rx=ue,Ux=E.RangeError,Nx=N,Fx=Zn,Bx=pi,Gx=ue,Vx=Nx((function(e){var t=Ix(Rx(this)),n="",r=Dx(e);if(r<0||r==1/0)throw Ux("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n})),zx=Nx("".slice),Wx=Math.ceil,qx=function(e){return function(t,n,r){var i,o,a=Bx(Gx(t)),s=Fx(n),c=a.length,u=void 0===r?" ":Bx(r);return s<=c||""==u?a:((o=Vx(u,Wx((i=s-c)/u.length))).length>i&&(o=zx(o,0,i)),e?a+o:o+a)}},Hx={start:qx(!1),end:qx(!0)},Qx=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(_e),Kx=Hx.start;qn({target:"String",proto:!0,forced:Qx},{padStart:function(e){return Kx(this,e,arguments.length>1?arguments[1]:void 0)}});var Yx=Wu("String").padStart,Jx=we,Xx=Yx,$x=String.prototype,Zx=function(e){var t=e.padStart;return"string"==typeof e||e===$x||Jx($x,e)&&t===$x.padStart?Xx:t};!function(e){e.exports=Zx}(Lx);var ew=x(Lx.exports),tw=function(e){return 0!==e},nw=function(){function e(){i(this,e),this._listenerMap=new yx}return a(e,[{key:"on",value:function(e,t){this._listenerMap.has(e)||this._listenerMap.set(e,[]),this._listenerMap.get(e).push(t)}},{key:"off",value:function(e,t){var n=this._listenerMap.get(e);if(n&&n.length){var r=Mx(n).call(n,(function(e,n,r){return"function"==typeof n&&n===t?e=r:e}),-1);if(r>-1)return lm(n).call(n,r,1),this._listenerMap.set(e,n),!0}return!1}},{key:"unbind",value:function(){this._listenerMap.clear()}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this._listenerMap.get(e);return!(!i||!i.length)&&(Wd(i).call(i,(function(e){e.apply(void 0,n)})),!0)}}]),e}(),rw=function(){},iw=function(){};function ow(e){var t;return $d(t=Sg(new Uint8Array(e))).call(t,(function(e){var t;return ew(t=e.toString(16)).call(t,2,"0")})).join(" ")}var aw={exports:{}},sw=Wu("Array").values,cw=dr,uw=lt,lw=we,fw=sw,pw=Array.prototype,hw={DOMTokenList:!0,NodeList:!0},vw=function(e){var t=e.values;return e===pw||lw(pw,e)&&t===pw.values||uw(hw,cw(e))?fw:t};!function(e){e.exports=vw}(aw);var dw,yw=x(aw.exports),mw=a((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.type=t.type,this.mode=t.mode,this.minValue=t.minValue,this.maxValue=t.maxValue,this.uncertainty=t.uncertainty,this.minPeriod=t.minPeriod,this.maxPeriod=t.maxPeriod,this.typicalPeriod=t.typicalPeriod,this.granularity=t.granularity})),gw=a((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.number=t.number,this.name=t.name,this.unit=t.unit,this.id=t.id,this.mutalExclusionMask=t.mutalExclusionMask,this.measurementInfo=t.measurementInfo})),bw=function(e){c(n,e);var t=y(n);function n(e){var r;return i(this,n),(r=t.call(this)).number=e.number,r.name=e.name,r.unit=e.unit,r.specs=e,r.enabled=!1,r.values=[],r.value=null,r}return a(n,[{key:"clear",value:function(){this.value=null,this.values=[]}},{key:"setValue",value:function(e,t){this.value=e,t&&yw(this).push(this.value),this.emit("value-changed",this)}},{key:"setEnabled",value:function(e){this.enabled!==e&&(this.enabled=e,this.emit("state-changed",this))}}]),n}(nw),xw=function(e){c(g,e);var t,n,o,s,u,l,f,p,h,v,d,m=y(g);function g(e){var t;if(i(this,g),t=m.call(this),"undefined"==typeof TextDecoder){var n=require("text-encoding");dw=n.TextDecoder}else dw=TextDecoder;return t.device=e,t.sensors=[],t.opened=!1,t.rollingCounter=0,t.collecting=!1,t.measurementPeriod=10,t.response=null,t.remainingResponseLength=0,t.defaultSensorsMask=0,t.keepValues=!0,t.minMeasurementPeriod=10,t.serialNumber="",t.orderCode="",t.name="",t}return a(g,[{key:"getBatteryLevel",value:(d=r(dd.mark((function e(){var t;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getStatus();case 2:return t=e.sent,e.abrupt("return",t.battery);case 4:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getChargingState",value:(v=r(dd.mark((function e(){var t;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getStatus();case 2:return t=e.sent,e.abrupt("return",t.chargingStatus);case 4:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"open",value:(h=r(dd.mark((function e(){var t,n=arguments;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],!this.opened){e.next=3;break}throw new Error("Device cannot be opened because it is already open");case 3:return e.next=5,this._connect();case 5:return e.next=7,this._init();case 7:return e.next=9,this._getStatus();case 9:return e.next=11,this._getDeviceInfo();case 11:return e.next=13,this._getDefaultSensorsMask();case 13:return e.next=15,this._getAvailableSensors();case 15:this._onOpened(),t&&this.start();case 17:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"close",value:(p=r(dd.mark((function e(){return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.opened){e.next=2;break}throw new Error("Device cannot be closed because it is not open");case 2:return e.next=4,this._stopMeasurements();case 4:return e.next=6,this._sendCommand(ib.DISCONNECT);case 6:return e.abrupt("return",this._disconnect());case 7:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"enableDefaultSensors",value:function(){for(var e=1,t=0;t<32;++t){if((this.defaultSensorsMask&e)===e){var n=this.getSensor(t);n&&n.setEnabled(!0)}e<<=1}}},{key:"start",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=Pm(e=this.sensors).call(e,(function(e){return e.enabled}));0===r.length&&(this.enableDefaultSensors(),r=Pm(t=this.sensors).call(t,(function(e){return e.enabled})));Wd(r).call(r,(function(e){return e.clear()})),n&&(this.measurementPeriod=n),this._startMeasurements()}},{key:"stop",value:function(){this._stopMeasurements()}},{key:"getSensor",value:function(e){var t;return zy(t=this.sensors).call(t,(function(t){return t.number===e}))}},{key:"_connect",value:(f=r(dd.mark((function e(){var t=this;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.device.setup({onClosed:function(){return t._onClosed()},onResponse:function(e){return t._handleResponse(e)}}).then((function(){t.writeQueue=[],t.deviceWriteInterval=$g((function(){if(t.writeQueue&&t.writeQueue.length>0){var e=t.writeQueue[0];e.written||(t._writeToDevice(e.buffer),e.written=!0)}}),10)})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"_disconnect",value:(l=r(dd.mark((function e(){return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(this.deviceWriteInterval),e.abrupt("return",this.device.close());case 2:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"_init",value:function(){return this.collecting=!1,this.rollingCounter=255,this._sendCommand(ib.INIT)}},{key:"_handleResponse",value:function(e){var t,n,r,i;if(rw("command notified: ".concat(ow(e.buffer))),this.remainingResponseLegnth>0){if(this.remainingResponseLegnth-=e.buffer.byteLength,this.response=new DataView((n=this.response.buffer,r=Rg(t=e.buffer).call(t,0),(i=new Uint8Array(n.byteLength+r.byteLength)).set(new Uint8Array(n),0),i.set(new Uint8Array(r),n.byteLength),i.buffer)),this.remainingResponseLegnth>0)return}else this.response=e;var o=this.response.getUint8(1);if(o>this.response.buffer.byteLength)this.remainingResponseLegnth=o-this.response.buffer.byteLength;else if(rw("handle command: ".concat(ow(this.response.buffer))),this.response.getUint8(0)===vb)this._processMeasurements(this.response);else{var a=this.response.getUint8(4),s=this.response.getUint8(5),c=new DataView(this.response.buffer,6);this._resolveWriteCommand(a,s,c),this.remainingResponseLegnth=0,this.response=null}}},{key:"_getSensorsWithMask",value:function(e){for(var t=[],n=1,r=0;r<32;++r){if((e&n)===n){var i,o=this.getSensor(r);if(o)t.push(o),rw(_d(i="available: [".concat(e,"] ")).call(i,t[t.length-1].number))}n<<=1}return t}},{key:"_processMeasurements",value:function(e){var t=[],n=!0,r=0,i=0,o=e.getUint8(4);switch(o){case ob:t=this._getSensorsWithMask(e.getUint16(5,!0)),r=e.getUint8(7,!0),i=9;break;case ab:t=this._getSensorsWithMask(e.getUint32(5,!0)),r=e.getUint8(9,!0),i=11;break;case sb:case cb:t[0]=this.getSensor(e.getUint8(6)),r=e.getUint8(7,!0),i=8;break;case lb:case ub:t[0]=this.getSensor(e.getUint8(6)),r=e.getUint8(7,!0),i=8,n=!1;break;case fb:case pb:case hb:rw("Purposely Ignoring packet type: ".concat(o));break;default:rw("Unknown packet type: ".concat(o))}for(var a=0;a<r;++a)for(var s=0;s<t.length;++s)n?t[s].setValue(e.getFloat32(i,!0),this.keepValues):t[s].setValue(e.getInt32(i,!0),this.keepValues),i+=4}},{key:"_resolveWriteCommand",value:function(e,t,n){var r,i,o=zy(r=this.writeQueue).call(r,(function(n){return n.command===e&&n.rollingCounter===t}));o&&(o.resolve(n),this.writeQueue=Pm(i=this.writeQueue).call(i,(function(e){return e!==o})))}},{key:"_onOpened",value:function(){rw("opened"),this.opened=!0,this.emit("device-opened")}},{key:"_onClosed",value:function(){rw("closed"),this.opened=!1,this.emit("device-closed")}},{key:"_decRollingCounter",value:function(){return this.rollingCounter-=1,this.rollingCounter}},{key:"_calculateChecksum",value:function(e){for(var t=e[1],n=-1*e[3],r=0;r<t;++r)n+=e[r],n&=255;return n<0||n>255?(rw("Checksum failed!"),0):n}},{key:"_sendCommand",value:function(e){var t=new Uint8Array(ib.HEADER.byteLength+e.byteLength);return t.set(new Uint8Array(ib.HEADER),0),t.set(new Uint8Array(e),ib.HEADER.byteLength),t[1]=t.length,t[2]=this._decRollingCounter(),t[3]=this._calculateChecksum(t),this._queueWriteCommand(t)}},{key:"_writeToDevice",value:(u=r(dd.mark((function e(t){var n,r,i;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,i=t.length;case 2:if(!(i>0)){e.next=14;break}return e.prev=3,i>this.device.maxPacketLength?(n=t.subarray(r,r+this.device.maxPacketLength),i-=this.device.maxPacketLength,r+=this.device.maxPacketLength):(n=t.subarray(r,r+i),i=0),e.next=7,this.device.writeCommand(n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),rw("Write Failure: ".concat(e.t0));case 12:e.next=2;break;case 14:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e){return u.apply(this,arguments)})},{key:"_queueWriteCommand",value:function(e){var t=this;return rw("command queued: ".concat(ow(e))),new Yg((function(n,r){t.writeQueue.push({command:e[4],rollingCounter:e[2],buffer:e,written:!1,resolve:n,reject:r}),ag((function(){var n,i;t.writeQueue=Pm(n=t.writeQueue).call(n,(function(t){return t.command===e[4]&&t.rollingCounter!==e[2]})),r(new Error(_d(i="write command timed out after 5s. Command: ".concat(e[4].toString(16)," Rolling Counter: ")).call(i,e[2].toString(16))))}),5e3)}))}},{key:"_getStatus",value:(s=r(dd.mark((function e(){var t,n,r,i;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._sendCommand(ib.GET_STATUS);case 2:return r=e.sent,i={mainFirmwareVersion:_d(t="".concat(r.getUint8(2),".")).call(t,r.getUint8(3)),bleFirmwareVersion:_d(n="".concat(r.getUint8(6),".")).call(n,r.getUint8(9)),battery:r.getUint8(10),chargingStatus:"".concat(r.getUint8(11))},e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"_getAvailableSensors",value:(o=r(dd.mark((function e(){var t,n,r=this;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._sendCommand(ib.GET_SENSOR_IDS).then((function(e){r.availableSensors=e.getUint32(0,!0),rw("Get Available Sensors Returned ".concat(r.availableSensors))}));case 2:t=1,n=0;case 4:if(!(n<31)){e.next=12;break}if((this.availableSensors&t)!==t){e.next=8;break}return e.next=8,this._getSensorInfo(n);case 8:t<<=1;case 9:++n,e.next=4;break;case 12:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"_getDefaultSensorsMask",value:function(){var e=this;return this._sendCommand(ib.GET_DEFAULT_SENSORS_MASK).then((function(t){e.defaultSensorsMask=t.getUint32(0,!0),rw("Default Sensors:"),iw(e)}))}},{key:"_getDeviceInfo",value:function(){var e=this;return this._sendCommand(ib.GET_INFO).then((function(t){var n,r,i,o=new dw("utf-8");e.orderCode=o.decode(Pm(n=new Uint8Array(t.buffer,6,16)).call(n,tw)),e.serialNumber=o.decode(Pm(r=new Uint8Array(t.buffer,22,16)).call(r,tw)),e.name=o.decode(Pm(i=new Uint8Array(t.buffer,38,32)).call(i,tw)),rw("Device Info:"),iw(e)}))}},{key:"_getSensorInfo",value:(n=r(dd.mark((function e(t){var n,r=this;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Uint8Array(ib.GET_SENSOR_INFO))[1]=t,e.abrupt("return",this._sendCommand(n).then((function(e){var t=e.getUint32(2,!0);if(t>0){var n,i,o=new dw("utf-8"),a=new mw({type:e.getUint8(6),mode:e.getUint8(7),minValue:e.getFloat64(108,!0),maxValue:e.getFloat64(116,!0),uncertainty:e.getFloat64(100,!0),minPeriod:e.getUint32(124,!0)/1e3,maxPeriod:((e.getUint32(132,!0)<<32)+e.getUint32(128,!0))/1e3,typicalPeriod:e.getUint32(136,!0)/1e3,granularity:e.getUint32(140,!0)/1e3}),s=new gw({number:e.getUint8(0),name:o.decode(Pm(n=new Uint8Array(e.buffer,14,60)).call(n,tw)),unit:o.decode(Pm(i=new Uint8Array(e.buffer,74,32)).call(i,tw)),mutalExclusionMask:e.getUint32(144,!0),measurementInfo:a,sensorId:t}),c=new bw(s);rw("Get Sensor Info Returned"),iw(c),r.sensors.push(c),c.on("state-changed",(function(){var e;rw("Sensor Restart: ".concat(c.number)),c.enabled&&(r.measurementPeriod=c.specs.measurementInfo.typicalPeriod,Wd(e=r.sensors).call(e,(function(e){if(c.number!==e.number&&e.enabled){var t=1<<e.number;(t&c.specs.mutalExclusionMask)===t?e.enabled=!1:e.specs.measurementInfo.typicalPeriod>r.measurementPeriod&&(r.measurementPeriod=e.specs.measurementInfo.typicalPeriod)}}))),r._restartMeasurements()}))}})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_restartMeasurements",value:(t=r(dd.mark((function e(){var t;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.collecting,!this.collecting){e.next=10;break}return e.prev=2,e.next=5,this._stopMeasurements();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:if(this.collecting||!t){e.next=19;break}return e.prev=11,e.next=14,this._startMeasurements();case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.error(e.t1);case 19:case"end":return e.stop()}}),e,this,[[2,7],[11,16]])}))),function(){return t.apply(this,arguments)})},{key:"_setMeasurementPeriod",value:function(e){var t=new Uint8Array(ib.SET_MEASUREMENT_PERIOD),n=1e3*this.minMeasurementPeriod;return e<n&&(e=n),rw("MeasurementPeriod: ".concat(e)),t[3]=e>>0&255,t[4]=e>>8&255,t[5]=e>>16&255,t[6]=e>>24&255,this._sendCommand(t)}},{key:"_getEnabledChannelMask",value:function(){var e,t=0,n=Pm(e=this.sensors).call(e,(function(e){return e.enabled}));return Wd(n).call(n,(function(e){t+=1<<e.number})),t}},{key:"_startMeasurements",value:function(){var e=this;return this._setMeasurementPeriod(1e3*this.measurementPeriod).then((function(){var t=e._getEnabledChannelMask();rw("ChannelMask: ".concat(t));var n=new Uint8Array(ib.START_MEASUREMENTS);return n[3]=t>>0&255,n[4]=t>>8&255,n[5]=t>>16&255,n[6]=t>>24&255,e._sendCommand(n).then((function(t){0===t.getUint8(0)&&(e.collecting=!0,e.emit("measurements-started"))}))}))}},{key:"_stopMeasurements",value:function(){var e=this;return this._sendCommand(ib.STOP_MEASUREMENTS).then((function(t){0===t.getUint8(0)&&(e.collecting=!1,e.emit("measurements-stopped"))}))}}]),g}(nw),ww=function(){function e(t){i(this,e),this.webBluetoothNativeDevice=t,this.maxPacketLength=20,this.deviceCommand=null,this.deviceResponse=null}var t,n,o;return a(e,[{key:"godirectAdapter",get:function(){return!0}},{key:"writeCommand",value:(o=r(dd.mark((function e(t){return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deviceCommand.writeValue(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"setup",value:(n=r(dd.mark((function e(t){var n,r,i,o,a,s=this;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.onClosed,r=t.onResponse,this.webBluetoothNativeDevice.addEventListener("gattserverdisconnected",n),e.prev=2,e.next=5,this.webBluetoothNativeDevice.gatt.connect();case 5:return i=e.sent,e.next=8,i.getPrimaryService("d91714ef-28b9-4f91-ba16-f0d9a604f112");case 8:return o=e.sent,e.next=11,o.getCharacteristics();case 11:a=e.sent,Wd(a).call(a,(function(e){switch(e.uuid){case"f4bf14a6-c7d5-4b6d-8aa8-df1a7c83adcb":s.deviceCommand=e;break;case"b41e6675-a329-40e0-aa01-44d2f444babe":s.deviceResponse=e,s.deviceResponse.addEventListener("characteristicvaluechanged",(function(e){var t=e.target.value;r(t)})),s.deviceResponse.startNotifications();break;default:rw("No case found for ".concat(e.uuid))}})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.error(e.t0);case 18:if(this.deviceCommand&&this.deviceResponse){e.next=20;break}throw new Error("Expected command and response characteristics not found");case 20:case"end":return e.stop()}}),e,this,[[2,15]])}))),function(e){return n.apply(this,arguments)})},{key:"close",value:(t=r(dd.mark((function e(){return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.webBluetoothNativeDevice.gatt.disconnect());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),_w=function(){function e(t){i(this,e),this.webUsbNativeDevice=t,this.onResponse=null,this.onClosed=null,this.reportId=0,this.maxPacketLength=63}var t,n,o;return a(e,[{key:"godirectAdapter",get:function(){return!0}},{key:"writeCommand",value:(o=r(dd.mark((function e(t){var n,r;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Uint8Array(_d(n=[t.byteLength]).call(n,m(t))),e.abrupt("return",this.webUsbNativeDevice.sendReport(this.reportId,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"setup",value:(n=r(dd.mark((function e(t){var n,r,i=this;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.onClosed,r=t.onResponse,e.next=3,this.webUsbNativeDevice.open();case 3:this.onResponse=r,this.onClosed=n,this.reportId=this.webUsbNativeDevice.collections[0].outputReports[0].reportId,this.webUsbNativeDevice.oninputreport=function(e){var t,n=new DataView(Rg(t=e.data.buffer).call(t,1));i.onResponse(n)};case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"close",value:(t=r(dd.mark((function e(){return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.webUsbNativeDevice.close(),this.onClosed();case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Sw={createDevice:function(e){var t=arguments;return r(dd.mark((function n(){var r,i,o,a,s,c,u;return dd.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{},i=r.open,o=void 0===i||i,a=r.startMeasurements,s=void 0===a||a,(c=e).godirectAdapter){n.next=12;break}if(!e.gatt){n.next=7;break}c=new ww(e),n.next=12;break;case 7:if(!e.collections[0].outputReports[0]){n.next=11;break}c=new _w(e),n.next=12;break;case 11:throw new Error("Device Open Failed [ No matching adapter ]");case 12:if(u=new xw(c),!o){n.next=23;break}return n.prev=14,n.next=17,u.open(s);case 17:n.next=23;break;case 19:throw n.prev=19,n.t0=n.catch(14),console.error(n.t0),new Error("Device Open Failed [".concat(n.t0,"]"));case 23:return n.abrupt("return",u);case 24:case"end":return n.stop()}}),n,null,[[14,19]])})))()},selectDevice:function(){var e=arguments;return r(dd.mark((function t(){var n,r;return dd.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!(e.length>0&&void 0!==e[0])||e[0])){t.next=9;break}if(navigator.bluetooth){t.next=4;break}return t.abrupt("return",Yg.reject(new Error("No Web Bluetooth support.")));case 4:return t.next=6,navigator.bluetooth.requestDevice({filters:[{namePrefix:"GDX"}],optionalServices:["d91714ef-28b9-4f91-ba16-f0d9a604f112"]});case 6:n=t.sent,t.next=15;break;case 9:if(navigator.hid){t.next=11;break}return t.abrupt("return",Yg.reject(new Error("No Web HID support.")));case 11:return t.next=13,navigator.hid.requestDevice({filters:[{vendorId:2295,productId:16}]});case 13:r=t.sent,n=r[0];case 15:if(n){t.next=17;break}throw new DOMException("No device selected.");case 17:return t.abrupt("return",Sw.createDevice(n));case 18:case"end":return t.stop()}}),t)})))()}},kw=[vec(216/255,38/255,47/255),vec(59/255,139/255,.8),vec(186/255,178/255,30/255),vec(.2,69/255,170/255),vec(226/255,96/255,148/255),vec(91/255,44/255,99/255)];function Ew(e){var t;return _d(t="".concat(e.name," ")).call(t,e.unit?"(".concat(e.unit,")"):"")}var Ow=function(e){c(s,e);var n,o=y(s);function s(){var e,t,n;return i(this,s),(n=o.call(this)).started=!1,n.addDevice=Vd(e=n._addDevice).call(e,v(n)),n.end=Vd(t=n._end).call(t,v(n)),n.devices=[],n.declaredDevices=[],n._setupVenierSections(),n}return a(s,[{key:"vp_collect_is_pressed",value:function(){return this.started}},{key:"vp_close_is_pressed",value:function(){return!1}},{key:"started",get:function(){return this._started},set:function(e){var t,n;if(this._started=e,this.actionButton)if(e){if(this.actionButton.textContent="Stop",Wd(n=this.devices).call(n,(function(e){return e.deviceStart()})),this.collectionStartTime=new Date,this._samplesCollected=0,this._graph){this._graph.xmin=0,this._graph.xmax=5;try{var r,i;Wd(r=this._curves).call(r,(function(e){return e.remove()})),this._curveIndecies=$d(i=this._curves).call(i,(function(){return[0]}))}catch(e){var o;!this._startedFirstTypeErrorCaught&&wy(o=e.message).call(o,"Cannot read properties of undefined (reading 'type')")?this._startedFirstTypeErrorCaught=!0:console.error(e)}}}else this.actionButton.textContent=this._collectionButtonText,Wd(t=this.devices).call(t,(function(e){return e.stopRead()})),delete this.firstRead}},{key:"samplesPerSecond",get:function(){return Math.round(1e3/this.period)},set:function(e){this.period=1/(e/1e3)}},{key:"period",get:function(){return this._period},set:function(e){var t,n=this;this._period=Number(e)||100,this.sampleLabel&&(this.sampleLabel.textContent="".concat(this.samplesPerSecond," samples/second")),Wd(t=this.devices).call(t,(function(e){e&&(e.period=n.period)})),this._setSamplesToCollect()}},{key:"periodS",get:function(){return Number(this.period/1e3)}},{key:"_addDevice",value:(n=r(dd.mark((function e(){var t,n,r,i,o=this;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,Sw.selectDevice(this.isBluetoothConnection);case 4:if(t.item=e.sent,t.item){e.next=7;break}throw new Error("Device selection cancelled or failed");case 7:this.addDeviceButton.text="Add another Go Direct Device",t.item.stop(),r=this._createSensorInteraction(t),wy(n=this.devices).call(n,r)||this.devices.push(r),this.channels===this._unsetChannels?r.device.item.sensors[0].setEnabled(!0):Wd(i=r.device.item.sensors).call(i,(function(e){var t,n,i=My(t=o.declaredDevices).call(t,(function(e){return e===r.device.item.name}));-1===i&&(i=0),e.setEnabled(null===(n=o.channels[i])||void 0===n?void 0:wy(n).call(n,e.number))})),r.setupSensors(),this.dispatchEvent(new Event("device-connected")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0);case 19:case"end":return e.stop()}}),e,this,[[1,16]])}))),function(){return n.apply(this,arguments)})},{key:"_createSensorInteraction",value:function(e,t){var n,i=this,o=zy(n=this.devices).call(n,(function(t){return t.device.item.name===e.item.name})),a=o||document.createElement("vernier-device");a.toggleAttribute("placeholder",t),e.element=a,a.device=e,a.period=this.period,this._skipDeviceControl||this._deviceSection.append(a),a.addEventListener("disconnected",(function(){var e,t;lm(e=i.devices).call(e,Sm(t=i.devices).call(t,a),1),i.devices.length||i._resetState()}));var s=function(){var e=r(dd.mark((function e(){var t,n,r,o;return dd.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.dispatchEvent(new Event("device-sensor-toggled")),i._graph){e.next=3;break}return e.abrupt("return");case 3:o=Pm(t=Km(n=i.devices).call(n,(function(e){return e.device.item.sensors}))).call(t,(function(e){return null==e?void 0:e.enabled})),i._graph.ytitle="['".concat($d(o).call(o,Ew).join("', '"),"']"),i._curves=$d(o).call(o,(function(e,t){return gcurve({color:kw[t]})})),i._curveIndecies=$d(r=i._curves).call(r,(function(){return[0]}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.addEventListener("sensor-toggled",s),t||ag((function(){s()})),a}},{key:"_end",value:function(){var e;this.started=!1,Wd(e=m(this.devices)).call(e,(function(e){e.disconnect()}))}},{key:"_resetGraph",value:function(){this._graph&&(this._graph.xtitle="Time",this._graph.ytitle="",this._graph.scroll=!0,this._graph.width=500,this._graph.height=300,this._graph.xmin=0,this._graph.xmax=5,this._graph.fast=!1)}},{key:"_resetState",value:function(){var e,t,n,r=this;this.addDeviceButton.text="Select a Go Direct Device",Wd(e=["actionButton","exitButton","sampleSlider","sampleLabel"]).call(e,(function(e){r[e]&&(r[e].remove(),delete r[e])})),Wd(t=Sg(this._metersDivision.children)).call(t,(function(e){return e.remove()})),this._curves&&Wd(n=this._curves).call(n,(function(e){return e.remove()})),this._resetGraph()}},{key:"_setSamplesToCollect",value:function(){this._collectFor&&(this._samplesToCollect=Math.floor(this.samplesPerSecond*this._collectFor))}},{key:"_setupVenierSections",value:function(){this._vernierAboveCanvasSection=document.createElement("section"),this._vernierAboveCanvasSection.id="vernier-above-section",this._vernierAboveCanvasSection.style.display="flex",this._vernierAboveCanvasSection.style.flexDirection="column",this._vernierAboveCanvasSection.style.whiteSpace="normal",this._vernierBelowCanvasSection=document.createElement("section"),this._vernierBelowCanvasSection.id="vernier-below-section",this._vernierBelowCanvasSection.style.display="flex",this._vernierBelowCanvasSection.style.flexDirection="column",this._vernierBelowCanvasSection.style.whiteSpace="normal",this._interactionSection=document.createElement("section"),this._interactionSection.id="vernier-interaction-section",this._interactionSection.style.display="grid",this._interactionSection.style.gridTemplateColumns="repeat(auto-fit, 200px)",this._interactionSection.style.padding="8px",this._interactionSection.style.gap="8px",this._interactionSection.style.alignItems="center",this._deviceSection=document.createElement("section"),this._deviceSection.id="vernier-device-section",this._deviceSection.style.display="grid",this._deviceSection.style.gridTemplateColumns="repeat(auto-fit, 450px)",document.querySelector(".glowscript").prepend(this._vernierAboveCanvasSection),document.querySelector(".glowscript").after(this._vernierBelowCanvasSection),this._vernierAboveCanvasSection.appendChild(this._interactionSection),this._vernierBelowCanvasSection.appendChild(this._deviceSection)}},{key:"_toggleStarted",value:function(){this.started=!this.started}},{key:"_verifyConnection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ble";if("ble"===e)return!0;if("usb"===e)return!1;throw new Error('connection must be "ble" for bluetooth or "usb" for a wired connection')}},{key:"collectFor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._collectFor=e,this.period&&this._setSamplesToCollect()}},{key:"open",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};("string"==typeof n&&(n={connection:n}),this.isBluetoothConnection=this._verifyConnection(n.connection.toLowerCase()),n.device_to_open)&&(this.declaredDevices=n.device_to_open.split(/, ?/),this.devices=$d(e=this.declaredDevices).call(e,(function(e){return t._createSensorInteraction({item:{name:e}},!0)})))}},{key:"read",value:function(){var e,t,n,r,i=this;if(!this.devices)return!1;if(this._samplesCollected>this._samplesToCollect)return this.started=!1,null;var o=$d(e=Pm(t=Km(n=this.devices).call(n,(function(e){return Dg(e.chartMeasurements)}))).call(t,(function(e){var t;return!wy(t=[null,void 0]).call(t,e)}))).call(e,(function(e){return Rg(e).call(e,0,i._samplesToCollect+1)}));this.dispatchEvent(new CustomEvent("data-read",{detail:{measurements:$d(o).call(o,(function(e){return $d(e).call(e,(function(e,t){return[i.periodS*t,e]}))}))}}));var a=Km(r=this.devices).call(r,(function(e){return e.readMeasurement()})),s=Wg(a).call(a,(function(e){return null===e}))?null:a;return s&&this._samplesCollected++,s}},{key:"select_sensors",value:function(e){this._unsetChannels=[[0]],Qg(e)&&Qg(e[0])&&(e={channels:e}),Qg(e)&&!Qg(e[0])&&(e={channels:[e]}),"number"==typeof e&&(e={channels:[[e]]}),void 0===e&&(e={channels:this._unsetChannels}),this.channels=e.channels}},{key:"start",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.period="number"==typeof t?t:null!==(e=t.period)&&void 0!==e?e:100,this.addDeviceButton=button({bind:this.addDevice,text:"Select a Go Direct Device",id:"addDevice"})}},{key:"vp_rate",value:function(){return 2e3/this.period}},{key:"vp_get_slider_period",value:function(){return this.period}},{key:"_collectionButtonText",get:function(){return this._collectFor>0?"Collect for ".concat(this._collectFor,"s"):"Collect"}},{key:"vp_vernier_canvas",value:function(){var e,n,r=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o={buttons:!0,meters:!0,slider:!0,graph:!1,channel_setup:!0};((i=t(t({},o),i)).buttons&&this.addEventListener("device-connected",(function(){var e;r.actionButton||(r.actionButton=document.createElement("button"),r.actionButton.style.color="#00aa00",r.actionButton.style.fontSize="20px",r.actionButton.style.padding="4px 8px",r.actionButton.textContent=r._collectionButtonText,r.actionButton.addEventListener("click",Vd(e=r._toggleStarted).call(e,r)),r.exitButton=document.createElement("button"),r.exitButton.style.color="#aa0000",r.exitButton.style.fontSize="20px",r.exitButton.style.padding="4px 8px",r.exitButton.textContent="Close",r.exitButton.addEventListener("click",r.end),r._interactionSection.append(r.actionButton,r.exitButton))})),i.meters&&(this._metersDivision=document.createElement("div"),this._metersDivision.style.display="grid",this._metersDivision.style.gap="8px",this._metersDivision.style.padding="8px",this._metersDivision.style.gridTemplateColumns="repeat(auto-fit, 25ex)",this.addEventListener("device-connected",(function(){r.addEventListener("device-sensor-toggled",(function(){var e,t,n;null===(e=Wd(t=Sg(r._metersDivision.children)))||void 0===e||e.call(t,(function(e){return e.remove()})),Wd(n=r.devices).call(n,(function(e){var t;if(e.device.item.sensors){var n=Pm(t=e.device.item.sensors).call(t,(function(e){return e.enabled}));Wd(n).call(n,(function(e){var t=document.createElement("div");t.style.display="flex",t.style.alignItems="center",t.style.gap="8px";var n=document.createElement("span"),i=document.createElement("span");n.textContent="".concat(Ew(e),": "),e.on("value-changed",(function(e){var t=e.value;i.textContent=Math.round(100*t)/100})),t.appendChild(n),t.appendChild(i),r._metersDivision.appendChild(t)}))}}))})),r._vernierAboveCanvasSection.appendChild(r._metersDivision)}))),i.slider&&this.addEventListener("device-connected",(function(){r.sampleSlider||(r.sampleSlider=document.createElement("input"),r.sampleSlider.id="sample-slider",r.sampleSlider.setAttribute("type","range"),r.sampleSlider.value=r.samplesPerSecond,r.sampleSlider.setAttribute("min",1),r.sampleSlider.setAttribute("max",100),r.sampleSlider.setAttribute("step",1),r.sampleSlider.addEventListener("input",(function(e){var t=e.target.value;r.samplesPerSecond=t})),r.sampleLabel=document.createElement("label"),r.sampleLabel.textContent="".concat(r.samplesPerSecond," samples/second"),r.sampleLabel.setAttribute("for","sample-slider"),r._interactionSection.append(r.sampleSlider),r._interactionSection.append(r.sampleLabel))})),i.chart)&&(this._graph=graph({xtitle:"Time",ytitle:"",scroll:!0,width:500,height:300,xmin:0,xmax:5,fast:!1}),this._curves=[gcurve()],this._curves[0].plot(0,0),this._curveIndecies=$d(n=this._curves).call(n,(function(){return[0]})),this.addEventListener("data-read",(function(e){var t,n=e.detail.measurements;Wd(t=r._curves).call(t,(function(e,t){if(n[t])for(;r._curveIndecies[t]<n[t].length;){var i=n[t][r._curveIndecies[t]];e.plot.apply(e,m(i)),r._curveIndecies[t]++}}))})));this._skipDeviceControl=!i.channel_setup,this._skipDeviceControl&&this.devices.length&&Wd(e=Sg(this._deviceSection.children)).call(e,(function(e){return e.remove()}))}}]),s}(h(EventTarget)),Aw=function(e){c(n,e);var t=y(n);function n(){var e;return i(this,n),(e=t.call(this)).attachShadow({mode:"open"}),e.resetMeasurements(),e}return a(n,[{key:"styles",get:function(){return"\n      <style>\n        fieldset {\n          display:flex;\n          flex-direction:column;\n          white-space:normal;\n          gap:4px;\n        }\n        [hidden] {\n          display:none;\n        }\n        [data-sensor-channel] {\n          display:flex;\n          justify-content: space-between;\n        }\n        [data-sensor-reading] {\n          color: var(--chart-color, 'black')\n        }\n      </style>\n    "}},{key:"period",get:function(){return this._period},set:function(e){var t,n;this._period=Number(e)||100,this.dispatchEvent(new Event("period-set")),null===(t=(n=this.device.item).stop)||void 0===t||t.call(n),this.deviceStart()}},{key:"connectedCallback",value:function(){var e=this;this.setAttribute("id",this.device.item.name),this.render(),this.shadowRoot.querySelector("#disconnect").addEventListener("click",(function(){e.disconnect()}))}},{key:"resetMeasurements",value:function(){this.chartMeasurements={},this.readMeasurements={}}},{key:"deviceStart",value:function(){var e,t=this;if(this.device.item.sensors){this.resetMeasurements();var n=Pm(e=this.device.item.sensors).call(e,(function(e){return e.enabled}));n.length&&(Wd(n).call(n,(function(e){var n,r,i,o;t.chartMeasurements[Ew(e)]=null===(n=t.chartMeasurements)||void 0===n||null===(r=n[Ew(e)])||void 0===r?void 0:Rg(r).call(r,-1),t.readMeasurements[Ew(e)]=null===(i=t.readMeasurements)||void 0===i||null===(o=i[Ew(e)])||void 0===o?void 0:Rg(o).call(o,-1)})),this._reading=!0,this.device.item.start(this.period))}}},{key:"stopRead",value:function(){this._reading=!1}},{key:"disconnect",value:function(){this.dispatchEvent(new Event("disconnected"));try{this.device.item.stop(),this.device.item.close()}catch(e){console.error(e)}this.remove()}},{key:"readMeasurement",value:function(){var e;return $d(e=Dg(this.readMeasurements)).call(e,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null!==(e=t.shift())&&void 0!==e?e:null}))}},{key:"setupSensors",value:function(){var e,t=this;this.render(),Wd(e=this.device.item.sensors).call(e,(function(e){e.on("value-changed",(function(n){var r,i=n.value;e.enabled&&(t._reading&&(t.chartMeasurements[Ew(e)]||(t.chartMeasurements[Ew(e)]=[],t.readMeasurements[Ew(e)]=[]),t.chartMeasurements[Ew(e)].push(i),t.readMeasurements[Ew(e)].push(i)),t.shadowRoot.querySelector('[data-sensor-channel="'.concat(Ew(e),'"] [data-sensor-reading]')).textContent=_d(r="".concat(Math.round(100*i)/100," ")).call(r,e.unit))}))}));var n=this.shadowRoot.querySelectorAll("#channels input");Wd(n).call(n,(function(e){e.addEventListener("change",(function(){var n,r=zy(n=t.device.item.sensors).call(n,(function(t){return t.number===Number(e.dataset.number)}));r.setEnabled(e.checked),t.dispatchEvent(new CustomEvent("sensor-toggled",{detail:t.device})),t.device.item.stop(),t.deviceStart(),r.enabled?(t.chartMeasurements[Ew(r)]=[],t.readMeasurements[Ew(r)]=[]):(delete t.chartMeasurements[Ew(r)],delete t.readMeasurements[Ew(r)])}))}))}},{key:"render",value:function(){var e,t,n;this.shadowRoot.innerHTML=_d(e=_d(t="\n      ".concat(this.styles,"\n      <fieldset id='sensor'>\n        <legend>")).call(t,this.device.item.name,"</legend>\n        <fieldset id='channels'>\n          <legend>Channels</legend>\n          ")).call(e,$d(n=this.device.item.sensors||[]).call(n,(function(e){var t,n,r;return _d(t=_d(n=_d(r='<div data-sensor-channel="'.concat(Ew(e),'"><label><input ')).call(r,e.enabled?"checked":""," type='checkbox'\n                data-number=\"")).call(n,e.number,'">')).call(t,Ew(e),"</label><span data-sensor-reading></span></div>")})).join(""),"\n        </fieldset>\n        <button id='disconnect'>Disconnect</button>\n      </fieldset>\n    ")}}]),n}(h(HTMLElement));return customElements.define("vernier-device",Aw),new Ow}));
